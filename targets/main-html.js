/** Cooked with Flambe, https://getflambe.com */
'use strict';(function(){function o(a,c){function g(){}g.prototype=a;var b=new g,i;for(i in c)b[i]=c[i];c.toString!==Object.prototype.toString&&(b.toString=c.toString);return b}function Ec(a){return a instanceof Array?function(){return z.iter(a)}:"function"==typeof a.iterator?Q(a,a.iterator):a.iterator}function Q(a,c){if(null==c)return null;null==c.__id__&&(c.__id__=Kc++);var g;null==a.hx__closures__?a.hx__closures__={}:g=a.hx__closures__[c.__id__];null==g&&(g=function(){return g.method.apply(g.scope,
arguments)},g.scope=a,g.method=c,a.hx__closures__[c.__id__]=g);return g}var d={},f=function(){return v.__string_rec(this,"")},pa=function(a,c){c=c.split("u").join("");this.r=RegExp(a,c)};d.EReg=pa;pa.__name__=!0;pa.prototype={match:function(a){this.r.global&&(this.r.lastIndex=0);this.r.m=this.r.exec(a);this.r.s=a;return null!=this.r.m},matched:function(a){if(null!=this.r.m&&0<=a&&a<this.r.m.length)return this.r.m[a];throw"EReg::matched";},matchedPos:function(){if(null==this.r.m)throw"No string matched";
return{pos:this.r.m.index,len:this.r.m[0].length}},__class__:pa};var z=function(){};d.HxOverrides=z;z.__name__=!0;z.cca=function(a,c){var g=a.charCodeAt(c);return g!=g?void 0:g};z.substr=function(a,c,g){if(null!=c&&0!=c&&null!=g&&0>g)return"";null==g&&(g=a.length);0>c?(c=a.length+c,0>c&&(c=0)):0>g&&(g=a.length+g-c);return a.substr(c,g)};z.remove=function(a,c){var g=a.indexOf(c);if(-1==g)return!1;a.splice(g,1);return!0};z.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length},
next:function(){return this.arr[this.cur++]}}};var bb=function(){};d.Lambda=bb;bb.__name__=!0;bb.array=function(a){for(var c=[],a=Ec(a)();a.hasNext();){var g=a.next();c.push(g)}return c};bb.count=function(a,c){var g=0;if(null==c)for(var b=Ec(a)();b.hasNext();)b.next(),g++;else for(b=Ec(a)();b.hasNext();){var i=b.next();c(i)&&g++}return g};var cb=function(){this.length=0};d.List=cb;cb.__name__=!0;cb.prototype={push:function(a){this.h=a=[a,this.h];null==this.q&&(this.q=a);this.length++},remove:function(a){for(var c=
null,g=this.h;null!=g;){if(g[0]==a)return null==c?this.h=g[1]:c[1]=g[1],this.q==g&&(this.q=c),this.length--,!0;c=g;g=g[1]}return!1},iterator:function(){return{h:this.h,hasNext:function(){return null!=this.h},next:function(){if(null==this.h)return null;var a=this.h[0];this.h=this.h[1];return a}}},__class__:cb};var uc=function(){};d.IMap=uc;uc.__name__=!0;Math.__name__=!0;var Ka=function(){};d.Reflect=Ka;Ka.__name__=!0;Ka.field=function(a,c){try{return a[c]}catch(g){return null}};var A=function(){};
d.Std=A;A.__name__=!0;A.is=function(a,c){return v.__instanceof(a,c)};A.string=function(a){return v.__string_rec(a,"")};A["int"]=function(a){return a|0};A.parseInt=function(a){var c=parseInt(a,10);if(0==c&&(120==z.cca(a,1)||88==z.cca(a,1)))c=parseInt(a);return isNaN(c)?null:c};var Yb=function(){};d.StringTools=Yb;Yb.__name__=!0;Yb.startsWith=function(a,c){return a.length>=c.length&&z.substr(a,0,c.length)==c};var db=function(){};d.Type=db;db.__name__=!0;db.resolveClass=function(a){a=d[a];return null==
a||!a.__name__?null:a};db.resolveEnum=function(a){a=d[a];return null==a||!a.__ename__?null:a};db.allEnums=function(a){return a.__empty_constructs__};var ga=function(){};d["flambe.util.Disposable"]=ga;ga.__name__=!0;ga.prototype={__class__:ga};var s=function(){};d["flambe.Component"]=s;s.__name__=!0;s.__interfaces__=[ga];s.prototype={onAdded:function(){},onRemoved:function(){},onUpdate:function(){},dispose:function(){null!=this.owner&&this.owner.remove(this)},get_name:function(){return null},init:function(a,
c){this.owner=a;this.next=c},__class__:s};var n=function(){this.parent=this.firstChild=this.next=this.firstComponent=null;this._compMap={}};d["flambe.Entity"]=n;n.__name__=!0;n.__interfaces__=[ga];n.prototype={add:function(a){null!=a.owner&&a.owner.remove(a);var c=a.get_name(),g=this._compMap[c];null!=g&&this.remove(g);this._compMap[c]=a;c=null;for(g=this.firstComponent;null!=g;)c=g,g=g.next;null!=c?c.next=a:this.firstComponent=a;a.init(this,null);a.onAdded();return this},remove:function(a){for(var c=
null,g=this.firstComponent;null!=g;){var b=g.next;if(g==a)return null==c?this.firstComponent=b:c.init(this,b),delete this._compMap[g.get_name()],g.onRemoved(),g.init(null,null),!0;c=g;g=b}return!1},addChild:function(a,c){null==c&&(c=!0);null!=a.parent&&a.parent.removeChild(a);a.parent=this;if(c){for(var g=null,b=this.firstChild;null!=b;)g=b,b=b.next;null!=g?g.next=a:this.firstChild=a}else a.next=this.firstChild,this.firstChild=a;return this},removeChild:function(a){for(var c=null,g=this.firstChild;null!=
g;){var b=g.next;if(g==a){null==c?this.firstChild=b:c.next=b;g.parent=null;g.next=null;break}c=g;g=b}},disposeChildren:function(){for(;null!=this.firstChild;)this.firstChild.dispose()},dispose:function(){for(null!=this.parent&&this.parent.removeChild(this);null!=this.firstComponent;)this.firstComponent.dispose();this.disposeChildren()},__class__:n};var vc=function(){};d["flambe.util.PackageLog"]=vc;vc.__name__=!0;var Zb=function(){};d["flambe.platform.Platform"]=Zb;Zb.__name__=!0;Zb.prototype={__class__:Zb};
var qa=function(){};d["flambe.platform.html.HtmlPlatform"]=qa;qa.__name__=!0;qa.__interfaces__=[Zb];qa.prototype={init:function(){var a=this;q.fixAndroidMath();var c=null;try{c=window.flambe.canvas}catch(g){}c.setAttribute("tabindex","0");c.style.outlineStyle="none";c.style.webkitTapHighlightColor="transparent";c.setAttribute("moz-opaque","true");this._stage=new Aa(c);this._pointer=new L;this._mouse=new eb(this._pointer,c);this._renderer=this.createRenderer(c);this.mainLoop=new Ba;this.musicPlaying=
!1;this._canvas=c;this._container=c.parentElement;this._container.style.overflow="hidden";this._container.style.position="relative";this._container.style.msTouchAction="none";var b=0,i=function(g){if(!(1E3>g.timeStamp-b)){var i=c.getBoundingClientRect(),l=a.getX(g,i),i=a.getY(g,i);switch(g.type){case "mousedown":g.target==c&&(g.preventDefault(),a._mouse.submitDown(l,i,g.button),c.focus());break;case "mousemove":a._mouse.submitMove(l,i);break;case "mouseup":a._mouse.submitUp(l,i,g.button);break;case "mousewheel":case "DOMMouseScroll":a._mouse.submitScroll(l,
i,"mousewheel"==g.type?g.wheelDelta/40:-g.detail)&&g.preventDefault()}}};window.addEventListener("mousedown",i,!1);window.addEventListener("mousemove",i,!1);window.addEventListener("mouseup",i,!1);c.addEventListener("mousewheel",i,!1);c.addEventListener("DOMMouseScroll",i,!1);c.addEventListener("contextmenu",function(a){a.preventDefault()},!1);var l="undefined"!=typeof window.ontouchstart,i="msMaxTouchPoints"in window.navigator&&1<window.navigator.msMaxTouchPoints;if(l||i){var d=new fb(this._pointer,
l?4:window.navigator.msMaxTouchPoints);this._touch=d;i=function(c){var g;g=l?c.changedTouches:[c];var i=c.target.getBoundingClientRect();b=c.timeStamp;switch(c.type){case "touchstart":case "MSPointerDown":case "pointerdown":c.preventDefault();q.SHOULD_HIDE_MOBILE_BROWSER&&q.hideMobileBrowser();for(c=0;c<g.length;){var f=g[c];++c;var h=a.getX(f,i),j=a.getY(f,i);d.submitDown((l?f.identifier:f.pointerId)|0,h,j)}break;case "touchmove":case "MSPointerMove":case "pointermove":c.preventDefault();for(c=0;c<
g.length;)f=g[c],++c,h=a.getX(f,i),j=a.getY(f,i),d.submitMove((l?f.identifier:f.pointerId)|0,h,j);break;case "touchend":case "touchcancel":case "MSPointerUp":case "pointerup":for(c=0;c<g.length;)f=g[c],++c,h=a.getX(f,i),j=a.getY(f,i),d.submitUp((l?f.identifier:f.pointerId)|0,h,j)}};l?(c.addEventListener("touchstart",i,!1),c.addEventListener("touchmove",i,!1),c.addEventListener("touchend",i,!1),c.addEventListener("touchcancel",i,!1)):(c.addEventListener("MSPointerDown",i,!1),c.addEventListener("MSPointerMove",
i,!1),c.addEventListener("MSPointerUp",i,!1))}else this._touch=new gb;var f=window.onerror;window.onerror=function(a,c,g){r.uncaughtError.emit(a);return null!=f?f(a,c,g):!1};var h=q.loadExtension("hidden",window.document);null!=h.value?(i=function(){r.hidden.set__(Ka.field(window.document,h.field))},i(null),window.document.addEventListener(h.prefix+"visibilitychange",i,!1)):(i=function(a){r.hidden.set__("pagehide"==a.type)},window.addEventListener("pageshow",i,!1),window.addEventListener("pagehide",
i,!1));r.hidden.get_changed().connect(function(c){c||(a._skipFrame=!0)});this._skipFrame=!1;this._lastUpdate=Date.now();var j=q.loadExtension("requestAnimationFrame").value;if(null!=j){var k=window.performance,m=null!=k&&q.polyfill("now",k);m?this._lastUpdate=k.now():null;var n=null,n=function(g){a.update(m?k.now():g);j(n,c)};j(n,c)}else window.setInterval(function(){a.update(Date.now())},16);La.info("Initialized HTML platform",["renderer",this._renderer.get_type()])},loadAssetPack:function(a){return(new t(this,
a)).promise},getStage:function(){return this._stage},update:function(a){var c=(a-this._lastUpdate)/1E3;this._lastUpdate=a;r.hidden._value||(this._skipFrame?this._skipFrame=!1:(this.mainLoop.update(c),this.mainLoop.render(this._renderer)))},getPointer:function(){return this._pointer},getKeyboard:function(){var a=this;if(null==this._keyboard){this._keyboard=new $;var c=function(c){switch(c.type){case "keydown":a._keyboard.submitDown(c.keyCode)&&c.preventDefault();break;case "keyup":a._keyboard.submitUp(c.keyCode)}};
this._canvas.addEventListener("keydown",c,!1);this._canvas.addEventListener("keyup",c,!1)}return this._keyboard},getRenderer:function(){return this._renderer},getX:function(a,c){return(a.clientX-c.left)*this._stage.get_width()/c.width},getY:function(a,c){return(a.clientY-c.top)*this._stage.get_height()/c.height},createRenderer:function(a){try{var c=wc.getContextWebGL(a,{alpha:!1,depth:!1,failIfMajorPerformanceCaveat:!0});if(null!=c)if(q.detectSlowDriver(c))null;else return new hb(this._stage,c)}catch(g){}return new Ca(a)},
__class__:qa};var N=function(a,c){this._value=a;this._changed=null!=c?new Ma(c):null};d["flambe.util.Value"]=N;N.__name__=!0;N.prototype={watch:function(a){a(this._value,this._value);return this.get_changed().connect(a)},set__:function(a){var c=this._value;a!=c&&(this._value=a,null!=this._changed&&this._changed.emit(a,c));return a},get_changed:function(){null==this._changed&&(this._changed=new Ma);return this._changed},__class__:N};var Da=function(a,c){this._next=null;this._signal=a;this._listener=
c;this.stayInList=!0};d["flambe.util.SignalConnection"]=Da;Da.__name__=!0;Da.__interfaces__=[ga];Da.prototype={once:function(){this.stayInList=!1;return this},dispose:function(){null!=this._signal&&(this._signal.disconnect(this),this._signal=null)},__class__:Da};var F=function(a){this._head=null!=a?new Da(this,a):null;this._deferredTasks=null};d["flambe.util.SignalBase"]=F;F.__name__=!0;F.prototype={connectImpl:function(a,c){var g=this,b=new Da(this,a);this._head==F.DISPATCHING_SENTINEL?this.defer(function(){g.listAdd(b,
c)}):this.listAdd(b,c);return b},disconnect:function(a){var c=this;this._head==F.DISPATCHING_SENTINEL?this.defer(function(){c.listRemove(a)}):this.listRemove(a)},defer:function(a){for(var c=null,g=this._deferredTasks;null!=g;)c=g,g=g.next;a=new $b(a);null!=c?c.next=a:this._deferredTasks=a},willEmit:function(){var a=this._head;this._head=F.DISPATCHING_SENTINEL;return a},didEmit:function(a){this._head=a;a=this._deferredTasks;for(this._deferredTasks=null;null!=a;)a.fn(),a=a.next},listAdd:function(a,
c){if(c)a._next=this._head,this._head=a;else{for(var g=null,b=this._head;null!=b;)g=b,b=b._next;null!=g?g._next=a:this._head=a}},listRemove:function(a){for(var c=null,g=this._head;null!=g;){if(g==a){a=g._next;null==c?this._head=a:c._next=a;break}c=g;g=g._next}},__class__:F};var Ma=function(a){F.call(this,a)};d["flambe.util.Signal2"]=Ma;Ma.__name__=!0;Ma.__super__=F;Ma.prototype=o(F.prototype,{connect:function(a,c){null==c&&(c=!1);return this.connectImpl(a,c)},emit:function(a,c){var g=this;this._head==
F.DISPATCHING_SENTINEL?this.defer(function(){g.emitImpl(a,c)}):this.emitImpl(a,c)},emitImpl:function(a,c){for(var g=this.willEmit(),b=g;null!=b;)b._listener(a,c),b.stayInList||b.dispose(),b=b._next;this.didEmit(g)},__class__:Ma});var w=function(a){F.call(this,a)};d["flambe.util.Signal1"]=w;w.__name__=!0;w.__super__=F;w.prototype=o(F.prototype,{connect:function(a,c){null==c&&(c=!1);return this.connectImpl(a,c)},emit:function(a){var c=this;this._head==F.DISPATCHING_SENTINEL?this.defer(function(){c.emitImpl(a)}):
this.emitImpl(a)},emitImpl:function(a){for(var c=this.willEmit(),g=c;null!=g;)g._listener(a),g.stayInList||g.dispose(),g=g._next;this.didEmit(c)},__class__:w});var x=function(a,c){this._behavior=null;N.call(this,a,c)};d["flambe.animation.AnimatedFloat"]=x;x.__name__=!0;x.__super__=N;x.prototype=o(N.prototype,{set__:function(a){this._behavior=null;return N.prototype.set__.call(this,a)},update:function(a){null!=this._behavior&&(N.prototype.set__.call(this,this._behavior.update(a)),this._behavior.isComplete()&&
(this._behavior=null))},animateTo:function(a,c,g){this.set_behavior(new Na(this._value,a,c,g))},set_behavior:function(a){this._behavior=a;this.update(0);return a},__class__:x});var r=function(){};d["flambe.System"]=r;r.__name__=!0;r.init=function(){r._calledInit||(r._platform.init(),r._calledInit=!0)};var La=function(){};d["flambe.Log"]=La;La.__name__=!0;La.info=function(){null};La.__super__=vc;La.prototype=o(vc.prototype,{__class__:La});var ac=function(){this._realDt=0};d["flambe.SpeedAdjuster"]=
ac;ac.__name__=!0;ac.__super__=s;ac.prototype=o(s.prototype,{get_name:function(){return"SpeedAdjuster_14"},onUpdate:function(a){0<this._realDt&&(a=this._realDt,this._realDt=0);this.scale.update(a)},__class__:ac});var ib=function(){};d["flambe.animation.Behavior"]=ib;ib.__name__=!0;ib.prototype={__class__:ib};var oa=function(){};d["flambe.animation.Ease"]=oa;oa.__name__=!0;oa.linear=function(a){return a};oa.backIn=function(a){return a*a*(2.70158*a-1.70158)};oa.backOut=function(a){return 1- --a*a*(-2.70158*
a-1.70158)};var Oa=function(a,c){this.base=a;this.strength=c};d["flambe.animation.Jitter"]=Oa;Oa.__name__=!0;Oa.__interfaces__=[ib];Oa.prototype={update:function(){return this.base+2*Math.random()*this.strength-this.strength},isComplete:function(){return!1},__class__:Oa};var Na=function(a,c,g,b){this._from=a;this._to=c;this._duration=g;this.elapsed=0;this._easing=null!=b?b:oa.linear};d["flambe.animation.Tween"]=Na;Na.__name__=!0;Na.__interfaces__=[ib];Na.prototype={update:function(a){this.elapsed+=
a;return this.elapsed>=this._duration?this._to:this._from+(this._to-this._from)*this._easing(this.elapsed/this._duration)},isComplete:function(){return this.elapsed>=this._duration},__class__:Na};var ua=function(){};d["flambe.asset.Asset"]=ua;ua.__name__=!0;ua.__interfaces__=[ga];ua.prototype={__class__:ua};var h=d["flambe.asset.AssetFormat"]={__ename__:!0,__constructs__:"WEBP,JXR,PNG,JPG,GIF,DDS,PVR,PKM,MP3,M4A,OPUS,OGG,WAV,Data".split(",")};h.WEBP=["WEBP",0];h.WEBP.toString=f;h.WEBP.__enum__=h;
h.JXR=["JXR",1];h.JXR.toString=f;h.JXR.__enum__=h;h.PNG=["PNG",2];h.PNG.toString=f;h.PNG.__enum__=h;h.JPG=["JPG",3];h.JPG.toString=f;h.JPG.__enum__=h;h.GIF=["GIF",4];h.GIF.toString=f;h.GIF.__enum__=h;h.DDS=["DDS",5];h.DDS.toString=f;h.DDS.__enum__=h;h.PVR=["PVR",6];h.PVR.toString=f;h.PVR.__enum__=h;h.PKM=["PKM",7];h.PKM.toString=f;h.PKM.__enum__=h;h.MP3=["MP3",8];h.MP3.toString=f;h.MP3.__enum__=h;h.M4A=["M4A",9];h.M4A.toString=f;h.M4A.__enum__=h;h.OPUS=["OPUS",10];h.OPUS.toString=f;h.OPUS.__enum__=
h;h.OGG=["OGG",11];h.OGG.toString=f;h.OGG.__enum__=h;h.WAV=["WAV",12];h.WAV.toString=f;h.WAV.__enum__=h;h.Data=["Data",13];h.Data.toString=f;h.Data.__enum__=h;h.__empty_constructs__=[h.WEBP,h.JXR,h.PNG,h.JPG,h.GIF,h.DDS,h.PVR,h.PKM,h.MP3,h.M4A,h.OPUS,h.OGG,h.WAV,h.Data];var bc=function(a,c,g,b){this.name=a;this.url=c;this.format=g;this.bytes=b};d["flambe.asset.AssetEntry"]=bc;bc.__name__=!0;bc.prototype={__class__:bc};var jb=function(){};d["flambe.asset.AssetPack"]=jb;jb.__name__=!0;jb.__interfaces__=
[ga];jb.prototype={__class__:jb};var kb=function(){};d["flambe.asset.File"]=kb;kb.__name__=!0;kb.__interfaces__=[ua];kb.prototype={__class__:kb};var V=function(){this._localBase=this._remoteBase=null;this._entries=[]};d["flambe.asset.Manifest"]=V;V.__name__=!0;V.fromAssets=function(a,c){null==c&&(c=!0);var g=Ka.field(xc.getType(V).assets[0],a);if(null==g){if(c)throw O.withFields("Missing asset pack",["name",a]);return null}var b=new V;b.set_localBase("assets");for(var i=0;i<g.length;){var l=g[i];
++i;var d=l.name,f=a+"/"+d+"?v="+A.string(l.md5),j=V.inferFormat(d);j!=h.Data&&(d=O.removeFileExtension(d));b.add(d,f,l.bytes,j)}return b};V.inferFormat=function(a){a=O.getUrlExtension(a);if(null!=a)switch(a.toLowerCase()){case "gif":return h.GIF;case "jpg":case "jpeg":return h.JPG;case "jxr":case "wdp":return h.JXR;case "png":return h.PNG;case "webp":return h.WEBP;case "dds":return h.DDS;case "pvr":return h.PVR;case "pkm":return h.PKM;case "m4a":return h.M4A;case "mp3":return h.MP3;case "ogg":return h.OGG;
case "opus":return h.OPUS;case "wav":return h.WAV}else null;return h.Data};V.prototype={add:function(a,c,g,b){null==g&&(g=0);null==b&&(b=V.inferFormat(c));a=new bc(a,c,b,g);this._entries.push(a);return a},iterator:function(){return z.iter(this._entries)},getFullURL:function(a){var c;c=null!=this.get_remoteBase()&&V._supportsCrossOrigin?this.get_remoteBase():this.get_localBase();return null!=c?O.joinPath(c,a.url):a.url},get_localBase:function(){return this._localBase},set_localBase:function(a){null!=
a&&yc.that(!Yb.startsWith(a,"http://")&&!Yb.startsWith(a,"https://"),"localBase must be a path on the same domain, NOT starting with http(s)://",null);return this._localBase=a},get_remoteBase:function(){return this._remoteBase},__class__:V};var B=d["flambe.display.BlendMode"]={__ename__:!0,__constructs__:["Normal","Add","Mask","Copy"]};B.Normal=["Normal",0];B.Normal.toString=f;B.Normal.__enum__=B;B.Add=["Add",1];B.Add.toString=f;B.Add.__enum__=B;B.Mask=["Mask",2];B.Mask.toString=f;B.Mask.__enum__=
B;B.Copy=["Copy",3];B.Copy.toString=f;B.Copy.__enum__=B;B.__empty_constructs__=[B.Normal,B.Add,B.Mask,B.Copy];var aa=function(a,c){null==c&&(c=0);null==a&&(a=0);this.x=a;this.y=c};d["flambe.math.Point"]=aa;aa.__name__=!0;aa.prototype={__class__:aa};var m=function(){this.blendMode=this.scissor=null;var a=this;this._flags=139;this._localMatrix=new ha;var c=function(){a._flags|=12};this.x=new x(0,c);this.y=new x(0,c);this.rotation=new x(0,c);this.scaleX=new x(1,c);this.scaleY=new x(1,c);this.anchorX=
new x(0,c);this.anchorY=new x(0,c);this.alpha=new x(1)};d["flambe.display.Sprite"]=m;m.__name__=!0;m.hitTest=function(a,c,g){var b=a._compMap.Sprite_2;if(null!=b){if(3!=(b._flags&3))return null;b.getLocalMatrix().inverseTransform(c,g,m._scratchPoint)&&(c=m._scratchPoint.x,g=m._scratchPoint.y);var i=b.scissor;if(null!=i&&!i.contains(c,g))return null}a=m.hitTestBackwards(a.firstChild,c,g);return null!=a?a:null!=b&&b.containsLocal(c,g)?b:null};m.render=function(a,c){var g=a._compMap.Sprite_2;if(null!=
g){var b=g.alpha._value;if(0==(g._flags&1)||0>=b)return;c.save();1>b&&c.multiplyAlpha(b);null!=g.blendMode&&c.setBlendMode(g.blendMode);var b=g.getLocalMatrix(),i=b.m02,l=b.m12;0!=(g._flags&128)&&(i=Math.round(i),l=Math.round(l));c.transform(b.m00,b.m10,b.m01,b.m11,i,l);b=g.scissor;null!=b&&c.applyScissor(b.x,b.y,b.width,b.height);g.draw(c)}b=a._compMap.Director_13;if(null!=b){b=b.occludedScenes;for(i=0;i<b.length;)l=b[i],++i,m.render(l,c)}for(b=a.firstChild;null!=b;)i=b.next,m.render(b,c),b=i;null!=
g&&c.restore()};m.hitTestBackwards=function(a,c,b){if(null!=a){var e=m.hitTestBackwards(a.next,c,b);return null!=e?e:m.hitTest(a,c,b)}return null};m.__super__=s;m.prototype=o(s.prototype,{get_name:function(){return"Sprite_2"},getNaturalWidth:function(){return 0},getNaturalHeight:function(){return 0},containsLocal:function(a,c){return 0<=a&&a<this.getNaturalWidth()&&0<=c&&c<this.getNaturalHeight()},getLocalMatrix:function(){0!=(this._flags&4)&&(this._flags&=-5,this._localMatrix.compose(this.x._value,
this.y._value,this.scaleX._value,this.scaleY._value,3.141592653589793*this.rotation._value/180),this._localMatrix.translate(-this.anchorX._value,-this.anchorY._value));return this._localMatrix},centerAnchor:function(){this.anchorX.set__(this.getNaturalWidth()/2);this.anchorY.set__(this.getNaturalHeight()/2);return this},setScale:function(a){this.scaleX.set__(a);this.scaleY.set__(a);return this},onAdded:function(){0!=(this._flags&256)&&this.connectHover()},onRemoved:function(){null!=this._hoverConnection&&
(this._hoverConnection.dispose(),this._hoverConnection=null)},onUpdate:function(a){this.x.update(a);this.y.update(a);this.rotation.update(a);this.scaleX.update(a);this.scaleY.update(a);this.alpha.update(a);this.anchorX.update(a);this.anchorY.update(a)},draw:function(){},getParentSprite:function(){if(null==this.owner)return null;for(var a=this.owner.parent;null!=a;){var c=a._compMap.Sprite_2;if(null!=c)return c;a=a.parent}return null},get_pointerUp:function(){null==this._pointerUp&&(this._pointerUp=
new w);return this._pointerUp},connectHover:function(){var a=this;null==this._hoverConnection&&(this._hoverConnection=r._platform.getPointer().move.connect(function(c){for(var b=c.hit;null!=b;){if(b==a)return;b=b.getParentSprite()}null!=a._pointerOut&&0!=(a._flags&256)&&a._pointerOut.emit(c);a._flags&=-257;a._hoverConnection.dispose();a._hoverConnection=null}))},set_visible:function(a){this._flags=cc.set(this._flags,1,a);return a},set_pointerEnabled:function(a){this._flags=cc.set(this._flags,2,a);
return a},onPointerDown:function(a){this.onHover(a);null!=this._pointerDown&&this._pointerDown.emit(a)},onPointerMove:function(a){this.onHover(a);null!=this._pointerMove&&this._pointerMove.emit(a)},onHover:function(a){if(0==(this._flags&256)&&(this._flags|=256,null!=this._pointerIn||null!=this._pointerOut))null!=this._pointerIn&&this._pointerIn.emit(a),this.connectHover()},onPointerUp:function(a){switch(a.source[1]){case 1:null!=this._pointerOut&&0!=(this._flags&256)&&this._pointerOut.emit(a),this._flags&=
-257,null!=this._hoverConnection&&(this._hoverConnection.dispose(),this._hoverConnection=null)}null!=this._pointerUp&&this._pointerUp.emit(a)},__class__:m});var ba=function(a,c,b){m.call(this);this.color=a;this.width=new x(c);this.height=new x(b)};d["flambe.display.FillSprite"]=ba;ba.__name__=!0;ba.__super__=m;ba.prototype=o(m.prototype,{draw:function(a){a.fillRect(this.color,0,0,this.width._value,this.height._value)},getNaturalWidth:function(){return this.width._value},getNaturalHeight:function(){return this.height._value},
onUpdate:function(a){m.prototype.onUpdate.call(this,a);this.width.update(a);this.height.update(a)},__class__:ba});var lb=function(a){this._kernings=null;this.xOffset=this.yOffset=this.xAdvance=0;this.page=null;this.x=this.y=this.width=this.height=0;this.charCode=a};d["flambe.display.Glyph"]=lb;lb.__name__=!0;lb.prototype={draw:function(a,c,b){0<this.width&&a.drawSubTexture(this.page,c+this.xOffset,b+this.yOffset,this.x,this.y,this.width,this.height)},getKerning:function(a){return null!=this._kernings?
A["int"](this._kernings.get(a)):0},setKerning:function(a,c){null==this._kernings&&(this._kernings=new ia);this._kernings.set(a,c)},__class__:lb};var va=function(a,c){this.name=c;this._pack=a;this.reload()};d["flambe.display.Font"]=va;va.__name__=!0;va.prototype={layoutText:function(a,c,b,e,i){null==i&&(i=0);null==e&&(e=0);null==b&&(b=0);null==c&&(c=H.Left);return new wa(this,a,c,b,e,i)},reload:function(){this._glyphs=new ia;this._glyphs.set(va.NEWLINE.charCode,va.NEWLINE);for(var a=new Ea(this._pack.getFile(this.name+
".fnt").toString()),c=new ia,b=this.name.lastIndexOf("/"),b=0<=b?z.substr(this.name,0,b+1):"",e=a.keywords();e.hasNext();)switch(e.next()){case "info":for(var i=a.pairs();i.hasNext();){var l=i.next();switch(l.key){case "size":this.size=l.getInt()}}break;case "common":for(i=a.pairs();i.hasNext();)switch(l=i.next(),l.key){case "lineHeight":this.lineHeight=l.getInt()}break;case "page":for(var i=0,l=null,d=a.pairs();d.hasNext();){var f=d.next();switch(f.key){case "id":i=f.getInt();break;case "file":l=
f.getString()}}l=this._pack.getTexture(b+O.removeFileExtension(l));c.set(i,l);break;case "char":i=null;for(l=a.pairs();l.hasNext();)switch(d=l.next(),d.key){case "id":i=new lb(d.getInt());break;case "x":i.x=d.getInt();break;case "y":i.y=d.getInt();break;case "width":i.width=d.getInt();break;case "height":i.height=d.getInt();break;case "page":d=d.getInt();i.page=c.get(d);break;case "xoffset":i.xOffset=d.getInt();break;case "yoffset":i.yOffset=d.getInt();break;case "xadvance":i.xAdvance=d.getInt()}this._glyphs.set(i.charCode,
i);break;case "kerning":i=null;d=l=0;for(f=a.pairs();f.hasNext();){var h=f.next();switch(h.key){case "first":i=this._glyphs.get(h.getInt());break;case "second":l=h.getInt();break;case "amount":d=h.getInt()}}null!=i&&0!=d&&i.setKerning(l,d)}},__class__:va};var H=d["flambe.display.TextAlign"]={__ename__:!0,__constructs__:["Left","Center","Right"]};H.Left=["Left",0];H.Left.toString=f;H.Left.__enum__=H;H.Center=["Center",1];H.Center.toString=f;H.Center.__enum__=H;H.Right=["Right",2];H.Right.toString=
f;H.Right.__enum__=H;H.__empty_constructs__=[H.Left,H.Center,H.Right];var wa=function(a,c,b,e,i,l){this.lines=0;var d=this;this._font=a;this._glyphs=[];this._offsets=[];this._lineOffset=Math.round(a.lineHeight+l);this.bounds=new Fa;for(var f=[],l=c.length,h=0;h<l;){var j=h++,j=c.charCodeAt(j),j=a._glyphs.get(j);null!=j?this._glyphs.push(j):null}for(var c=-1,k=0,m=0,a=a._glyphs.get(10),l=function(){d.bounds.width=ca.max(d.bounds.width,k);d.bounds.height+=m;f[d.lines]=k;m=k=0;++d.lines},h=0;h<this._glyphs.length;){j=
this._glyphs[h];this._offsets[h]=Math.round(k);var n=0<e&&k+j.width>e;n||j==a?(n&&(0<=c?(this._glyphs[c]=a,k=this._offsets[c],h=c):this._glyphs.splice(h,0,a)),c=-1,m=this._lineOffset,l()):(32==j.charCode&&(c=h),k+=j.xAdvance+i,m=ca.max(m,j.height+j.yOffset),h+1<this._glyphs.length&&(k+=j.getKerning(this._glyphs[h+1].charCode)));++h}l();i=0;a=wa.getAlignOffset(b,f[0],e);c=1.79769313486231E308;l=-1.79769313486231E308;j=h=0;for(n=this._glyphs.length;j<n;){var o=this._glyphs[j];10==o.charCode&&(i+=this._lineOffset,
++h,a=wa.getAlignOffset(b,f[h],e));this._offsets[j]+=a;var p=i+o.yOffset;c<p||(c=p);l=ca.max(l,p+o.height);++j}this.bounds.x=wa.getAlignOffset(b,this.bounds.width,e);this.bounds.y=c;this.bounds.height=l-c};d["flambe.display.TextLayout"]=wa;wa.__name__=!0;wa.getAlignOffset=function(a,c,b){switch(a[1]){case 0:return 0;case 2:return b-c;case 1:return Math.round((b-c)/2)}};wa.prototype={draw:function(a){for(var c=0,b=0,e=this._glyphs.length;b<e;){var i=this._glyphs[b];10==i.charCode?c+=this._lineOffset:
i.draw(a,this._offsets[b],c);++b}},__class__:wa};var Ea=function(a){this._configText=a;this._keywordPattern=new pa("([A-Za-z]+)(.*)","");this._pairPattern=new pa('([A-Za-z]+)=("[^"]*"|[^\\s]+)',"")};d["flambe.display._Font.ConfigParser"]=Ea;Ea.__name__=!0;Ea.advance=function(a,c){var b=c.matchedPos();return z.substr(a,b.pos+b.len,a.length)};Ea.prototype={keywords:function(){var a=this,c=this._configText;return{next:function(){c=Ea.advance(c,a._keywordPattern);a._pairText=a._keywordPattern.matched(2);
return a._keywordPattern.matched(1)},hasNext:function(){return a._keywordPattern.match(c)}}},pairs:function(){var a=this,c=this._pairText;return{next:function(){c=Ea.advance(c,a._pairPattern);return new dc(a._pairPattern.matched(1),a._pairPattern.matched(2))},hasNext:function(){return a._pairPattern.match(c)}}},__class__:Ea};var dc=function(a,c){this.key=a;this._value=c};d["flambe.display._Font.ConfigPair"]=dc;dc.__name__=!0;dc.prototype={getInt:function(){return A.parseInt(this._value)},getString:function(){return 34!=
this._value.charCodeAt(0)?null:z.substr(this._value,1,this._value.length-2)},__class__:dc};var ec=function(){};d["flambe.display.Graphics"]=ec;ec.__name__=!0;ec.prototype={__class__:ec};var R=function(a){m.call(this);this.texture=a};d["flambe.display.ImageSprite"]=R;R.__name__=!0;R.__super__=m;R.prototype=o(m.prototype,{draw:function(a){null!=this.texture&&a.drawTexture(this.texture,0,0)},getNaturalWidth:function(){return null!=this.texture?this.texture.get_width():0},getNaturalHeight:function(){return null!=
this.texture?this.texture.get_height():0},__class__:R});var da=d["flambe.display.Orientation"]={__ename__:!0,__constructs__:["Portrait","Landscape"]};da.Portrait=["Portrait",0];da.Portrait.toString=f;da.Portrait.__enum__=da;da.Landscape=["Landscape",1];da.Landscape.toString=f;da.Landscape.__enum__=da;da.__empty_constructs__=[da.Portrait,da.Landscape];var Ga=function(a,c,b){null==b&&(b=-1);null==c&&(c=-1);m.call(this);this.texture=a;0>c&&(c=null!=a?a.get_width():0);this.width=new x(c);0>b&&(b=null!=
a?a.get_height():0);this.height=new x(b)};d["flambe.display.PatternSprite"]=Ga;Ga.__name__=!0;Ga.__super__=m;Ga.prototype=o(m.prototype,{draw:function(a){null!=this.texture&&a.drawPattern(this.texture,0,0,this.width._value,this.height._value)},getNaturalWidth:function(){return this.width._value},getNaturalHeight:function(){return this.height._value},onUpdate:function(a){m.prototype.onUpdate.call(this,a);this.width.update(a);this.height.update(a)},__class__:Ga});var mb=function(){};d["flambe.display.Texture"]=
mb;mb.__name__=!0;mb.__interfaces__=[ua];mb.prototype={__class__:mb};var zc=function(){};d["flambe.display.SubTexture"]=zc;zc.__name__=!0;zc.__interfaces__=[mb];var S=function(a,c){null==c&&(c="");this._layout=null;var b=this;m.call(this);this._font=a;this._text=c;this._align=H.Left;this._flags|=64;var e=function(){b._flags|=64};this.wrapWidth=new x(0,e);this.letterSpacing=new x(0,e);this.lineSpacing=new x(0,e)};d["flambe.display.TextSprite"]=S;S.__name__=!0;S.__super__=m;S.prototype=o(m.prototype,
{draw:function(a){this.updateLayout();this._layout.draw(a)},getNaturalWidth:function(){this.updateLayout();return 0<this.wrapWidth._value?this.wrapWidth._value:this._layout.bounds.width},getNaturalHeight:function(){this.updateLayout();var a=this._layout.lines*(this._font.lineHeight+this.lineSpacing._value),c=this._layout.bounds.height;return a>c?a:c},containsLocal:function(a,c){this.updateLayout();return this._layout.bounds.contains(a,c)},set_text:function(a){a!=this._text&&(this._text=a,this._flags|=
64);return a},set_align:function(a){a!=this._align&&(this._align=a,this._flags|=64);return a},updateLayout:function(){0!=(this._flags&64)&&(this._flags&=-65,this._layout=this._font.layoutText(this._text,this._align,this.wrapWidth._value,this.letterSpacing._value,this.lineSpacing._value))},onUpdate:function(a){m.prototype.onUpdate.call(this,a);this.wrapWidth.update(a);this.letterSpacing.update(a);this.lineSpacing.update(a)},__class__:S});var b=d["flambe.input.Key"]={__ename__:!0,__constructs__:"A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,Number0,Number1,Number2,Number3,Number4,Number5,Number6,Number7,Number8,Number9,Numpad0,Numpad1,Numpad2,Numpad3,Numpad4,Numpad5,Numpad6,Numpad7,Numpad8,Numpad9,NumpadAdd,NumpadDecimal,NumpadDivide,NumpadEnter,NumpadMultiply,NumpadSubtract,F1,F2,F3,F4,F5,F6,F7,F8,F9,F10,F11,F12,F13,F14,F15,Left,Up,Right,Down,Alt,Backquote,Backslash,Backspace,CapsLock,Comma,Command,Control,Delete,End,Enter,Equals,Escape,Home,Insert,LeftBracket,Minus,PageDown,PageUp,Period,Quote,RightBracket,Semicolon,Shift,Slash,Space,Tab,Menu,Search,Unknown".split(",")};
b.A=["A",0];b.A.toString=f;b.A.__enum__=b;b.B=["B",1];b.B.toString=f;b.B.__enum__=b;b.C=["C",2];b.C.toString=f;b.C.__enum__=b;b.D=["D",3];b.D.toString=f;b.D.__enum__=b;b.E=["E",4];b.E.toString=f;b.E.__enum__=b;b.F=["F",5];b.F.toString=f;b.F.__enum__=b;b.G=["G",6];b.G.toString=f;b.G.__enum__=b;b.H=["H",7];b.H.toString=f;b.H.__enum__=b;b.I=["I",8];b.I.toString=f;b.I.__enum__=b;b.J=["J",9];b.J.toString=f;b.J.__enum__=b;b.K=["K",10];b.K.toString=f;b.K.__enum__=b;b.L=["L",11];b.L.toString=f;b.L.__enum__=
b;b.M=["M",12];b.M.toString=f;b.M.__enum__=b;b.N=["N",13];b.N.toString=f;b.N.__enum__=b;b.O=["O",14];b.O.toString=f;b.O.__enum__=b;b.P=["P",15];b.P.toString=f;b.P.__enum__=b;b.Q=["Q",16];b.Q.toString=f;b.Q.__enum__=b;b.R=["R",17];b.R.toString=f;b.R.__enum__=b;b.S=["S",18];b.S.toString=f;b.S.__enum__=b;b.T=["T",19];b.T.toString=f;b.T.__enum__=b;b.U=["U",20];b.U.toString=f;b.U.__enum__=b;b.V=["V",21];b.V.toString=f;b.V.__enum__=b;b.W=["W",22];b.W.toString=f;b.W.__enum__=b;b.X=["X",23];b.X.toString=
f;b.X.__enum__=b;b.Y=["Y",24];b.Y.toString=f;b.Y.__enum__=b;b.Z=["Z",25];b.Z.toString=f;b.Z.__enum__=b;b.Number0=["Number0",26];b.Number0.toString=f;b.Number0.__enum__=b;b.Number1=["Number1",27];b.Number1.toString=f;b.Number1.__enum__=b;b.Number2=["Number2",28];b.Number2.toString=f;b.Number2.__enum__=b;b.Number3=["Number3",29];b.Number3.toString=f;b.Number3.__enum__=b;b.Number4=["Number4",30];b.Number4.toString=f;b.Number4.__enum__=b;b.Number5=["Number5",31];b.Number5.toString=f;b.Number5.__enum__=
b;b.Number6=["Number6",32];b.Number6.toString=f;b.Number6.__enum__=b;b.Number7=["Number7",33];b.Number7.toString=f;b.Number7.__enum__=b;b.Number8=["Number8",34];b.Number8.toString=f;b.Number8.__enum__=b;b.Number9=["Number9",35];b.Number9.toString=f;b.Number9.__enum__=b;b.Numpad0=["Numpad0",36];b.Numpad0.toString=f;b.Numpad0.__enum__=b;b.Numpad1=["Numpad1",37];b.Numpad1.toString=f;b.Numpad1.__enum__=b;b.Numpad2=["Numpad2",38];b.Numpad2.toString=f;b.Numpad2.__enum__=b;b.Numpad3=["Numpad3",39];b.Numpad3.toString=
f;b.Numpad3.__enum__=b;b.Numpad4=["Numpad4",40];b.Numpad4.toString=f;b.Numpad4.__enum__=b;b.Numpad5=["Numpad5",41];b.Numpad5.toString=f;b.Numpad5.__enum__=b;b.Numpad6=["Numpad6",42];b.Numpad6.toString=f;b.Numpad6.__enum__=b;b.Numpad7=["Numpad7",43];b.Numpad7.toString=f;b.Numpad7.__enum__=b;b.Numpad8=["Numpad8",44];b.Numpad8.toString=f;b.Numpad8.__enum__=b;b.Numpad9=["Numpad9",45];b.Numpad9.toString=f;b.Numpad9.__enum__=b;b.NumpadAdd=["NumpadAdd",46];b.NumpadAdd.toString=f;b.NumpadAdd.__enum__=b;b.NumpadDecimal=
["NumpadDecimal",47];b.NumpadDecimal.toString=f;b.NumpadDecimal.__enum__=b;b.NumpadDivide=["NumpadDivide",48];b.NumpadDivide.toString=f;b.NumpadDivide.__enum__=b;b.NumpadEnter=["NumpadEnter",49];b.NumpadEnter.toString=f;b.NumpadEnter.__enum__=b;b.NumpadMultiply=["NumpadMultiply",50];b.NumpadMultiply.toString=f;b.NumpadMultiply.__enum__=b;b.NumpadSubtract=["NumpadSubtract",51];b.NumpadSubtract.toString=f;b.NumpadSubtract.__enum__=b;b.F1=["F1",52];b.F1.toString=f;b.F1.__enum__=b;b.F2=["F2",53];b.F2.toString=
f;b.F2.__enum__=b;b.F3=["F3",54];b.F3.toString=f;b.F3.__enum__=b;b.F4=["F4",55];b.F4.toString=f;b.F4.__enum__=b;b.F5=["F5",56];b.F5.toString=f;b.F5.__enum__=b;b.F6=["F6",57];b.F6.toString=f;b.F6.__enum__=b;b.F7=["F7",58];b.F7.toString=f;b.F7.__enum__=b;b.F8=["F8",59];b.F8.toString=f;b.F8.__enum__=b;b.F9=["F9",60];b.F9.toString=f;b.F9.__enum__=b;b.F10=["F10",61];b.F10.toString=f;b.F10.__enum__=b;b.F11=["F11",62];b.F11.toString=f;b.F11.__enum__=b;b.F12=["F12",63];b.F12.toString=f;b.F12.__enum__=b;b.F13=
["F13",64];b.F13.toString=f;b.F13.__enum__=b;b.F14=["F14",65];b.F14.toString=f;b.F14.__enum__=b;b.F15=["F15",66];b.F15.toString=f;b.F15.__enum__=b;b.Left=["Left",67];b.Left.toString=f;b.Left.__enum__=b;b.Up=["Up",68];b.Up.toString=f;b.Up.__enum__=b;b.Right=["Right",69];b.Right.toString=f;b.Right.__enum__=b;b.Down=["Down",70];b.Down.toString=f;b.Down.__enum__=b;b.Alt=["Alt",71];b.Alt.toString=f;b.Alt.__enum__=b;b.Backquote=["Backquote",72];b.Backquote.toString=f;b.Backquote.__enum__=b;b.Backslash=
["Backslash",73];b.Backslash.toString=f;b.Backslash.__enum__=b;b.Backspace=["Backspace",74];b.Backspace.toString=f;b.Backspace.__enum__=b;b.CapsLock=["CapsLock",75];b.CapsLock.toString=f;b.CapsLock.__enum__=b;b.Comma=["Comma",76];b.Comma.toString=f;b.Comma.__enum__=b;b.Command=["Command",77];b.Command.toString=f;b.Command.__enum__=b;b.Control=["Control",78];b.Control.toString=f;b.Control.__enum__=b;b.Delete=["Delete",79];b.Delete.toString=f;b.Delete.__enum__=b;b.End=["End",80];b.End.toString=f;b.End.__enum__=
b;b.Enter=["Enter",81];b.Enter.toString=f;b.Enter.__enum__=b;b.Equals=["Equals",82];b.Equals.toString=f;b.Equals.__enum__=b;b.Escape=["Escape",83];b.Escape.toString=f;b.Escape.__enum__=b;b.Home=["Home",84];b.Home.toString=f;b.Home.__enum__=b;b.Insert=["Insert",85];b.Insert.toString=f;b.Insert.__enum__=b;b.LeftBracket=["LeftBracket",86];b.LeftBracket.toString=f;b.LeftBracket.__enum__=b;b.Minus=["Minus",87];b.Minus.toString=f;b.Minus.__enum__=b;b.PageDown=["PageDown",88];b.PageDown.toString=f;b.PageDown.__enum__=
b;b.PageUp=["PageUp",89];b.PageUp.toString=f;b.PageUp.__enum__=b;b.Period=["Period",90];b.Period.toString=f;b.Period.__enum__=b;b.Quote=["Quote",91];b.Quote.toString=f;b.Quote.__enum__=b;b.RightBracket=["RightBracket",92];b.RightBracket.toString=f;b.RightBracket.__enum__=b;b.Semicolon=["Semicolon",93];b.Semicolon.toString=f;b.Semicolon.__enum__=b;b.Shift=["Shift",94];b.Shift.toString=f;b.Shift.__enum__=b;b.Slash=["Slash",95];b.Slash.toString=f;b.Slash.__enum__=b;b.Space=["Space",96];b.Space.toString=
f;b.Space.__enum__=b;b.Tab=["Tab",97];b.Tab.toString=f;b.Tab.__enum__=b;b.Menu=["Menu",98];b.Menu.toString=f;b.Menu.__enum__=b;b.Search=["Search",99];b.Search.toString=f;b.Search.__enum__=b;b.Unknown=function(a){a=["Unknown",100,a];a.__enum__=b;a.toString=f;return a};b.__empty_constructs__=[b.A,b.B,b.C,b.D,b.E,b.F,b.G,b.H,b.I,b.J,b.K,b.L,b.M,b.N,b.O,b.P,b.Q,b.R,b.S,b.T,b.U,b.V,b.W,b.X,b.Y,b.Z,b.Number0,b.Number1,b.Number2,b.Number3,b.Number4,b.Number5,b.Number6,b.Number7,b.Number8,b.Number9,b.Numpad0,
b.Numpad1,b.Numpad2,b.Numpad3,b.Numpad4,b.Numpad5,b.Numpad6,b.Numpad7,b.Numpad8,b.Numpad9,b.NumpadAdd,b.NumpadDecimal,b.NumpadDivide,b.NumpadEnter,b.NumpadMultiply,b.NumpadSubtract,b.F1,b.F2,b.F3,b.F4,b.F5,b.F6,b.F7,b.F8,b.F9,b.F10,b.F11,b.F12,b.F13,b.F14,b.F15,b.Left,b.Up,b.Right,b.Down,b.Alt,b.Backquote,b.Backslash,b.Backspace,b.CapsLock,b.Comma,b.Command,b.Control,b.Delete,b.End,b.Enter,b.Equals,b.Escape,b.Home,b.Insert,b.LeftBracket,b.Minus,b.PageDown,b.PageUp,b.Period,b.Quote,b.RightBracket,
b.Semicolon,b.Shift,b.Slash,b.Space,b.Tab,b.Menu,b.Search];var fc=function(){this.init(0,null)};d["flambe.input.KeyboardEvent"]=fc;fc.__name__=!0;fc.prototype={init:function(a,c){this.id=a;this.key=c},__class__:fc};var C=d["flambe.input.MouseButton"]={__ename__:!0,__constructs__:["Left","Middle","Right","Unknown"]};C.Left=["Left",0];C.Left.toString=f;C.Left.__enum__=C;C.Middle=["Middle",1];C.Middle.toString=f;C.Middle.__enum__=C;C.Right=["Right",2];C.Right.toString=f;C.Right.__enum__=C;C.Unknown=
function(a){a=["Unknown",3,a];a.__enum__=C;a.toString=f;return a};C.__empty_constructs__=[C.Left,C.Middle,C.Right];var P=d["flambe.input.MouseCursor"]={__ename__:!0,__constructs__:["Default","Button","None"]};P.Default=["Default",0];P.Default.toString=f;P.Default.__enum__=P;P.Button=["Button",1];P.Button.toString=f;P.Button.__enum__=P;P.None=["None",2];P.None.toString=f;P.None.__enum__=P;P.__empty_constructs__=[P.Default,P.Button,P.None];var gc=function(){this.init(0,0,0,null)};d["flambe.input.MouseEvent"]=
gc;gc.__name__=!0;gc.prototype={init:function(a,c,b,e){this.id=a;this.viewX=c;this.viewY=b;this.button=e},__class__:gc};var Pa=d["flambe.input.EventSource"]={__ename__:!0,__constructs__:["Mouse","Touch"]};Pa.Mouse=function(a){a=["Mouse",0,a];a.__enum__=Pa;a.toString=f;return a};Pa.Touch=function(a){a=["Touch",1,a];a.__enum__=Pa;a.toString=f;return a};Pa.__empty_constructs__=[];var hc=function(){this.init(0,0,0,null,null)};d["flambe.input.PointerEvent"]=hc;hc.__name__=!0;hc.prototype={init:function(a,
c,b,e,i){this.id=a;this.viewX=c;this.viewY=b;this.hit=e;this.source=i;this._stopped=!1},__class__:hc};var ic=function(a){this.id=a;this._source=Pa.Touch(this)};d["flambe.input.TouchPoint"]=ic;ic.__name__=!0;ic.prototype={init:function(a,c){this.viewX=a;this.viewY=c},__class__:ic};var ca=function(){};d["flambe.math.FMath"]=ca;ca.__name__=!0;ca.max=function(a,c){return a>c?a:c};ca.min=function(a,c){return a<c?a:c};var ha=function(){this.identity()};d["flambe.math.Matrix"]=ha;ha.__name__=!0;ha.multiply=
function(a,c,b){null==b&&(b=new ha);var e=a.m00*c.m00+a.m01*c.m10,i=a.m00*c.m01+a.m01*c.m11,l=a.m00*c.m02+a.m01*c.m12+a.m02;b.m00=e;b.m01=i;b.m02=l;e=a.m10*c.m00+a.m11*c.m10;i=a.m10*c.m01+a.m11*c.m11;l=a.m10*c.m02+a.m11*c.m12+a.m12;b.m10=e;b.m11=i;b.m12=l;return b};ha.prototype={set:function(a,c,b,e,i,l){this.m00=a;this.m01=b;this.m02=i;this.m10=c;this.m11=e;this.m12=l},identity:function(){this.set(1,0,0,1,0,0)},compose:function(a,c,b,e,i){var l=Math.sin(i),i=Math.cos(i);this.set(i*b,l*b,-l*e,i*e,
a,c)},translate:function(a,c){this.m02+=this.m00*a+this.m01*c;this.m12+=this.m11*c+this.m10*a},invert:function(){var a=this.determinant();if(0==a)return!1;this.set(this.m11/a,-this.m01/a,-this.m10/a,this.m00/a,(this.m01*this.m12-this.m11*this.m02)/a,(this.m10*this.m02-this.m00*this.m12)/a);return!0},transformArray:function(a,c,b){for(var e=0;e<c;){var i=a[e],l=a[e+1];b[e++]=i*this.m00+l*this.m01+this.m02;b[e++]=i*this.m10+l*this.m11+this.m12}},determinant:function(){return this.m00*this.m11-this.m01*
this.m10},inverseTransform:function(a,c,b){var e=this.determinant();if(0==e)return!1;a-=this.m02;c-=this.m12;b.x=(a*this.m11-c*this.m01)/e;b.y=(c*this.m00-a*this.m10)/e;return!0},clone:function(a){null==a&&(a=new ha);a.set(this.m00,this.m10,this.m01,this.m11,this.m02,this.m12);return a},__class__:ha};var Fa=function(a,c,b,e){null==e&&(e=0);null==b&&(b=0);null==c&&(c=0);null==a&&(a=0);this.set(a,c,b,e)};d["flambe.math.Rectangle"]=Fa;Fa.__name__=!0;Fa.prototype={set:function(a,c,b,e){this.x=a;this.y=
c;this.width=b;this.height=e},contains:function(a,c){a-=this.x;if(0<=this.width){if(0>a||a>this.width)return!1}else if(0<a||a<this.width)return!1;c-=this.y;if(0<=this.height){if(0>c||c>this.height)return!1}else if(0<c||c<this.height)return!1;return!0},clone:function(a){null==a&&(a=new Fa);a.set(this.x,this.y,this.width,this.height);return a},equals:function(a){return this.x==a.x&&this.y==a.y&&this.width==a.width&&this.height==a.height},__class__:Fa};var I=function(){this._disposed=!1};d["flambe.platform.BasicAsset"]=
I;I.__name__=!0;I.__interfaces__=[ua];I.prototype={dispose:function(){this._disposed||(this._disposed=!0,this.onDisposed())},onDisposed:function(){null},__class__:I};var xa=function(a,c){var b=this;this.manifest=c;this._platform=a;this.promise=new nb;this._bytesLoaded=new ja;this._pack=new ob(c,this);var e=bb.array(c);if(0==e.length)this.handleSuccess();else{for(var i=new ja,l=0;l<e.length;){var d=e[l];++l;var f=i.get(d.name);null==f&&(f=[],i.set(d.name,f));f.push(d)}this._assetsRemaining=bb.count(i);
for(e=i.iterator();e.hasNext();)i=[e.next()],this.pickBestEntry(i[0],function(a){return function(e){if(null!=e){var i=c.getFullURL(e);try{b.loadEntry(i,e)}catch(l){b.handleError(e,"Unexpected error: "+A.string(l))}i=b.promise;i.set_total(i._total+e.bytes)}else e=a[0][0],xa.isAudio(e.format)?b.handleLoad(e,Y.getInstance()):b.handleError(e,"Could not find a supported format to load")}}(i))}};d["flambe.platform.BasicAssetPackLoader"]=xa;xa.__name__=!0;xa.isAudio=function(a){switch(a[1]){case 8:case 9:case 10:case 11:case 12:return!0;
default:return!1}};xa.prototype={onDisposed:function(){},pickBestEntry:function(a,c){this.getAssetFormats(function(b){for(var e=0;e<b.length;){var i=b[e];++e;for(var l=0;l<a.length;){var d=a[l];++l;if(d.format==i){c(d);return}}}c(null)})},loadEntry:function(){null},getAssetFormats:function(){null},handleLoad:function(a,c){if(!this._pack.disposed){this.handleProgress(a,a.bytes);var b;switch(a.format[1]){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:b=this._pack.textures;break;case 8:case 9:case 10:case 11:case 12:b=
this._pack.sounds;break;case 13:b=this._pack.files}b.set(a.name,c);this._assetsRemaining-=1;0==this._assetsRemaining&&this.handleSuccess()}},handleProgress:function(a,c){this._bytesLoaded.set(a.name,c);for(var b=0,e=this._bytesLoaded.iterator();e.hasNext();)var i=e.next(),b=b+i;this.promise.set_progress(b)},handleSuccess:function(){this.promise.set_result(this._pack)},handleError:function(a,c){this.promise.error.emit(O.withFields(c,["url",a.url]))},handleTextureError:function(a){this.handleError(a,
"Failed to create texture. Is the GPU context unavailable?")},__class__:xa};var ob=function(a,c){this.disposed=!1;this._manifest=a;this.loader=c;this.textures=new ja;this.sounds=new ja;this.files=new ja};d["flambe.platform._BasicAssetPackLoader.BasicAssetPack"]=ob;ob.__name__=!0;ob.__interfaces__=[jb];ob.prototype={getTexture:function(a,c){null==c&&(c=!0);var b=this.textures.get(a);if(null==b&&c)throw O.withFields("Missing texture",["name",a]);return b},getSound:function(a,c){null==c&&(c=!0);var b=
this.sounds.get(a);if(null==b&&c)throw O.withFields("Missing sound",["name",a]);return b},getFile:function(a,c){null==c&&(c=!0);var b=this.files.get(a);if(null==b&&c)throw O.withFields("Missing file",["name",a]);return b},dispose:function(){if(!this.disposed){this.disposed=!0;for(var a=this.textures.iterator();a.hasNext();)a.next().dispose();this.textures=null;for(a=this.sounds.iterator();a.hasNext();)a.next().dispose();this.sounds=null;for(a=this.files.iterator();a.hasNext();)a.next().dispose();
this.files=null;this.loader.onDisposed()}},__class__:ob};var Qa=function(a){this._disposed=!1;this._content=a};d["flambe.platform.BasicFile"]=Qa;Qa.__name__=!0;Qa.__interfaces__=[kb];Qa.__super__=I;Qa.prototype=o(I.prototype,{toString:function(){return this._content},onDisposed:function(){this._content=null},__class__:Qa});var jc=function(){};d["flambe.subsystem.KeyboardSystem"]=jc;jc.__name__=!0;jc.prototype={__class__:jc};var $=function(){this.down=new w;this.up=new w;this.backButton=new ka;this._keyStates=
new ia};d["flambe.platform.BasicKeyboard"]=$;$.__name__=!0;$.__interfaces__=[jc];$.prototype={submitDown:function(a){if(16777238==a)return null!=this.backButton._head?(this.backButton.emit(),!0):!1;this._keyStates.exists(a)||(this._keyStates.set(a,!0),$._sharedEvent.init($._sharedEvent.id+1,kc.toKey(a)),this.down.emit($._sharedEvent));return!0},submitUp:function(a){this._keyStates.exists(a)&&(this._keyStates.remove(a),$._sharedEvent.init($._sharedEvent.id+1,kc.toKey(a)),this.up.emit($._sharedEvent))},
__class__:$};var Fc=function(){};d["flambe.subsystem.MouseSystem"]=Fc;Fc.__name__=!0;var W=function(a){this._pointer=a;this._source=Pa.Mouse(W._sharedEvent);this.down=new w;this.move=new w;this.up=new w;this.scroll=new w;this._y=this._x=0;this._cursor=P.Default;this._buttonStates=new ia};d["flambe.platform.BasicMouse"]=W;W.__name__=!0;W.__interfaces__=[Fc];W.prototype={submitDown:function(a,c,b){this._buttonStates.exists(b)||(this._buttonStates.set(b,!0),this.prepare(a,c,lc.toButton(b)),this._pointer.submitDown(a,
c,this._source),this.down.emit(W._sharedEvent))},submitMove:function(a,c){this.prepare(a,c,null);this._pointer.submitMove(a,c,this._source);this.move.emit(W._sharedEvent)},submitUp:function(a,c,b){this._buttonStates.exists(b)&&(this._buttonStates.remove(b),this.prepare(a,c,lc.toButton(b)),this._pointer.submitUp(a,c,this._source),this.up.emit(W._sharedEvent))},submitScroll:function(a,c,b){this._x=a;this._y=c;if(null==this.scroll._head)return!1;this.scroll.emit(b);return!0},prepare:function(a,c,b){this._x=
a;this._y=c;W._sharedEvent.init(W._sharedEvent.id+1,a,c,b)},__class__:W};var mc=function(){};d["flambe.subsystem.PointerSystem"]=mc;mc.__name__=!0;mc.prototype={__class__:mc};var L=function(a,c,b){null==b&&(b=!1);null==c&&(c=0);null==a&&(a=0);this.down=new w;this.move=new w;this.up=new w;this._x=a;this._y=c;this._isDown=b};d["flambe.platform.BasicPointer"]=L;L.__name__=!0;L.__interfaces__=[mc];L.prototype={submitDown:function(a,c,b){if(!this._isDown){this.submitMove(a,c,b);this._isDown=!0;var e=[],
i=m.hitTest(r.root,a,c);if(null!=i){var l=i.owner;do{var d=l._compMap.Sprite_2;null!=d&&e.push(d);l=l.parent}while(null!=l)}this.prepare(a,c,i,b);for(a=0;a<e.length;)if(c=e[a],++a,c.onPointerDown(L._sharedEvent),L._sharedEvent._stopped)return;this.down.emit(L._sharedEvent)}},submitMove:function(a,c,b){if(!(a==this._x&&c==this._y)){var e=[],i=m.hitTest(r.root,a,c);if(null!=i){var d=i.owner;do{var f=d._compMap.Sprite_2;null!=f&&e.push(f);d=d.parent}while(null!=d)}this.prepare(a,c,i,b);for(a=0;a<e.length;)if(c=
e[a],++a,c.onPointerMove(L._sharedEvent),L._sharedEvent._stopped)return;this.move.emit(L._sharedEvent)}},submitUp:function(a,c,b){if(this._isDown){this.submitMove(a,c,b);this._isDown=!1;var e=[],i=m.hitTest(r.root,a,c);if(null!=i){var d=i.owner;do{var f=d._compMap.Sprite_2;null!=f&&e.push(f);d=d.parent}while(null!=d)}this.prepare(a,c,i,b);for(a=0;a<e.length;)if(c=e[a],++a,c.onPointerUp(L._sharedEvent),L._sharedEvent._stopped)return;this.up.emit(L._sharedEvent)}},prepare:function(a,c,b,e){this._x=
a;this._y=c;L._sharedEvent.init(L._sharedEvent.id+1,a,c,b,e)},__class__:L};var la=function(a,c,b){this._parent=null;this.rootX=this.rootY=0;this._disposed=!1;this.root=a;this._width=c;this._height=b};d["flambe.platform.BasicTexture"]=la;la.__name__=!0;la.__interfaces__=[zc];la.__super__=I;la.prototype=o(I.prototype,{onDisposed:function(){null==this._parent&&this.root.dispose()},get_width:function(){return this._width},get_height:function(){return this._height},__class__:la});var Ac=function(){};d["flambe.subsystem.TouchSystem"]=
Ac;Ac.__name__=!0;var fb=function(a,c){null==c&&(c=4);this._pointer=a;this._maxPoints=c;this._pointMap=new ia;this._points=[];this.down=new w;this.move=new w;this.up=new w};d["flambe.platform.BasicTouch"]=fb;fb.__name__=!0;fb.__interfaces__=[Ac];fb.prototype={submitDown:function(a,c,b){if(!this._pointMap.exists(a)){var e=new ic(a);e.init(c,b);this._pointMap.set(a,e);this._points.push(e);null==this._pointerTouch&&(this._pointerTouch=e,this._pointer.submitDown(c,b,e._source));this.down.emit(e)}},submitMove:function(a,
c,b){a=this._pointMap.get(a);null!=a&&(a.init(c,b),this._pointerTouch==a&&this._pointer.submitMove(c,b,a._source),this.move.emit(a))},submitUp:function(a,c,b){var e=this._pointMap.get(a);null!=e&&(e.init(c,b),this._pointMap.remove(a),z.remove(this._points,e),this._pointerTouch==e&&(this._pointerTouch=null,this._pointer.submitUp(c,b,e._source)),this.up.emit(e))},__class__:fb};var Ha=function(){};d["flambe.sound.Sound"]=Ha;Ha.__name__=!0;Ha.__interfaces__=[ua];Ha.prototype={__class__:Ha};var Y=function(){this._disposed=
!1;this._playback=new pb(this)};d["flambe.platform.DummySound"]=Y;Y.__name__=!0;Y.__interfaces__=[Ha];Y.getInstance=function(){null==Y._instance&&(Y._instance=new Y);return Y._instance};Y.__super__=I;Y.prototype=o(I.prototype,{play:function(){return this._playback},loop:function(){return this._playback},onDisposed:function(){},__class__:Y});var Ia=function(){};d["flambe.sound.Playback"]=Ia;Ia.__name__=!0;Ia.__interfaces__=[ga];Ia.prototype={__class__:Ia};var pb=function(a){this._sound=a;this.volume=
new x(0);this._complete=new N(!0)};d["flambe.platform.DummyPlayback"]=pb;pb.__name__=!0;pb.__interfaces__=[Ia];pb.prototype={get_sound:function(){return this._sound},dispose:function(){},__class__:pb};var gb=function(){this.down=new w;this.move=new w;this.up=new w};d["flambe.platform.DummyTouch"]=gb;gb.__name__=!0;gb.__interfaces__=[Ac];gb.prototype={__class__:gb};var Ra=function(){this._entries=[]};d["flambe.platform.EventGroup"]=Ra;Ra.__name__=!0;Ra.__interfaces__=[ga];Ra.prototype={addListener:function(a,
c,b){a.addEventListener(c,b,!1);this._entries.push(new nc(a,c,b))},addDisposingListener:function(a,c,b){var e=this;this.addListener(a,c,function(a){e.dispose();b(a)})},dispose:function(){for(var a=0,c=this._entries;a<c.length;){var b=c[a];++a;b.dispatcher.removeEventListener(b.type,b.listener,!1)}this._entries=[]},__class__:Ra};var nc=function(a,c,b){this.dispatcher=a;this.type=c;this.listener=b};d["flambe.platform._EventGroup.Entry"]=nc;nc.__name__=!0;nc.prototype={__class__:nc};var Sa=function(){};
d["flambe.platform.InternalGraphics"]=Sa;Sa.__name__=!0;Sa.__interfaces__=[ec];Sa.prototype={__class__:Sa};var oc=function(){};d["flambe.subsystem.RendererSystem"]=oc;oc.__name__=!0;oc.prototype={__class__:oc};var Ta=function(){};d["flambe.platform.InternalRenderer"]=Ta;Ta.__name__=!0;Ta.__interfaces__=[oc];Ta.prototype={__class__:Ta};var kc=function(){};d["flambe.platform.KeyCodes"]=kc;kc.__name__=!0;kc.toKey=function(a){switch(a){case 65:return b.A;case 66:return b.B;case 67:return b.C;case 68:return b.D;
case 69:return b.E;case 70:return b.F;case 71:return b.G;case 72:return b.H;case 73:return b.I;case 74:return b.J;case 75:return b.K;case 76:return b.L;case 77:return b.M;case 78:return b.N;case 79:return b.O;case 80:return b.P;case 81:return b.Q;case 82:return b.R;case 83:return b.S;case 84:return b.T;case 85:return b.U;case 86:return b.V;case 87:return b.W;case 88:return b.X;case 89:return b.Y;case 90:return b.Z;case 48:return b.Number0;case 49:return b.Number1;case 50:return b.Number2;case 51:return b.Number3;
case 52:return b.Number4;case 53:return b.Number5;case 54:return b.Number6;case 55:return b.Number7;case 56:return b.Number8;case 57:return b.Number9;case 96:return b.Numpad0;case 97:return b.Numpad1;case 98:return b.Numpad2;case 99:return b.Numpad3;case 100:return b.Numpad4;case 101:return b.Numpad5;case 102:return b.Numpad6;case 103:return b.Numpad7;case 104:return b.Numpad8;case 105:return b.Numpad9;case 107:return b.NumpadAdd;case 110:return b.NumpadDecimal;case 111:return b.NumpadDivide;case 108:return b.NumpadEnter;
case 106:return b.NumpadMultiply;case 109:return b.NumpadSubtract;case 112:return b.F1;case 113:return b.F2;case 114:return b.F3;case 115:return b.F4;case 116:return b.F5;case 117:return b.F6;case 118:return b.F7;case 119:return b.F8;case 120:return b.F9;case 121:return b.F10;case 122:return b.F11;case 123:return b.F12;case 37:return b.Left;case 38:return b.Up;case 39:return b.Right;case 40:return b.Down;case 18:return b.Alt;case 192:return b.Backquote;case 220:return b.Backslash;case 8:return b.Backspace;
case 20:return b.CapsLock;case 188:return b.Comma;case 15:return b.Command;case 17:return b.Control;case 46:return b.Delete;case 35:return b.End;case 13:return b.Enter;case 187:return b.Equals;case 27:return b.Escape;case 36:return b.Home;case 45:return b.Insert;case 219:return b.LeftBracket;case 189:return b.Minus;case 34:return b.PageDown;case 33:return b.PageUp;case 190:return b.Period;case 222:return b.Quote;case 221:return b.RightBracket;case 186:return b.Semicolon;case 16:return b.Shift;case 191:return b.Slash;
case 32:return b.Space;case 9:return b.Tab;case 16777234:return b.Menu;case 16777247:return b.Search}return b.Unknown(a)};var Ba=function(){this._tickables=[]};d["flambe.platform.MainLoop"]=Ba;Ba.__name__=!0;Ba.updateEntity=function(a,c){var b=a._compMap.SpeedAdjuster_14;if(null!=b&&(b._realDt=c,c*=b.scale._value,0>=c)){b.onUpdate(c);return}for(b=a.firstComponent;null!=b;){var e=b.next;b.onUpdate(c);b=e}for(b=a.firstChild;null!=b;)e=b.next,Ba.updateEntity(b,c),b=e};Ba.prototype={update:function(a){if(!(0>=
a)){1<a&&(a=1);for(var c=0;c<this._tickables.length;){var b=this._tickables[c];null==b||b.update(a)?this._tickables.splice(c,1):++c}r.volume.update(a);Ba.updateEntity(r.root,a)}},render:function(a){var c=a.graphics;null!=c&&(a.willRender(),m.render(r.root,c),a.didRender())},addTickable:function(a){this._tickables.push(a)},__class__:Ba};var pc=function(){};d["flambe.platform.MathUtil"]=pc;pc.__name__=!0;pc.nextPowerOfTwo=function(a){for(var c=1;c<a;)c<<=1;return c};var lc=function(){};d["flambe.platform.MouseCodes"]=
lc;lc.__name__=!0;lc.toButton=function(a){switch(a){case 0:return C.Left;case 1:return C.Middle;case 2:return C.Right}return C.Unknown(a)};var Bc=function(){};d["flambe.platform.TextureRoot"]=Bc;Bc.__name__=!0;var qb=function(){};d["flambe.platform.Tickable"]=qb;qb.__name__=!0;qb.prototype={__class__:qb};var rb=function(a){this._firstDraw=!1;this._canvasCtx=a.getContext("2d")};d["flambe.platform.html.CanvasGraphics"]=rb;rb.__name__=!0;rb.__interfaces__=[Sa];rb.prototype={save:function(){this._canvasCtx.save()},
transform:function(a,c,b,e,i,d){this._canvasCtx.transform(a,c,b,e,i,d)},restore:function(){this._canvasCtx.restore()},drawTexture:function(a,c,b){this.drawSubTexture(a,c,b,0,0,a.get_width(),a.get_height())},drawSubTexture:function(a,c,b,e,i,d,f){this._firstDraw?(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.drawSubTexture(a,c,b,e,i,d,f),this._canvasCtx.globalCompositeOperation="source-over"):this._canvasCtx.drawImage(a.root.image,a.rootX+e|0,a.rootY+i|0,d|0,f|0,c|0,b|0,d|
0,f|0)},drawPattern:function(a,c,b,e,i){this._firstDraw?(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.drawPattern(a,c,b,e,i),this._canvasCtx.globalCompositeOperation="source-over"):(this._canvasCtx.fillStyle=a.getPattern(),this._canvasCtx.fillRect(c|0,b|0,e|0,i|0))},fillRect:function(a,c,b,e,i){if(this._firstDraw)this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.fillRect(a,c,b,e,i),this._canvasCtx.globalCompositeOperation="source-over";else{for(a=(16777215&
a).toString(16);6>a.length;)a="0"+A.string(a);this._canvasCtx.fillStyle="#"+A.string(a);this._canvasCtx.fillRect(c|0,b|0,e|0,i|0)}},multiplyAlpha:function(a){this._canvasCtx.globalAlpha*=a},setBlendMode:function(a){var c;switch(a[1]){case 0:c="source-over";break;case 1:c="lighter";break;case 2:c="destination-in";break;case 3:c="copy"}this._canvasCtx.globalCompositeOperation=c},applyScissor:function(a,c,b,e){this._canvasCtx.beginPath();this._canvasCtx.rect(a|0,c|0,b|0,e|0);this._canvasCtx.clip()},
willRender:function(){this._firstDraw=!0},didRender:function(){},onResize:function(){},__class__:rb};var Ca=function(a){this.graphics=new rb(a);this._hasGPU=new N(!0)};d["flambe.platform.html.CanvasRenderer"]=Ca;Ca.__name__=!0;Ca.__interfaces__=[Ta];Ca.prototype={get_type:function(){return M.Canvas},createTextureFromImage:function(a){a=new Ua(Ca.CANVAS_TEXTURES?q.createCanvas(a):a);return a.createTexture(a.width,a.height)},getCompressedTextureFormats:function(){return[]},createCompressedTexture:function(){return null},
willRender:function(){this.graphics.willRender()},didRender:function(){this.graphics.didRender()},__class__:Ca};var sb=function(a,c,b){this._rootUpdateCount=0;this._pattern=null;la.call(this,a,c,b)};d["flambe.platform.html.CanvasTexture"]=sb;sb.__name__=!0;sb.__super__=la;sb.prototype=o(la.prototype,{getPattern:function(){if(this._rootUpdateCount!=this.root.updateCount||null==this._pattern)this._rootUpdateCount=this.root.updateCount,this._pattern=this.root.createPattern(this.rootX,this.rootY,this._width,
this._height);return this._pattern},__class__:sb});var Ua=function(a){this._graphics=null;this.updateCount=0;this._disposed=!1;this.image=a;this.width=a.width;this.height=a.height};d["flambe.platform.html.CanvasTextureRoot"]=Ua;Ua.__name__=!0;Ua.__interfaces__=[Bc];Ua.__super__=I;Ua.prototype=o(I.prototype,{createTexture:function(a,c){return new sb(this,a,c)},createPattern:function(a,c,b,e){var i=this.getContext2d(),d=this.image;if(0!=a||0!=c||b!=this.width||e!=this.height)d=q.createEmptyCanvas(b,
e),b=d.getContext("2d"),b.globalCompositeOperation="copy",b.drawImage(this.image,-a,-c);return i.createPattern(d,"repeat")},getContext2d:function(){v.__instanceof(this.image,HTMLCanvasElement)||(this.image=q.createCanvas(this.image));return this.image.getContext("2d")},onDisposed:function(){this._graphics=this.image=null},__class__:Ua});var t=function(a,c){xa.call(this,a,c)};d["flambe.platform.html.HtmlAssetPackLoader"]=t;t.__name__=!0;t.detectImageFormats=function(a){var c=[h.PNG,h.JPG,h.GIF],b=
2,e;e=window.document.createElement("img");e.onload=e.onerror=function(){1==e.width&&c.unshift(h.WEBP);--b;0==b&&a(c)};e.src="data:image/webp;base64,UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==";var i;i=window.document.createElement("img");i.onload=i.onerror=function(){1==i.width&&c.unshift(h.JXR);--b;0==b&&a(c)};i.src="data:image/vnd.ms-photo;base64,SUm8AQgAAAAFAAG8AQAQAAAASgAAAIC8BAABAAAAAQAAAIG8BAABAAAAAQAAAMC8BAABAAAAWgAAAMG8BAABAAAAHwAAAAAAAAAkw91vA07+S7GFPXd2jckNV01QSE9UTwAZAYBxAAAAABP/gAAEb/8AAQAAAQAAAA=="};
t.detectAudioFormats=function(){var a;a=window.document.createElement("audio");if(null==a||null==Q(a,a.canPlayType))return[];var c=new pa("\\b(iPhone|iPod|iPad|Android|Windows Phone)\\b",""),b=window.navigator.userAgent;if(!u.get_supported()&&c.match(b))return[];for(var c=[{format:h.M4A,mimeType:"audio/mp4; codecs=mp4a"},{format:h.MP3,mimeType:"audio/mpeg"},{format:h.OPUS,mimeType:"audio/ogg; codecs=opus"},{format:h.OGG,mimeType:"audio/ogg; codecs=vorbis"},{format:h.WAV,mimeType:"audio/wav"}],b=[],
e=0;e<c.length;){var i=c[e];++e;var d="";try{d=a.canPlayType(i.mimeType)}catch(f){}""!=d&&b.push(i.format)}return b};t.supportsBlob=function(){if(t._detectBlobSupport){t._detectBlobSupport=!1;if((new pa("\\bSilk\\b","")).match(window.navigator.userAgent)||null==window.Blob)return!1;var a=new XMLHttpRequest;a.open("GET",".",!0);if(""!=a.responseType)return!1;a.responseType="blob";if("blob"!=a.responseType)return!1;t._URL=q.loadExtension("URL").value}return null!=t._URL&&null!=t._URL.createObjectURL};
t.__super__=xa;t.prototype=o(xa.prototype,{loadEntry:function(a,c){var b=this;switch(c.format[1]){case 0:case 1:case 2:case 3:case 4:var e;e=window.document.createElement("img");var i=new Ra;i.addDisposingListener(e,"load",function(){t.supportsBlob()&&t._URL.revokeObjectURL(e.src);var a=b._platform.getRenderer().createTextureFromImage(e);null!=a?b.handleLoad(c,a):b.handleTextureError(c)});i.addDisposingListener(e,"error",function(){b.handleError(c,"Failed to load image")});t.supportsBlob()?this.download(a,
c,"blob",function(a){e.src=t._URL.createObjectURL(a)}):e.src=a;break;case 5:case 6:case 7:this.download(a,c,"arraybuffer",function(){var a=b._platform.getRenderer().createCompressedTexture(c.format,null);null!=a?b.handleLoad(c,a):b.handleTextureError(c)});break;case 8:case 9:case 10:case 11:case 12:if(u.get_supported())this.download(a,c,"arraybuffer",function(a){u.ctx.decodeAudioData(a,function(a){b.handleLoad(c,new u(a))},function(){b.handleLoad(c,Y.getInstance())})});else{var d;d=window.document.createElement("audio");
d.preload="auto";var f=++t._mediaRefCount;null==t._mediaElements&&(t._mediaElements=new ia);t._mediaElements.set(f,d);i=new Ra;i.addDisposingListener(d,"canplaythrough",function(){t._mediaElements.remove(f);b.handleLoad(c,new Va(d))});i.addDisposingListener(d,"error",function(){t._mediaElements.remove(f);var a=d.error.code;3==a||4==a?b.handleLoad(c,Y.getInstance()):b.handleError(c,"Failed to load audio: "+d.error.code)});i.addListener(d,"progress",function(){if(0<d.buffered.length&&0<d.duration){var a=
d.buffered.end(0)/d.duration;b.handleProgress(c,a*c.bytes|0)}});d.src=a;d.load()}break;case 13:this.download(a,c,"text",function(a){b.handleLoad(c,new Qa(a))})}},getAssetFormats:function(a){var c=this;null==t._supportedFormats&&(t._supportedFormats=new nb,t.detectImageFormats(function(a){t._supportedFormats.set_result(c._platform.getRenderer().getCompressedTextureFormats().concat(a).concat(t.detectAudioFormats()).concat([h.Data]))}));t._supportedFormats.get(a)},download:function(a,c,b,e){var d=this,
l=null,f=null,h=0,j=!1,k=function(){j&&(j=!1,window.clearInterval(h))},m=3,n=function(){--m;return 0<=m?(f(),!0):!1},f=function(){k();null!=l&&l.abort();l=new XMLHttpRequest;l.open("GET",a,!0);l.responseType=b;var f=0;l.onprogress=function(a){j||(j=!0,h=window.setInterval(function(){4!=l.readyState&&5E3<Date.now()-f&&!n()&&(k(),d.handleError(c,"Download stalled"))},1E3));f=Date.now();d.handleProgress(c,a.loaded)};l.onerror=function(){if(0!=l.status||!n())k(),d.handleError(c,"HTTP error "+l.status)};
l.onload=function(){var a=l.response;null==a&&(a=l.responseText);k();e(a)};l.send()};f()},__class__:t});var eb=function(a,c){W.call(this,a);this._canvas=c};d["flambe.platform.html.HtmlMouse"]=eb;eb.__name__=!0;eb.__super__=W;eb.prototype=o(W.prototype,{__class__:eb});var Va=function(a){this._disposed=!1;this.audioElement=a};d["flambe.platform.html.HtmlSound"]=Va;Va.__name__=!0;Va.__interfaces__=[Ha];Va.__super__=I;Va.prototype=o(I.prototype,{play:function(a){null==a&&(a=1);return new Wa(this,a,!1)},
loop:function(a){null==a&&(a=1);return new Wa(this,a,!0)},onDisposed:function(){this.audioElement=null},__class__:Va});var Wa=function(a,c,b){var e=this;this._sound=a;this._tickableAdded=!1;this._clonedElement=window.document.createElement("audio");this._clonedElement.loop=b;this._clonedElement.src=a.audioElement.src;this.volume=new x(c,function(){e.updateVolume()});this.updateVolume();this._complete=new N(!1);this.playAudio();r.hidden._value&&this.set_paused(!0)};d["flambe.platform.html._HtmlSound.HtmlPlayback"]=
Wa;Wa.__name__=!0;Wa.__interfaces__=[qb,Ia];Wa.prototype={get_sound:function(){return this._sound},set_paused:function(a){this._clonedElement.paused!=a&&(a?this._clonedElement.pause():this.playAudio());return a},update:function(a){this.volume.update(a);this._complete.set__(this._clonedElement.ended);return this._complete._value||this._clonedElement.paused?(this._tickableAdded=!1,this._volumeBinding.dispose(),this._hideBinding.dispose(),!0):!1},dispose:function(){this.set_paused(!0);this._complete.set__(!0)},
playAudio:function(){var a=this;this._clonedElement.play();this._tickableAdded||(qa.instance.mainLoop.addTickable(this),this._tickableAdded=!0,this._volumeBinding=r.volume.get_changed().connect(function(){a.updateVolume()}),this._hideBinding=r.hidden.get_changed().connect(function(c){c?(a._wasPaused=a._clonedElement.paused,a.set_paused(!0)):a.set_paused(a._wasPaused)}))},updateVolume:function(){this._clonedElement.volume=r.volume._value*this.volume._value},__class__:Wa};var qc=function(){};d["flambe.subsystem.StageSystem"]=
qc;qc.__name__=!0;qc.prototype={__class__:qc};var Aa=function(a){var c=this;this._canvas=a;this.resize=new ka;this.scaleFactor=Aa.computeScaleFactor();1!=this.scaleFactor&&(q.setVendorStyle(this._canvas,"transform-origin","top left"),q.setVendorStyle(this._canvas,"transform","scale("+1/this.scaleFactor+")"));q.SHOULD_HIDE_MOBILE_BROWSER&&(window.addEventListener("orientationchange",function(){q.callLater(Q(c,c.hideMobileBrowser),200)},!1),this.hideMobileBrowser());window.addEventListener("resize",
Q(this,this.onWindowResize),!1);this.onWindowResize(null);this.orientation=new N(null);null!=window.orientation&&(window.addEventListener("orientationchange",Q(this,this.onOrientationChange),!1),this.onOrientationChange(null));this.fullscreen=new N(!1);q.addVendorListener(window.document,"fullscreenchange",function(){c.updateFullscreen()},!1);this.updateFullscreen()};d["flambe.platform.html.HtmlStage"]=Aa;Aa.__name__=!0;Aa.__interfaces__=[qc];Aa.computeScaleFactor=function(){var a=window.devicePixelRatio;
null==a&&(a=1);var c=window.document.createElement("canvas").getContext("2d"),c=q.loadExtension("backingStorePixelRatio",c).value;null==c&&(c=1);a/=c;c=window.screen.height;return 1136<a*window.screen.width||1136<a*c?1:a};Aa.prototype={get_width:function(){return this._canvas.width},get_height:function(){return this._canvas.height},onWindowResize:function(){var a=this._canvas.parentElement.getBoundingClientRect();this.resizeCanvas(a.width,a.height)},resizeCanvas:function(a,c){var b=this.scaleFactor*
a,e=this.scaleFactor*c;if(this._canvas.width==b&&this._canvas.height==e)return!1;this._canvas.width=b|0;this._canvas.height=e|0;this.resize.emit();return!0},hideMobileBrowser:function(){var a=this,c=window.document.documentElement.style;c.height=window.innerHeight+100+"px";c.width=window.innerWidth+"px";c.overflow="visible";q.callLater(function(){q.hideMobileBrowser();q.callLater(function(){c.height=window.innerHeight+"px";a.onWindowResize(null)},100)})},onOrientationChange:function(){this.orientation.set__(q.orientation(window.orientation))},
updateFullscreen:function(){this.fullscreen.set__(!0==q.loadFirstExtension(["fullscreen","fullScreen","isFullScreen"],window.document).value)},__class__:Aa};var q=function(){};d["flambe.platform.html.HtmlUtil"]=q;q.__name__=!0;q.callLater=function(a,c){null==c&&(c=0);window.setTimeout(a,c)};q.hideMobileBrowser=function(){window.scrollTo(1,0)};q.loadExtension=function(a,c){null==c&&(c=window);var b=Ka.field(c,a);if(null!=b)return{prefix:"",field:a,value:b};for(var b=a.charAt(0).toUpperCase()+z.substr(a,
1,null),e=0,d=q.VENDOR_PREFIXES;e<d.length;){var f=d[e];++e;var h=f+b,j=Ka.field(c,h);if(null!=j)return{prefix:f,field:h,value:j}}return{prefix:null,field:null,value:null}};q.loadFirstExtension=function(a,c){for(var b=0;b<a.length;){var e=a[b];++b;e=q.loadExtension(e,c);if(null!=e.field)return e}return{prefix:null,field:null,value:null}};q.polyfill=function(a,c){null==c&&(c=window);var b=q.loadExtension(a,c).value;if(null==b)return!1;c[a]=b;return!0};q.setVendorStyle=function(a,c,b){for(var a=a.style,
e=0,d=q.VENDOR_PREFIXES;e<d.length;){var f=d[e];++e;a.setProperty("-"+f+"-"+c,b)}a.setProperty(c,b)};q.addVendorListener=function(a,c,b,e){for(var d=0,f=q.VENDOR_PREFIXES;d<f.length;){var h=f[d];++d;a.addEventListener(h+c,b,e)}a.addEventListener(c,b,e)};q.orientation=function(a){switch(a){case -90:case 90:return da.Landscape;default:return da.Portrait}};q.createEmptyCanvas=function(a,c){var b;b=window.document.createElement("canvas");b.width=a;b.height=c;return b};q.createCanvas=function(a){var c=
q.createEmptyCanvas(a.width,a.height),b=c.getContext("2d");b.save();b.globalCompositeOperation="copy";b.drawImage(a,0,0);b.restore();return c};q.detectSlowDriver=function(a){if(0<=window.navigator.platform.indexOf("Win")&&null!=window.chrome){for(var c=0,a=a.getSupportedExtensions();c<a.length;){var b=a[c];++c;if(0<=b.indexOf("WEBGL_compressed_texture"))return!1}return!0}return!1};q.fixAndroidMath=function(){if(0<=window.navigator.userAgent.indexOf("Linux; U; Android 4")){var a=Math.sin,c=Math.cos;
Math.sin=function(c){return 0==c?0:a(c)};Math.cos=function(a){return 0==a?1:c(a)}}};var u=function(a){this._disposed=!1;this.buffer=a};d["flambe.platform.html.WebAudioSound"]=u;u.__name__=!0;u.__interfaces__=[Ha];u.get_supported=function(){if(u._detectSupport){u._detectSupport=!1;var a=q.loadExtension("AudioContext").value;null!=a&&(u.ctx=new a,u.gain=u.createGain(),u.gain.connect(u.ctx.destination),r.volume.watch(function(a){u.gain.gain.value=a}))}return null!=u.ctx};u.createGain=function(){return null!=
u.ctx.createGain?u.ctx.createGain():u.ctx.createGainNode()};u.start=function(a,c){null!=a.start?a.start(c):a.noteOn(c)};u.__super__=I;u.prototype=o(I.prototype,{play:function(a){null==a&&(a=1);return new Xa(this,a,!1)},loop:function(a){null==a&&(a=1);return new Xa(this,a,!0)},get_duration:function(){return this.buffer.duration},onDisposed:function(){this.buffer=null},__class__:u});var Xa=function(a,c,b){var e=this;this._sound=a;this._head=u.gain;this._complete=new N(!1);this._sourceNode=u.ctx.createBufferSource();
this._sourceNode.buffer=a.buffer;this._sourceNode.loop=b;this._sourceNode.onended=function(){e._complete.set__(!0)};u.start(this._sourceNode,0);this.playAudio();this.volume=new x(c,function(a){e.setVolume(a)});1!=c&&this.setVolume(c);r.hidden._value&&this.set_paused(!0)};d["flambe.platform.html._WebAudioSound.WebAudioPlayback"]=Xa;Xa.__name__=!0;Xa.__interfaces__=[qb,Ia];Xa.prototype={get_sound:function(){return this._sound},set_paused:function(a){a!=0<=this._pausedAt&&(a?(this._sourceNode.disconnect(),
this._pausedAt=this.get_position()):this.playAudio());return a},get_position:function(){return this._complete._value?this._sound.get_duration():0<=this._pausedAt?this._pausedAt:(u.ctx.currentTime-this._startedAt)%this._sound.get_duration()},update:function(a){this.volume.update(a);3==this._sourceNode.playbackState&&this._complete.set__(!0);return this._complete._value||0<=this._pausedAt?(this._tickableAdded=!1,this._hideBinding.dispose(),!0):!1},dispose:function(){this.set_paused(!0);this._complete.set__(!0)},
setVolume:function(a){null==this._gainNode&&(this._gainNode=u.createGain(),this.insertNode(this._gainNode));this._gainNode.gain.value=a},insertNode:function(a){0<=this._pausedAt||(this._sourceNode.disconnect(),this._sourceNode.connect(a));a.connect(this._head);this._head=a},playAudio:function(){var a=this;this._sourceNode.connect(this._head);this._startedAt=u.ctx.currentTime;this._pausedAt=-1;this._tickableAdded||(qa.instance.mainLoop.addTickable(this),this._tickableAdded=!0,this._hideBinding=r.hidden.get_changed().connect(function(c){c?
(a._wasPaused=0<=a._pausedAt,a.set_paused(!0)):a.set_paused(a._wasPaused)}))},__class__:Xa};var rc=function(a){this._quads=this._maxQuads=this._dataOffset=this._backbufferWidth=this._backbufferHeight=0;this._pendingSetScissor=!1;this._lastBlendMode=this._lastRenderTarget=this._lastShader=this._lastTexture=this._lastScissor=this._currentBlendMode=this._currentShader=this._currentTexture=this._currentRenderTarget=null;this._gl=a;a.clearColor(0,0,0,0);a.enable(3042);a.pixelStorei(37441,1);this._vertexBuffer=
a.createBuffer();a.bindBuffer(34962,this._vertexBuffer);this._quadIndexBuffer=a.createBuffer();a.bindBuffer(34963,this._quadIndexBuffer);this._drawTextureShader=new tb(a);this._drawPatternShader=new ub(a);this._fillRectShader=new vb(a);this.resize(16)};d["flambe.platform.html.WebGLBatcher"]=rc;rc.__name__=!0;rc.prototype={resizeBackbuffer:function(a,c){this._gl.viewport(0,0,a,c);this._backbufferWidth=a;this._backbufferHeight=c},willRender:function(){},didRender:function(){this.flush()},bindTexture:function(a){this.flush();
this._currentTexture=this._lastTexture=null;this._gl.bindTexture(3553,a)},deleteTexture:function(a){null!=this._lastTexture&&this._lastTexture.root==a&&(this.flush(),this._currentTexture=this._lastTexture=null);this._gl.deleteTexture(a.nativeTexture)},deleteFramebuffer:function(a){a==this._lastRenderTarget&&(this.flush(),this._currentRenderTarget=this._lastRenderTarget=null);this._gl.deleteFramebuffer(a.framebuffer)},prepareDrawTexture:function(a,c,b,e){e!=this._lastTexture&&(this.flush(),this._lastTexture=
e);return this.prepareQuad(5,a,c,b,this._drawTextureShader)},prepareDrawPattern:function(a,c,b,e){e!=this._lastTexture&&(this.flush(),this._lastTexture=e);return this.prepareQuad(5,a,c,b,this._drawPatternShader)},prepareFillRect:function(a,c,b){return this.prepareQuad(6,a,c,b,this._fillRectShader)},prepareQuad:function(a,c,b,e,d){c!=this._lastRenderTarget&&(this.flush(),this._lastRenderTarget=c);b!=this._lastBlendMode&&(this.flush(),this._lastBlendMode=b);d!=this._lastShader&&(this.flush(),this._lastShader=
d);if(null!=e||null!=this._lastScissor)if(null==e||null==this._lastScissor||!this._lastScissor.equals(e))this.flush(),this._lastScissor=null!=e?e.clone(this._lastScissor):null,this._pendingSetScissor=!0;this._quads>=this._maxQuads&&this.resize(2*this._maxQuads);++this._quads;c=this._dataOffset;this._dataOffset+=4*a;return c},flush:function(){if(!(1>this._quads)){this._lastRenderTarget!=this._currentRenderTarget&&this.bindRenderTarget(this._lastRenderTarget);if(this._lastBlendMode!=this._currentBlendMode){switch(this._lastBlendMode[1]){case 0:this._gl.blendFunc(1,
771);break;case 1:this._gl.blendFunc(1,1);break;case 2:this._gl.blendFunc(0,770);break;case 3:this._gl.blendFunc(1,0)}this._currentBlendMode=this._lastBlendMode}this._pendingSetScissor&&(null!=this._lastScissor?(this._gl.enable(3089),this._gl.scissor(this._lastScissor.x|0,this._lastScissor.y|0,this._lastScissor.width|0,this._lastScissor.height|0)):this._gl.disable(3089),this._pendingSetScissor=!1);this._lastTexture!=this._currentTexture&&(this._gl.bindTexture(3553,this._lastTexture.root.nativeTexture),
this._currentTexture=this._lastTexture);this._lastShader!=this._currentShader&&(this._lastShader.useProgram(),this._lastShader.prepare(),this._currentShader=this._lastShader);if(this._lastShader==this._drawPatternShader){var a=this._lastTexture,c=a.root;this._drawPatternShader.setRegion(a.rootX/c.width,a.rootY/c.height,a._width/c.width,a._height/c.height)}this._gl.bufferData(34962,this.data.subarray(0,this._dataOffset),35040);this._gl.drawElements(4,6*this._quads,5123,0);this._dataOffset=this._quads=
0}},resize:function(a){this.flush();if(!(1024<a)){this._maxQuads=a;this.data=new Float32Array(24*a);this._gl.bufferData(34962,4*this.data.length,35040);for(var c=new Uint16Array(6*a),b=0;b<a;){var e=b++;c[6*e]=4*e;c[6*e+1]=4*e+1;c[6*e+2]=4*e+2;c[6*e+3]=4*e+2;c[6*e+4]=4*e+3;c[6*e+5]=4*e}this._gl.bufferData(34963,c,35044)}},bindRenderTarget:function(a){null!=a?(this._gl.bindFramebuffer(36160,a.framebuffer),this._gl.viewport(0,0,a.width,a.height)):(this._gl.bindFramebuffer(36160,null),this._gl.viewport(0,
0,this._backbufferWidth,this._backbufferHeight));this._lastRenderTarget=this._currentRenderTarget=a},__class__:rc};var ea=function(a,c){this._inverseProjection=this._stateList=null;null==ea._scratchQuadArray&&(ea._scratchQuadArray=new Float32Array(8));this._batcher=a;this._renderTarget=c};d["flambe.platform.html.WebGLGraphics"]=ea;ea.__name__=!0;ea.__interfaces__=[Sa];ea.prototype={save:function(){var a=this._stateList,c=this._stateList.next;null==c&&(c=new wb,c.prev=a,a.next=c);a.matrix.clone(c.matrix);
c.alpha=a.alpha;c.blendMode=a.blendMode;c.scissor=null!=a.scissor?a.scissor.clone(c.scissor):null;this._stateList=c},transform:function(a,c,b,e,d,f){var h=this._stateList;ea._scratchMatrix.set(a,c,b,e,d,f);ha.multiply(h.matrix,ea._scratchMatrix,h.matrix)},restore:function(){this._stateList=this._stateList.prev},drawTexture:function(a,c,b){this.drawSubTexture(a,c,b,0,0,a.get_width(),a.get_height())},drawSubTexture:function(a,c,b,e,d,f,h){var j=this._stateList,k=a.root,c=this.transformQuad(c,b,f,h),
b=k.width,k=k.height,e=(a.rootX+e)/b,d=(a.rootY+d)/k,f=e+f/b,h=d+h/k,b=j.alpha,a=this._batcher.prepareDrawTexture(this._renderTarget,j.blendMode,j.scissor,a),j=this._batcher.data;j[a]=c[0];j[++a]=c[1];j[++a]=e;j[++a]=d;j[++a]=b;j[++a]=c[2];j[++a]=c[3];j[++a]=f;j[++a]=d;j[++a]=b;j[++a]=c[4];j[++a]=c[5];j[++a]=f;j[++a]=h;j[++a]=b;j[++a]=c[6];j[++a]=c[7];j[++a]=e;j[++a]=h;j[++a]=b},drawPattern:function(a,c,b,e,d){var f=this._stateList,h=a.root,c=this.transformQuad(c,b,e,d),e=e/h.width,d=d/h.height,h=
f.alpha,a=this._batcher.prepareDrawPattern(this._renderTarget,f.blendMode,f.scissor,a),f=this._batcher.data;f[a]=c[0];f[++a]=c[1];f[++a]=0;f[++a]=0;f[++a]=h;f[++a]=c[2];f[++a]=c[3];f[++a]=e;f[++a]=0;f[++a]=h;f[++a]=c[4];f[++a]=c[5];f[++a]=e;f[++a]=d;f[++a]=h;f[++a]=c[6];f[++a]=c[7];f[++a]=0;f[++a]=d;f[++a]=h},fillRect:function(a,c,b,e,d){var f=this._stateList,c=this.transformQuad(c,b,e,d),b=(a&16711680)/16711680,e=(a&65280)/65280,a=(a&255)/255,d=f.alpha,f=this._batcher.prepareFillRect(this._renderTarget,
f.blendMode,f.scissor),h=this._batcher.data;h[f]=c[0];h[++f]=c[1];h[++f]=b;h[++f]=e;h[++f]=a;h[++f]=d;h[++f]=c[2];h[++f]=c[3];h[++f]=b;h[++f]=e;h[++f]=a;h[++f]=d;h[++f]=c[4];h[++f]=c[5];h[++f]=b;h[++f]=e;h[++f]=a;h[++f]=d;h[++f]=c[6];h[++f]=c[7];h[++f]=b;h[++f]=e;h[++f]=a;h[++f]=d},multiplyAlpha:function(a){this._stateList.alpha*=a},setBlendMode:function(a){this._stateList.blendMode=a},applyScissor:function(a,c,b,e){var d=this._stateList,f=ea._scratchQuadArray;f[0]=a;f[1]=c;f[2]=a+b;f[3]=c+e;d.matrix.transformArray(f,
4,f);this._inverseProjection.transformArray(f,4,f);a=f[0];c=f[1];b=f[2]-a;e=f[3]-c;0>b&&(a+=b,b=-b);0>e&&(c+=e,e=-e);d.applyScissor(a,c,b,e)},willRender:function(){this._batcher.willRender()},didRender:function(){this._batcher.didRender()},onResize:function(a,c){this._stateList=new wb;var b;b=null!=this._renderTarget?-1:1;this._stateList.matrix.set(2/a,0,0,-2*b/c,-1,b);this._inverseProjection=new ha;this._inverseProjection.set(2/a,0,0,2/c,-1,-1);this._inverseProjection.invert()},transformQuad:function(a,
c,b,e){var b=a+b,e=c+e,d=ea._scratchQuadArray;d[0]=a;d[1]=c;d[2]=b;d[3]=c;d[4]=b;d[5]=e;d[6]=a;d[7]=e;this._stateList.matrix.transformArray(d,8,d);return d},__class__:ea};var wb=function(){this.scissor=this.prev=this.next=null;this.matrix=new ha;this.alpha=1;this.blendMode=B.Normal};d["flambe.platform.html._WebGLGraphics.DrawingState"]=wb;wb.__name__=!0;wb.prototype={applyScissor:function(a,c,b,e){if(null!=this.scissor)var d=ca.max(this.scissor.x,a),f=ca.max(this.scissor.y,c),b=ca.min(this.scissor.x+
this.scissor.width,a+b),e=ca.min(this.scissor.y+this.scissor.height,c+e),a=d,c=f,b=b-d,e=e-f;else this.scissor=new Fa;this.scissor.set(Math.round(a),Math.round(c),Math.round(b),Math.round(e))},__class__:wb};var hb=function(a,c){var b=this;this._hasGPU=new N(!0);this.gl=c;c.canvas.addEventListener("webglcontextlost",function(a){a.preventDefault();b._hasGPU.set__(!1)},!1);c.canvas.addEventListener("webglcontextrestore",function(){b.init();b._hasGPU.set__(!0)},!1);a.resize.connect(Q(this,this.onResize));
this.init()};d["flambe.platform.html.WebGLRenderer"]=hb;hb.__name__=!0;hb.__interfaces__=[Ta];hb.prototype={get_type:function(){return M.WebGL},createTextureFromImage:function(a){if(this.gl.isContextLost())return null;var c=new ya(this,a.width,a.height);c.uploadImageData(a);return c.createTexture(a.width,a.height)},getCompressedTextureFormats:function(){return[]},createCompressedTexture:function(){this.gl.isContextLost();return null},willRender:function(){this.graphics.willRender()},didRender:function(){this.graphics.didRender()},
onResize:function(){var a=this.gl.canvas.width,c=this.gl.canvas.height;this.batcher.resizeBackbuffer(a,c);this.graphics.onResize(a,c)},init:function(){this.batcher=new rc(this.gl);this.graphics=new ea(this.batcher,null);this.onResize()},__class__:hb};var xb=function(a,c,b){la.call(this,a,c,b)};d["flambe.platform.html.WebGLTexture"]=xb;xb.__name__=!0;xb.__super__=la;xb.prototype=o(la.prototype,{__class__:xb});var ya=function(a,c,b){this.framebuffer=this._graphics=null;this._disposed=!1;this._renderer=
a;this.width=ca.max(2,pc.nextPowerOfTwo(c));this.height=ca.max(2,pc.nextPowerOfTwo(b));c=a.gl;this.nativeTexture=c.createTexture();a.batcher.bindTexture(this.nativeTexture);c.texParameteri(3553,10242,33071);c.texParameteri(3553,10243,33071);c.texParameteri(3553,10240,9729);c.texParameteri(3553,10241,9728)};d["flambe.platform.html.WebGLTextureRoot"]=ya;ya.__name__=!0;ya.__interfaces__=[Bc];ya.drawBorder=function(a,c,b){var e=a.getContext("2d");e.drawImage(a,c-1,0,1,b,c,0,1,b);e.drawImage(a,0,b-1,c,
1,0,b,c,1)};ya.__super__=I;ya.prototype=o(I.prototype,{createTexture:function(a,c){return new xb(this,a,c)},uploadImageData:function(a){if(this.width!=a.width||this.height!=a.height){var c=q.createEmptyCanvas(this.width,this.height);c.getContext("2d").drawImage(a,0,0);ya.drawBorder(c,a.width,a.height);a=c}this._renderer.batcher.bindTexture(this.nativeTexture);this._renderer.gl.texImage2D(3553,0,6408,6408,5121,a)},onDisposed:function(){var a=this._renderer.batcher;a.deleteTexture(this);null!=this.framebuffer&&
a.deleteFramebuffer(this);this._graphics=this.framebuffer=this.nativeTexture=null},__class__:ya});var T=function(a,c,b){b="#ifdef GL_ES\nprecision mediump float;\n#endif\n"+b;this._gl=a;this._program=a.createProgram();a.attachShader(this._program,T.createShader(a,35633,c));a.attachShader(this._program,T.createShader(a,35632,b));a.linkProgram(this._program);a.useProgram(this._program)};d["flambe.platform.shader.ShaderGL"]=T;T.__name__=!0;T.createShader=function(a,c,b){c=a.createShader(c);a.shaderSource(c,
b);a.compileShader(c);return c};T.prototype={useProgram:function(){this._gl.useProgram(this._program)},prepare:function(){null},getAttribLocation:function(a){return this._gl.getAttribLocation(this._program,a)},getUniformLocation:function(a){return this._gl.getUniformLocation(this._program,a)},__class__:T};var ub=function(a){T.call(this,a,"attribute highp vec2 a_pos;\nattribute mediump vec2 a_uv;\nattribute lowp float a_alpha;\nvarying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nvoid main (void) {\nv_uv = a_uv;\nv_alpha = a_alpha;\ngl_Position = vec4(a_pos, 0, 1);\n}",
"varying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nuniform lowp sampler2D u_texture;\nuniform mediump vec4 u_region;\nvoid main (void) {\ngl_FragColor = texture2D(u_texture, u_region.xy + mod(v_uv, u_region.zw)) * v_alpha;\n}");this.a_pos=this.getAttribLocation("a_pos");this.a_uv=this.getAttribLocation("a_uv");this.a_alpha=this.getAttribLocation("a_alpha");this.u_texture=this.getUniformLocation("u_texture");this.u_region=this.getUniformLocation("u_region");this.setTexture(0)};d["flambe.platform.shader.DrawPatternGL"]=
ub;ub.__name__=!0;ub.__super__=T;ub.prototype=o(T.prototype,{setTexture:function(a){this._gl.uniform1i(this.u_texture,a)},setRegion:function(a,c,b,e){this._gl.uniform4f(this.u_region,a,c,b,e)},prepare:function(){this._gl.enableVertexAttribArray(this.a_pos);this._gl.enableVertexAttribArray(this.a_uv);this._gl.enableVertexAttribArray(this.a_alpha);this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,20,0);this._gl.vertexAttribPointer(this.a_uv,2,5126,!1,20,8);this._gl.vertexAttribPointer(this.a_alpha,
1,5126,!1,20,16)},__class__:ub});var tb=function(a){T.call(this,a,"attribute highp vec2 a_pos;\nattribute mediump vec2 a_uv;\nattribute lowp float a_alpha;\nvarying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nvoid main (void) {\nv_uv = a_uv;\nv_alpha = a_alpha;\ngl_Position = vec4(a_pos, 0, 1);\n}","varying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nuniform lowp sampler2D u_texture;\nvoid main (void) {\ngl_FragColor = texture2D(u_texture, v_uv) * v_alpha;\n}");this.a_pos=this.getAttribLocation("a_pos");
this.a_uv=this.getAttribLocation("a_uv");this.a_alpha=this.getAttribLocation("a_alpha");this.u_texture=this.getUniformLocation("u_texture");this.setTexture(0)};d["flambe.platform.shader.DrawTextureGL"]=tb;tb.__name__=!0;tb.__super__=T;tb.prototype=o(T.prototype,{setTexture:function(a){this._gl.uniform1i(this.u_texture,a)},prepare:function(){this._gl.enableVertexAttribArray(this.a_pos);this._gl.enableVertexAttribArray(this.a_uv);this._gl.enableVertexAttribArray(this.a_alpha);this._gl.vertexAttribPointer(this.a_pos,
2,5126,!1,20,0);this._gl.vertexAttribPointer(this.a_uv,2,5126,!1,20,8);this._gl.vertexAttribPointer(this.a_alpha,1,5126,!1,20,16)},__class__:tb});var vb=function(a){T.call(this,a,"attribute highp vec2 a_pos;\nattribute lowp vec3 a_rgb;\nattribute lowp float a_alpha;\nvarying lowp vec4 v_color;\nvoid main (void) {\nv_color = vec4(a_rgb*a_alpha, a_alpha);\ngl_Position = vec4(a_pos, 0, 1);\n}","varying lowp vec4 v_color;\nvoid main (void) {\ngl_FragColor = v_color;\n}");this.a_pos=this.getAttribLocation("a_pos");
this.a_rgb=this.getAttribLocation("a_rgb");this.a_alpha=this.getAttribLocation("a_alpha")};d["flambe.platform.shader.FillRectGL"]=vb;vb.__name__=!0;vb.__super__=T;vb.prototype=o(T.prototype,{prepare:function(){this._gl.enableVertexAttribArray(this.a_pos);this._gl.enableVertexAttribArray(this.a_rgb);this._gl.enableVertexAttribArray(this.a_alpha);this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,24,0);this._gl.vertexAttribPointer(this.a_rgb,3,5126,!1,24,8);this._gl.vertexAttribPointer(this.a_alpha,
1,5126,!1,24,20)},__class__:vb});var yb=function(){this._transitor=null;this.scenes=[];this.occludedScenes=[];this._root=new n};d["flambe.scene.Director"]=yb;yb.__name__=!0;yb.__super__=s;yb.prototype=o(s.prototype,{get_name:function(){return"Director_13"},pushScene:function(a,c){var b=this;this.completeTransition();var e=this.get_topScene();null!=e?this.playTransition(e,a,c,function(){b.hide(e)}):(this.add(a),this.invalidateVisibility())},unwindToScene:function(a,b){var g=this;this.completeTransition();
var e=this.get_topScene();if(null!=e){if(e!=a){for(this.scenes.pop();0<this.scenes.length&&this.scenes[this.scenes.length-1]!=a;)this.scenes.pop().dispose();this.playTransition(e,a,b,function(){g.hideAndDispose(e)})}}else this.pushScene(a,b)},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.completeTransition();for(var a=0,b=this.scenes;a<b.length;){var g=b[a];++a;g.dispose()}this.scenes=[];this.occludedScenes=[];this._root.dispose()},onUpdate:function(a){null!=this._transitor&&
this._transitor.update(a)&&this.completeTransition()},get_topScene:function(){var a=this.scenes.length;return 0<a?this.scenes[a-1]:null},add:function(a){var b=this.get_topScene();null!=b&&this._root.removeChild(b);z.remove(this.scenes,a);this.scenes.push(a);this._root.addChild(a)},hide:function(a){a=a._compMap.Scene_0;null!=a&&a.hidden.emit()},hideAndDispose:function(a){this.hide(a);a.dispose()},show:function(a){a=a._compMap.Scene_0;null!=a&&a.shown.emit()},invalidateVisibility:function(){for(var a=
this.scenes.length;0<a;){var b=this.scenes[--a]._compMap.Scene_0;if(null==b||b.opaque)break}this.occludedScenes=0<this.scenes.length?this.scenes.slice(a,this.scenes.length-1):[];a=this.get_topScene();null!=a&&this.show(a)},completeTransition:function(){null!=this._transitor&&(this._transitor.complete(),this._transitor=null,this.invalidateVisibility())},playTransition:function(a,b,g,e){this.completeTransition();this.add(b);null!=g?(this.occludedScenes.push(a),this._transitor=new sc(a,b,g,e),this._transitor.init(this)):
(e(),this.invalidateVisibility())},__class__:yb});var sc=function(a,b,g,e){this._from=a;this._to=b;this._transition=g;this._onComplete=e};d["flambe.scene._Director.Transitor"]=sc;sc.__name__=!0;sc.prototype={init:function(a){this._transition.init(a,this._from,this._to)},update:function(a){return this._transition.update(a)},complete:function(){this._transition.complete();this._onComplete()},__class__:sc};var E=function(a){null==a&&(a=!0);this.opaque=a;this.shown=new ka;this.hidden=new ka};d["flambe.scene.Scene"]=
E;E.__name__=!0;E.__super__=s;E.prototype=o(s.prototype,{get_name:function(){return"Scene_0"},__class__:E});var Cc=function(){};d["flambe.scene.Transition"]=Cc;Cc.__name__=!0;Cc.prototype={init:function(a,b,g){this._director=a;this._from=b;this._to=g},update:function(){return!0},complete:function(){},__class__:Cc};var ra=function(){};d["flambe.script.Action"]=ra;ra.__name__=!0;ra.prototype={__class__:ra};var Ya=function(a,b,g,e){this._value=a;this._to=b;this._seconds=g;this._easing=e};d["flambe.script.AnimateTo"]=
Ya;Ya.__name__=!0;Ya.__interfaces__=[ra];Ya.prototype={update:function(a){null==this._tween&&(this._tween=new Na(this._value._value,this._to,this._seconds,this._easing),this._value.set_behavior(this._tween),this._value.update(a));if(this._value._behavior!=this._tween){var b=this._tween.elapsed-this._seconds;this._tween=null;return 0<b?a-b:0}return-1},__class__:Ya};var ma=function(a){this._fn=a};d["flambe.script.CallFunction"]=ma;ma.__name__=!0;ma.__interfaces__=[ra];ma.prototype={update:function(){this._fn();
return 0},__class__:ma};var zb=function(a){this._duration=a;this._elapsed=0};d["flambe.script.Delay"]=zb;zb.__name__=!0;zb.__interfaces__=[ra];zb.prototype={update:function(a){this._elapsed+=a;if(this._elapsed>=this._duration){var b=this._elapsed-this._duration;this._elapsed=0;return a-b}return-1},__class__:zb};var Ab=function(a,b){null==b&&(b=-1);this._action=a;this._remaining=this._count=b};d["flambe.script.Repeat"]=Ab;Ab.__name__=!0;Ab.__interfaces__=[ra];Ab.prototype={update:function(a,b){if(0==
this._count)return 0;var g=this._action.update(a,b);return 0<this._count&&0<=g&&0==--this._remaining?(this._remaining=this._count,g):-1},__class__:Ab};var Ja=function(){this.stopAll()};d["flambe.script.Script"]=Ja;Ja.__name__=!0;Ja.__super__=s;Ja.prototype=o(s.prototype,{get_name:function(){return"Script_12"},run:function(a){a=new Bb(a);this._handles.push(a);return a},stopAll:function(){this._handles=[]},onUpdate:function(a){for(var b=0;b<this._handles.length;){var g=this._handles[b];g.removed||0<=
g.action.update(a,this.owner)?this._handles.splice(b,1):++b}},__class__:Ja});var Bb=function(a){this.removed=!1;this.action=a};d["flambe.script._Script.Handle"]=Bb;Bb.__name__=!0;Bb.__interfaces__=[ga];Bb.prototype={dispose:function(){this.removed=!0;this.action=null},__class__:Bb};var Za=function(a){this._idx=0;this._runningActions=null!=a?a.slice():[]};d["flambe.script.Sequence"]=Za;Za.__name__=!0;Za.__interfaces__=[ra];Za.prototype={add:function(a){this._runningActions.push(a)},update:function(a,
b){for(var g=0;;){var e=this._runningActions[this._idx];if(null!=e)if(e=e.update(a-g,b),0<=e)g+=e;else return-1;++this._idx;if(this._idx>=this._runningActions.length){this._idx=0;break}else if(g>a)return-1}return g},__class__:Za};var Cb=function(a,b,g){this._strengthX=a;this._strengthY=b;this._duration=g;this._elapsed=0};d["flambe.script.Shake"]=Cb;Cb.__name__=!0;Cb.__interfaces__=[ra];Cb.prototype={update:function(a,b){var g=b._compMap.Sprite_2;null==this._jitterX&&(this._jitterX=new Oa(g.x._value,
this._strengthX),this._jitterY=new Oa(g.y._value,this._strengthY),g.x.set_behavior(this._jitterX),g.y.set_behavior(this._jitterY));this._elapsed+=a;if(this._elapsed>=this._duration){var e=this._elapsed-this._duration;g.x._behavior==this._jitterX&&g.x.set__(this._jitterX.base);g.y._behavior==this._jitterY&&g.y.set__(this._jitterY.base);this._jitterY=this._jitterX=null;this._elapsed=0;return a-e}return-1},__class__:Cb};var M=d["flambe.subsystem.RendererType"]={__ename__:!0,__constructs__:["Stage3D",
"WebGL","Canvas"]};M.Stage3D=["Stage3D",0];M.Stage3D.toString=f;M.Stage3D.__enum__=M;M.WebGL=["WebGL",1];M.WebGL.toString=f;M.WebGL.__enum__=M;M.Canvas=["Canvas",2];M.Canvas.toString=f;M.Canvas.__enum__=M;M.__empty_constructs__=[M.Stage3D,M.WebGL,M.Canvas];var yc=function(){};d["flambe.util.Assert"]=yc;yc.__name__=!0;yc.that=function(){};var cc=function(){};d["flambe.util.BitSets"]=cc;cc.__name__=!0;cc.set=function(a,b,g){return g?a|b:a&~b};var nb=function(){this.success=new w;this.error=new w;this.progressChanged=
new ka;this.hasResult=!1;this._total=this._progress=0};d["flambe.util.Promise"]=nb;nb.__name__=!0;nb.prototype={set_result:function(a){if(this.hasResult)throw"Promise result already assigned";this._result=a;this.hasResult=!0;this.success.emit(a);return a},get:function(a){return this.hasResult?(a(this._result),null):this.success.connect(a).once()},set_progress:function(a){this._progress!=a&&(this._progress=a,this.progressChanged.emit());return a},set_total:function(a){this._total!=a&&(this._total=
a,this.progressChanged.emit());return a},__class__:nb};var ka=function(a){F.call(this,a)};d["flambe.util.Signal0"]=ka;ka.__name__=!0;ka.__super__=F;ka.prototype=o(F.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(){var a=this;this._head==F.DISPATCHING_SENTINEL?this.defer(function(){a.emitImpl()}):this.emitImpl()},emitImpl:function(){for(var a=this.willEmit(),b=a;null!=b;)b._listener(),b.stayInList||b.dispose(),b=b._next;this.didEmit(a)},__class__:ka});
var $b=function(a){this.next=null;this.fn=a};d["flambe.util._SignalBase.Task"]=$b;$b.__name__=!0;$b.prototype={__class__:$b};var O=function(){};d["flambe.util.Strings"]=O;O.__name__=!0;O.getFileExtension=function(a){var b=a.lastIndexOf(".");return 0<b?z.substr(a,b+1,null):null};O.removeFileExtension=function(a){var b=a.lastIndexOf(".");return 0<b?z.substr(a,0,b):a};O.getUrlExtension=function(a){var b=a.lastIndexOf("?");0<=b&&(a=z.substr(a,0,b));b=a.lastIndexOf("/");0<=b&&(a=z.substr(a,b+1,null));
return O.getFileExtension(a)};O.joinPath=function(a,b){0<a.length&&47!=a.charCodeAt(a.length-1)&&(a+="/");return a+b};O.withFields=function(a,b){var g=b.length;if(0<g){for(var a=0<a.length?a+" [":a+"[",e=0;e<g;){0<e&&(a+=", ");var d=b[e],f=b[e+1];if(A.is(f,Error)){var h=f.stack;null!=h&&(f=h)}a+=d+"="+A.string(f);e+=2}a+="]"}return a};var j=function(){};d["flambepowertools.MainStage"]=j;j.__name__=!0;j.init=function(a,b){j._designSizeWidth=a;j._designSizeHeight=b;j.setupMainStageSprite();j.setupStageResizeListener();
j.resizeStage()};j.setupMainStageSprite=function(){j._mainStageSprite=new m;j._mainStageSprite.scissor=new Fa(0,0,j._designSizeWidth,j._designSizeHeight);r.root.add(j._mainStageSprite)};j.setupStageResizeListener=function(){r._platform.getStage().resize.connect(j.onStageResize)};j.onStageResize=function(){j.resizeStage()};j.resizeStage=function(){j._computedStageScale=j.computeScaleAccordingToNewStageDimensions();j._mainStageSprite.setScale(j._computedStageScale);j.centerStage()};j.computeScaleAccordingToNewStageDimensions=
function(){var a=r._platform.getStage().get_width(),b=r._platform.getStage().get_height(),g=j._designSizeWidth,e=j._designSizeHeight;return a/g<b/e?a/g:b/e};j.centerStage=function(){var a=r._platform.getStage().get_width()-j._designSizeWidth*j._computedStageScale,b=r._platform.getStage().get_height()-j._designSizeHeight*j._computedStageScale;j._mainStageSprite.x.set__(a/2);j._mainStageSprite.y.set__(b/2)};j.get_width=function(){return j._designSizeWidth};j.get_height=function(){return j._designSizeHeight};
var sa=function(){};d["flambepowertools.MiscUtils"]=sa;sa.__name__=!0;sa.callWithDelay=function(a,b,g){null==g&&(g=1);var e=new n;a.addChild(e);a=new Ja;e.add(a);b=new Za([new zb(g),b]);a.run(b);return a};var G=function(){};d["flambepowertools.managers.FontManager"]=G;G.__name__=!0;G.setup=function(a){G._assetPack=a;G._fontMap=new ja};G.getFont=function(a){var b=G._fontMap.get(a);null==b&&(b=new va(G._assetPack,a),G._fontMap.set(a,b));return b};var X=function(){};d["flambepowertools.managers.SceneManager"]=
X;X.__name__=!0;X.setup=function(){X._sceneDirector=new yb;r.root.add(X._sceneDirector)};X.switchScene=function(a){var b=new n;b.add(a);X._sceneDirector.unwindToScene(b)};X.pushScene=function(a){var b=new n;b.add(a);X._sceneDirector.pushScene(b)};var y=function(){};d["flambepowertools.managers.SoundManager"]=y;y.__name__=!0;y.setup=function(){y._playbackMap=new ja};y.playAudio=function(a,b){null==b&&(b=1);var g=k.assetPack.getSound(a).play();g.volume.set__(b);return g};y.loopAudio=function(a,b,g){null==
g&&(g=1);null==b&&(b=!1);b&&y.stopAudio(a);b=y._playbackMap.get(a);null==b?(b=k.assetPack.getSound(a).loop(),y._playbackMap.set(a,b)):b.get_sound().loop();b.volume.set__(g);return b};y.stopAudio=function(a){var b=y._playbackMap.get(a);null!=b&&(b.dispose(),y._playbackMap.remove(a))};var Db=function(){};d["game.Main"]=Db;Db.__name__=!0;Db.main=function(){r.init();j.init(560,560);var a=V.fromAssets("preloader");r._platform.loadAssetPack(a).get(Db.onSuccess)};Db.onSuccess=function(a){X.setup();X.switchScene(new Eb(a))};
var k=function(){};d["game.Registry"]=k;k.__name__=!0;var p=d["game.enums.MoveDirection"]={__ename__:!0,__constructs__:["UP","RIGHT","DOWN","LEFT"]};p.UP=["UP",0];p.UP.toString=f;p.UP.__enum__=p;p.RIGHT=["RIGHT",1];p.RIGHT.toString=f;p.RIGHT.__enum__=p;p.DOWN=["DOWN",2];p.DOWN.toString=f;p.DOWN.__enum__=p;p.LEFT=["LEFT",3];p.LEFT.toString=f;p.LEFT.__enum__=p;p.__empty_constructs__=[p.UP,p.RIGHT,p.DOWN,p.LEFT];var Fb=function(){m.call(this)};d["game.gui.CurrentCardHolder"]=Fb;Fb.__name__=!0;Fb.__super__=
m;Fb.prototype=o(m.prototype,{onAdded:function(){m.prototype.onAdded.call(this);this.setupBackground()},setCurrentTileObjectCard:function(a){this._currentTileObjectCard=a;this._backgroundSprite.owner.addChild((new n).add(this._currentTileObjectCard));this._currentTileObjectCard.x.set__(this._backgroundSprite.getNaturalWidth()/2);this._currentTileObjectCard.y.set__(this._backgroundSprite.getNaturalHeight()/2);this.show()},getCurrentTileObjectCard:function(){return this._currentTileObjectCard},removeCurrentTileObjectCard:function(){this._currentTileObjectCard.owner.removeChild(this._currentTileObjectCard.owner);
this._currentTileObjectCard=null},show:function(){this.destroyHideScript();this._backgroundSprite.scaleY.set__(0);this._backgroundSprite.scaleY.animateTo(1,0.25)},hide:function(){this._backgroundSprite.scaleY.set__(1);this._backgroundSprite.scaleY.animateTo(0,0.25);this.destroyHideScript()},hideAfterDelay:function(){this._hideScript=sa.callWithDelay(this.owner,new ma(Q(this,this.hide)),1)},destroyHideScript:function(){null!=this._hideScript&&this._hideScript.dispose();this._hideScript=null},informCurrentCardOfNewOwner:function(){var a=
k.gameManager.get_turnManager().getCurrentCharacter();v.__cast(this._currentTileObjectCard,ta).setCharacterOwner(a)},setupBackground:function(){this._backgroundSprite=new ba(0,70,70);this.owner.addChild((new n).add(this._backgroundSprite));this._backgroundSprite.centerAnchor();this._backgroundSprite.anchorY.set__(this._backgroundSprite.getNaturalHeight());this._backgroundSprite.alpha.set__(0.75);this._backgroundSprite.x.set__(j.get_width()/2);var a=k.gameManager.get_gameScene().get_instructionsLabel().get_label();
this._backgroundSprite.y.set__(j.get_height()-a.getNaturalHeight()-25)},__class__:Fb});var Gb=function(){this.setupTextLabel()};d["game.gui.InstructionsLabel"]=Gb;Gb.__name__=!0;Gb.__super__=s;Gb.prototype=o(s.prototype,{get_name:function(){return"InstructionsLabel_3"},updateLabel:function(a){a==J.TILE_PLACEMENT?this.setText("Click on any tile to place this arrow"):this.setText("Use the arrow keys to move characters")},onAdded:function(){s.prototype.onAdded.call(this);this.owner.addChild((new n).add(this._label))},
setupTextLabel:function(){this._label=new S(G.getFont("fonts/chubby_cheeks_32"),"DEFAULT");this._label.set_align(H.Center);this._label.anchorY.set__(this._label.getNaturalHeight()/2);this._label.x.set__(j.get_width()/2);this._label.y.set__(j.get_height()-this._label.getNaturalHeight()/2-20)},setText:function(a){this._label.set_text(a);this._label.anchorY.set__(this._label.getNaturalHeight()/2);this._label.x.set__(j.get_width()/2)},get_label:function(){return this._label},__class__:Gb});var Hb=function(){m.call(this)};
d["game.gui.MultiplierLabel"]=Hb;Hb.__name__=!0;Hb.__super__=m;Hb.prototype=o(m.prototype,{setMultiplierValueTo:function(a){this._label.set_text("x"+(null==a?"null":""+a))},onAdded:function(){m.prototype.onAdded.call(this);this.setupLabel()},setupLabel:function(){this._label=new S(G.getFont("fonts/chubby_cheeks_32"),"DEFAULT");this.owner.addChild((new n).add(this._label));this._label.y.set__(this._label.getNaturalHeight()/2+25);this.updatePosition();this.setMultiplierValueTo(1)},updatePosition:function(){this._label.centerAnchor();
this._label.x.set__(j.get_width()/2+-5)},__class__:Hb});var Ib=function(){m.call(this);this.setupTextLabel()};d["game.gui.ScoreLabel"]=Ib;Ib.__name__=!0;Ib.__super__=m;Ib.prototype=o(m.prototype,{setScoreText:function(a){this._label.set_text("Score: "+a);this.updatePosition()},onAdded:function(){m.prototype.onAdded.call(this);this.owner.addChild((new n).add(this._label))},setupTextLabel:function(){this._label=new S(G.getFont("fonts/chubby_cheeks_32"),"DEFAULT");this._label.y.set__(this._label.getNaturalHeight()/
2+25);this.updatePosition()},updatePosition:function(){this._label.centerAnchor();this._label.x.set__(j.get_width()/2+-134)},__class__:Ib});var Jb=function(){m.call(this)};d["game.gui.TurnsLeftLabel"]=Jb;Jb.__name__=!0;Jb.__super__=m;Jb.prototype=o(m.prototype,{setValueTo:function(a){this._label.set_text("Turns left:"+(null==a?"null":""+a));this.updatePosition()},onAdded:function(){m.prototype.onAdded.call(this);this.setupLabel()},setupLabel:function(){this._label=new S(G.getFont("fonts/chubby_cheeks_32"),
"DEFAULT");this.owner.addChild((new n).add(this._label));this._label.y.set__(this._label.getNaturalHeight()/2+25);this.updatePosition();this.setValueTo(1)},updatePosition:function(){this._label.centerAnchor();this._label.x.set__(j.get_width()/2+55)},__class__:Jb});var U=d["game.managers.Dimension"]={__ename__:!0,__constructs__:["GREEN","PINK"]};U.GREEN=["GREEN",0];U.GREEN.toString=f;U.GREEN.__enum__=U;U.PINK=["PINK",1];U.PINK.toString=f;U.PINK.__enum__=U;U.__empty_constructs__=[U.GREEN,U.PINK];var Kb=
function(){this._currentDimension=U.GREEN};d["game.managers.DimensionManager"]=Kb;Kb.__name__=!0;Kb.__super__=s;Kb.prototype=o(s.prototype,{get_name:function(){return"DimensionManager_11"},moveToNextDimension:function(){this._currentDimension=this._currentDimension==U.PINK?U.GREEN:U.PINK;this.updateCharacters();this.updateTileMap()},updateCharacters:function(){for(var a=0,b=k.gameManager.get_turnManager().get_characterList();a<b.length;){var g=b[a];++a;g.checkIfPartOfCurrentDimension()}},updateTileMap:function(){k.gameManager.get_gameScene().get_tileMap().switchDimension(this._currentDimension)},
__class__:Kb});var tc=function(a){this._gameScene=a};d["game.managers.GameManager"]=tc;tc.__name__=!0;tc.prototype={setupGame:function(){this.setupPlayer();this.setupDimensionManager();this.setupTurnManager();this.setupInputManager();this.setupDirectionalPlateSpawner();this.setupObjectList();this.setupCoinSpawner();this.setupPlatesAtRandom();this.setupCharacters();this._coinSpawner.createCoin();this._coinSpawner.moveCoinToRandomPosition();this._dimensionManager.updateCharacters();this._player.pickRandomTileCard()},
endGame:function(){var a=k.gameManager.get_player().get_currentScore().getScore(),b=k.gameManager.get_player().get_multiplierManager().get_highestMultiplierCount();y.playAudio("audio/sfx/shift_dimension",0.25);X.pushScene(new Lb(a,b))},onSteppedOnIncorrectTile:function(){this._gameScene.get_tileMap().shake()},setupPlayer:function(){this._player=new Mb;this._gameScene.owner.addChild((new n).add(this._player))},setupDimensionManager:function(){this._dimensionManager=new Kb;this._gameScene.owner.addChild((new n).add(this._dimensionManager))},
setupTurnManager:function(){this._turnManager=new Nb;this._gameScene.owner.addChild((new n).add(this._turnManager))},setupInputManager:function(){this._inputManager=new Ob;this._gameScene.owner.addChild((new n).add(this._inputManager))},setupCoinSpawner:function(){this._coinSpawner=new Pb;this._gameScene.owner.addChild((new n).add(this._coinSpawner))},setupDirectionalPlateSpawner:function(){this._directionalPlateSpawner=new Qb;this._gameScene.owner.addChild((new n).add(this._directionalPlateSpawner))},
setupObjectList:function(){this._objectList=new cb},setupCharacters:function(){for(var a=[],b=0;2>b;){var g=b++,e=D.getRandomEmptyTile();if(null==e)return;var d=e.get_currentColumn(),e=e.get_currentRow(),g=new $a(g);a.push(g);this._gameScene.get_tileMap().addTileObjectAt(g,d,e)}this._turnManager.setup(a)},setupPlatesAtRandom:function(){for(var a=0;15>a;)a++,this._directionalPlateSpawner.spawnADirectionalPlateAtRandom();y.playAudio("audio/sfx/spawn",0.25)},get_turnManager:function(){return this._turnManager},
get_gameScene:function(){return this._gameScene},get_objectList:function(){return this._objectList},get_inputManager:function(){return this._inputManager},get_dimensionManager:function(){return this._dimensionManager},get_coinSpawner:function(){return this._coinSpawner},get_player:function(){return this._player},get_directionalPlateSpawner:function(){return this._directionalPlateSpawner},__class__:tc};var Ob=function(){};d["game.managers.InputManager"]=Ob;Ob.__name__=!0;Ob.__super__=s;Ob.prototype=
o(s.prototype,{get_name:function(){return"InputManager_5"},onTilePressed:function(a){var b=k.gameManager.get_turnManager();if(b.get_currentTurnMode()==J.TILE_PLACEMENT){var g=k.gameManager.get_gameScene().get_tileMap(),e;e=v.__cast(k.gameManager.get_player().retrieveCurrentTileCard(),ta);g.addTileObjectAt(e,a.get_currentColumn(),a.get_currentRow());b.moveToNextMode();e.playSpawningAnimation();this.playPlacementSFX()}},onDirectionalPlatePressed:function(a){var b=k.gameManager.get_turnManager();if(b.get_currentTurnMode()==
J.TILE_PLACEMENT){var g=k.gameManager.get_gameScene().get_currentCardHolder(),e=a.get_tileAttachedTo(),d;d=v.__cast(g.getCurrentTileObjectCard(),ta);g.removeCurrentTileObjectCard();d.removeCharacterOwner();a.get_tileAttachedTo().removeResident(a);k.gameManager.get_gameScene().get_tileMap().addTileObjectAt(d,e.get_currentColumn(),e.get_currentRow());g.setCurrentTileObjectCard(a);a.setCharacterOwner(k.gameManager.get_turnManager().getCurrentCharacter());g.hideAfterDelay();b.moveToNextMode();d.playSpawningAnimation();
this.playPlacementSFX()}},onAdded:function(){s.prototype.onAdded.call(this);r._platform.getKeyboard().down.connect(Q(this,this.onKeyPress),!0)},onKeyPress:function(a){k.gameManager.get_turnManager().get_currentTurnMode()==J.CHAR_MOVEMENT&&(a.key==b.Up||a.key==b.W?this.moveCurrentCharacter(p.UP):a.key==b.Right||a.key==b.D?this.moveCurrentCharacter(p.RIGHT):a.key==b.Down||a.key==b.S?this.moveCurrentCharacter(p.DOWN):(a.key==b.Left||a.key==b.A)&&this.moveCurrentCharacter(p.LEFT),y.playAudio("audio/sfx/move",
1))},moveCurrentCharacter:function(a){k.gameManager.get_turnManager().getCurrentCharacter().get_movementManager().move(a)},playPlacementSFX:function(){y.playAudio("audio/sfx/place",0.5)},__class__:Ob});var Rb=function(a){this._tileObject=a};d["game.managers.MovementManager"]=Rb;Rb.__name__=!0;Rb.__super__=s;Rb.prototype=o(s.prototype,{get_name:function(){return"MovementManager_9"},move:function(a){switch(a[1]){case 0:this.moveTo(this._tileObject.get_tileAttachedTo().get_currentColumn(),this._tileObject.get_tileAttachedTo().get_currentRow()-
1);break;case 1:this.moveTo(this._tileObject.get_tileAttachedTo().get_currentColumn()+1,this._tileObject.get_tileAttachedTo().get_currentRow());break;case 2:this.moveTo(this._tileObject.get_tileAttachedTo().get_currentColumn(),this._tileObject.get_tileAttachedTo().get_currentRow()+1);break;case 3:this.moveTo(this._tileObject.get_tileAttachedTo().get_currentColumn()-1,this._tileObject.get_tileAttachedTo().get_currentRow())}},moveTo:function(a,b){if(!this._isMoving){var d=k.gameManager.get_gameScene().get_tileMap().getTileAt(a,
b);if(null!=d){var e=new aa(this._tileObject.get_tileAttachedTo().get_currentColumn(),this._tileObject.get_tileAttachedTo().get_currentRow()),f=new aa(d.get_currentColumn(),d.get_currentRow());if(e.x==f.x&&e.y==f.y)throw"FROM AND TO ARE THE SAME!";e=Z.getMovementDirectionBetween(e,f);this.checkIfCanMoveTo(f,e)&&(f=0.25*D.getDistanceBetween(this._tileObject.get_tileAttachedTo(),d),this._tileObject.x.animateTo(d.x._value,f),this._tileObject.y.animateTo(d.y._value,f),this.handlePushingAfterMovement(d),
this._isMoving=!0,null!=this._tileObject.get_tileAttachedTo()&&this._tileObject.get_tileAttachedTo().removeResident(this._tileObject),d.addResident(this._tileObject,!1),sa.callWithDelay(this.owner,new ma(Q(this,this.onFinishedMoving)),f))}}},checkIfCanMoveTo:function(a,b){if(null==b)throw"MOVE DIRECTION SHOULD NOT BE NULL!";var d=k.gameManager.get_gameScene().get_tileMap().getTileAt(a.x|0,a.y|0);if(null==d)return!1;for(d=d.get_residentList().iterator();d.hasNext();){var e=d.next();if(!v.__instanceof(e,
K))return this.checkIfCanMoveTo(Z.adjustPositionWithDirection(a,b),b)}return!0},pushContentsAtTile:function(a,b){var d=D.getDistanceBetween(this._tileObject.get_tileAttachedTo(),a)-1;sa.callWithDelay(this.owner,new ma(function(){for(var d=a.get_residentList().iterator();d.hasNext();){var g=d.next();v.__instanceof(g,K)||g.get_movementManager().move(b)}}),0.25*d)},onFinishedMoving:function(){this._isMoving=!1;this.handleOnPlateStep();k.gameManager.get_turnManager().checkIfFinishedMovement()&&(this._tileObject.throwDirection=
null)},handlePushingAfterMovement:function(a){var b=new aa(this._tileObject.get_tileAttachedTo().get_currentColumn(),this._tileObject.get_tileAttachedTo().get_currentRow()),d=new aa(a.get_currentColumn(),a.get_currentRow()),b=Z.getMovementDirectionBetween(b,d);this.pushContentsAtTile(a,b)},handleOnPlateStep:function(){var a=this._tileObject.get_tileAttachedTo().getCurrentPlate();if(null!=a)a.onSteppedOn(this._tileObject)},get_isMoving:function(){return this._isMoving},__class__:Rb});var Sb=function(){this._highestMultiplierCount=
0;this._currentMultiplierCount=1};d["game.managers.MultiplierManager"]=Sb;Sb.__name__=!0;Sb.__super__=s;Sb.prototype=o(s.prototype,{get_name:function(){return"MultiplierManager_8"},increaseMultiplierCount:function(a){null==a&&(a=1);this.set__currentMultiplierCount(this._currentMultiplierCount+a)},resetMultiplierCount:function(){this.set__currentMultiplierCount(1)},logCurrentMultiplier:function(){this.handleCheckingOfHighestMultiplierCount(this._currentMultiplierCount)},handleCheckingOfHighestMultiplierCount:function(a){a>
this._highestMultiplierCount&&(this._highestMultiplierCount=a)},get_currentMultiplierCount:function(){return this._currentMultiplierCount},get_highestMultiplierCount:function(){return this._highestMultiplierCount},set__currentMultiplierCount:function(a){this._currentMultiplierCount=a;k.gameManager.get_gameScene().get_multiplierLabel().setMultiplierValueTo(a);return this._currentMultiplierCount},__class__:Sb});var J=d["game.managers.TurnMode"]={__ename__:!0,__constructs__:["TILE_PLACEMENT","CHAR_MOVEMENT"]};
J.TILE_PLACEMENT=["TILE_PLACEMENT",0];J.TILE_PLACEMENT.toString=f;J.TILE_PLACEMENT.__enum__=J;J.CHAR_MOVEMENT=["CHAR_MOVEMENT",1];J.CHAR_MOVEMENT.toString=f;J.CHAR_MOVEMENT.__enum__=J;J.__empty_constructs__=[J.TILE_PLACEMENT,J.CHAR_MOVEMENT];var Nb=function(){this._currentTurnMode=J.TILE_PLACEMENT;this._currentCharacterIndex=0;this.set__turnsLeft(10)};d["game.managers.TurnManager"]=Nb;Nb.__name__=!0;Nb.__super__=s;Nb.prototype=o(s.prototype,{get_name:function(){return"TurnManager_6"},getCurrentCharacter:function(){return this._characterList[this._currentCharacterIndex]},
setup:function(a){if(0>=a.length)throw"Character list should not be empty!";this._characterList=a;this._currentCharacterIndex=0},checkIfFinishedMovement:function(){for(var a=k.gameManager.get_objectList().iterator();a.hasNext();)if(a.next().get_movementManager().get_isMoving())return!1;this.goToNextPlayer();return!0},goToNextPlayer:function(){var a=k.gameManager;this._currentCharacterIndex++;this._currentCharacterIndex>=this._characterList.length&&(this._currentCharacterIndex=0);this.resetMode();
this.decreaseNumberOFTurnsLeft();if(this.isThereNoMoreTurnsLeft())a.endGame();else{var b=a.get_coinSpawner();b.get_currentCoin().isPickedUp&&b.moveCoinToRandomPosition();a.get_player().get_multiplierManager().resetMultiplierCount();a.get_dimensionManager().moveToNextDimension();null==a.get_gameScene().get_currentCardHolder().getCurrentTileObjectCard()?a.get_player().pickRandomTileCard():(k.gameManager.get_gameScene().get_currentCardHolder().informCurrentCardOfNewOwner(),a.get_gameScene().get_currentCardHolder().show());
sa.callWithDelay(this.owner,new ma((Gc=a.get_directionalPlateSpawner(),Q(Gc,Gc.onTurnChanged))),0.5);y.playAudio("audio/sfx/shift_dimension",0.25)}},moveToNextMode:function(){switch(this._currentTurnMode[1]){case 0:this.set__currentTurnMode(J.CHAR_MOVEMENT);break;case 1:this.set__currentTurnMode(J.TILE_PLACEMENT)}},onAdded:function(){s.prototype.onAdded.call(this);this.updateTurnModeGUILabel()},updateTurnModeGUILabel:function(){k.gameManager.get_gameScene().get_instructionsLabel().updateLabel(this._currentTurnMode)},
resetMode:function(){this.set__currentTurnMode(J.TILE_PLACEMENT);this.updateTurnModeGUILabel()},decreaseNumberOFTurnsLeft:function(){this.set__turnsLeft(this._turnsLeft-1)},isThereNoMoreTurnsLeft:function(){return 0>=this._turnsLeft},get_currentTurnMode:function(){return this._currentTurnMode},set__currentTurnMode:function(a){this._currentTurnMode=a;this.updateTurnModeGUILabel();return this._currentTurnMode},get_characterList:function(){return this._characterList},set__turnsLeft:function(a){k.gameManager.get_gameScene().get_turnsLeftLabel().setValueTo(a);
return this._turnsLeft=a},__class__:Nb});var Tb=function(a,b){ba.call(this,16777215,55,55);this.centerAnchor();this._currentColumn=a;this._currentRow=b;this._residentList=new cb};d["game.map.Tile"]=Tb;Tb.__name__=!0;Tb.__super__=ba;Tb.prototype=o(ba.prototype,{addResident:function(a,b){null==b&&(b=!0);this._residentList.push(a);a.attachToTile(this);b&&a.setPositionTo(this.x._value,this.y._value)},removeResident:function(a){a.removeFromAttachedTile();this._residentList.remove(a)},isEmpty:function(){return 0>=
this._residentList.length},getNonPlateObject:function(){for(var a=this._residentList.iterator();a.hasNext();){var b=a.next();if(!v.__instanceof(b,K))return b}return null},getCurrentPlate:function(){return 0>=this._residentList.length?null:k.gameManager.get_gameScene().get_tileMap().getFirstPlateAt(this.get_currentColumn(),this.get_currentRow())},onAdded:function(){ba.prototype.onAdded.call(this);this.setupPositioning();this.setupPointerListener()},setupPositioning:function(){this.x.set__(55*this._currentColumn+
5*this._currentColumn+27.5);this.y.set__(55*this._currentRow+5*this._currentRow+2.5)},setupPointerListener:function(){this.get_pointerUp().connect(Q(this,this.onTilePressed))},onTilePressed:function(){if(this.isEmpty())k.gameManager.get_inputManager().onTilePressed(this)},get_currentColumn:function(){return this._currentColumn},get_currentRow:function(){return this._currentRow},get_residentList:function(){return this._residentList},__class__:Tb});var Ub=function(a,b){m.call(this);this._colCount=a;
this._rowCount=b;this.setupTileMapArray()};d["game.map.TileMap"]=Ub;Ub.__name__=!0;Ub.__super__=m;Ub.prototype=o(m.prototype,{getTileAt:function(a,b){return D.isOutsideColumnBoundary(a)||D.isOutsideRowBoundary(b)?null:this._tileArray[a][b]},getFirstPlateAt:function(a,b){var d=this.getTileAt(a,b);if(null!=d)for(d=d.get_residentList().iterator();d.hasNext();){var e=d.next();if(v.__instanceof(e,K))return v.__cast(e,K)}return null},addTileObjectAt:function(a,b,d){this.getTileAt(b,d).addResident(a);v.__instanceof(a,
$a)?k.gameManager.get_gameScene().get_tileMap()._charactersLayer.owner.addChild((new n).add(a)):k.gameManager.get_gameScene().get_tileMap().get_objectsLayer().owner.addChild((new n).add(a))},switchDimension:function(a){this.playSwitchDimensionAnimation(a==U.GREEN?"backgrounds/map_bg_green":"backgrounds/map_bg_pink")},shake:function(){y.playAudio("audio/sfx/shake");this._shakeScript.run(new Cb(8,8,0.25))},onAdded:function(){m.prototype.onAdded.call(this);this.setupShakeScript();this.setupBackground();
this.setupLayers();this.setupTiles();this.setupPositioning();this.playEnteringAnimation()},setupShakeScript:function(){this._shakeScript=new Ja;this.owner.add(this._shakeScript)},setupLayers:function(){this._tilesLayer=new m;this.owner.addChild((new n).add(this._tilesLayer));this._objectsLayer=new m;this.owner.addChild((new n).add(this._objectsLayer));this._charactersLayer=new m;this.owner.addChild((new n).add(this._charactersLayer))},setupBackground:function(){this._bgSprite=new R(k.assetPack.getTexture("backgrounds/map_bg_green"));
this.owner.addChild((new n).add(this._bgSprite));this._bgSprite.centerAnchor()},setupTileMapArray:function(){this._tileArray=[];for(var a=0,b=this._colCount;a<b;)this._tileArray[a++]=[]},setupTiles:function(){for(var a=0,b=this._colCount;a<b;)for(var d=a++,e=0,f=this._rowCount;e<f;){var h=e++,j=new Tb(d,h);this._tilesLayer.owner.addChild((new n).add(j));this._tileArray[d][h]=j}},setupPositioning:function(){this.x.set__(j.get_width()/2-this.getTileMapWidth()/2);this.y.set__(j.get_height()/2-this.getTileMapHeight()/
2);this._bgSprite.x.set__(this.getTileMapWidth()/2);this._bgSprite.y.set__(this.getTileMapHeight()/2)},playSwitchDimensionAnimation:function(a){var b=this;this.alpha.animateTo(0,0.25);sa.callWithDelay(this.owner,new ma(function(){b._bgSprite.texture=k.assetPack.getTexture(a);b.alpha.animateTo(1,0.25)}),0.25)},playEnteringAnimation:function(){this.y.set__(j.get_height()+this.getTileMapHeight());this.y.animateTo(j.get_height()/2-this.getTileMapHeight()/2,1.5,oa.backOut)},getTileMapWidth:function(){return 55*
this._colCount+5*this._colCount},getTileMapHeight:function(){return 55*this._rowCount+5*this._rowCount},get_objectsLayer:function(){return this._objectsLayer},get_rowCount:function(){return this._rowCount},get_colCount:function(){return this._colCount},__class__:Ub});var fa=d["game.objects.CharacterColor"]={__ename__:!0,__constructs__:["GREEN","PINK"]};fa.GREEN=["GREEN",0];fa.GREEN.toString=f;fa.GREEN.__enum__=fa;fa.PINK=["PINK",1];fa.PINK.toString=f;fa.PINK.__enum__=fa;fa.__empty_constructs__=[fa.GREEN,
fa.PINK];var na=function(a){null==a&&(a="tile_objects/default");R.call(this,k.assetPack.getTexture(a));this.centerAnchor()};d["game.objects.TileObject"]=na;na.__name__=!0;na.__super__=R;na.prototype=o(R.prototype,{attachToTile:function(a){this._tileAttachedTo=a},removeFromAttachedTile:function(){this._tileAttachedTo=null},setPositionTo:function(a,b){this.x.set__(a);this.y.set__(b)},onAdded:function(){R.prototype.onAdded.call(this);this._movementManager=new Rb(this);this.owner.addChild((new n).add(this._movementManager));
k.gameManager.get_objectList().push(this)},get_tileAttachedTo:function(){return this._tileAttachedTo},get_movementManager:function(){return this._movementManager},playSpawningAnimation:function(){this.scaleX.set__(0);this.scaleY.set__(0);this.scaleX.animateTo(1,1,oa.backOut);this.scaleY.animateTo(1,1,oa.backOut)},dispose:function(){null!=this._tileAttachedTo&&this._tileAttachedTo.removeResident(this);R.prototype.dispose.call(this)},onRemoved:function(){R.prototype.onRemoved.call(this);k.gameManager.get_objectList().remove(this)},
__class__:na});var $a=function(a){this.setupCharacterColor(a);a="tile_objects/characters/"+this.getCharacterColorString()+"_character";na.call(this,a)};d["game.objects.Character"]=$a;$a.__name__=!0;$a.__super__=na;$a.prototype=o(na.prototype,{checkIfPartOfCurrentDimension:function(){k.gameManager.get_turnManager().getCurrentCharacter()!=this?this.applyDimensionInvisibility():this.applyDimensionVisibility()},getCharacterColorString:function(){return A.string(this._characterColor).toLowerCase()},setupCharacterColor:function(a){switch(a){case 0:this._characterColor=
fa.GREEN;break;case 1:this._characterColor=fa.PINK}},applyDimensionVisibility:function(){this.alpha.set__(1)},applyDimensionInvisibility:function(){this.alpha.set__(0.25)},__class__:$a});var K=function(a){this._isScheduledForDisposal=!1;na.call(this,a);this.onDestroyed=new ka};d["game.objects.plates.Plate"]=K;K.__name__=!0;K.__super__=na;K.prototype=o(na.prototype,{show:function(){this.set_visible(!0);this.alpha.set__(1)},onSteppedOn:function(a){null!=a.throwDirection&&this.continueThrowingStepper(a);
this.fadeOutAndDestroy();this.determineScoreGained()},determineScoreGained:function(){},continueThrowingStepper:function(a){za.throwToDirection(a,a.throwDirection)},get_isScheduledForDisposal:function(){return this._isScheduledForDisposal},playHideAnimation:function(){this.set_visible(!1);this._tileAttachedTo.removeResident(this);this.alpha.animateTo(0,0.4)},fadeOutAndDestroy:function(){this._isScheduledForDisposal=!0;this.playHideAnimation();sa.callWithDelay(this.owner,new ma(Q(this,this.dispose)),
0.4)},onRemoved:function(){na.prototype.onRemoved.call(this);null!=this.onDestroyed&&this.onDestroyed.emit();this.onDestroyed=null},__class__:K});var Vb=function(){K.call(this,"tile_objects/coin_plate");this._steppedOnSignal=new ka};d["game.objects.plates.CoinPlate"]=Vb;Vb.__name__=!0;Vb.__super__=K;Vb.prototype=o(K.prototype,{onSteppedOn:function(a){this.increaseScore();null!=a.throwDirection&&this.continueThrowingStepper(a);this.playHideAnimation();this._steppedOnSignal.emit();this.isPickedUp=!0;
y.playAudio("audio/sfx/coin",1)},increaseScore:function(){var a=k.gameManager.get_player().get_multiplierManager(),b=a.get_currentMultiplierCount();k.gameManager.get_player().get_currentScore().increaseScore(10*b);a.logCurrentMultiplier()},onRemoved:function(){K.prototype.onRemoved.call(this);this._steppedOnSignal=null},__class__:Vb});var ta=function(a){null==a&&(a=Z.getRandomDirection());this._moveDirection=a;K.call(this,"tile_objects/directional_plates/blue_plate")};d["game.objects.plates.DirectionalPlate"]=
ta;ta.__name__=!0;ta.__super__=K;ta.prototype=o(K.prototype,{setCharacterOwner:function(a){this._characterOwner=a;this.updateColor()},removeCharacterOwner:function(){this._characterOwner=null},onAdded:function(){K.prototype.onAdded.call(this);this.rotateDependingOnDirection();this.setupPointerListener()},onSteppedOn:function(a){y.playAudio("audio/sfx/bounce");za.throwToDirection(a,this.get_moveDirection());K.prototype.onSteppedOn.call(this,a)},rotateDependingOnDirection:function(){this._moveDirection==
p.RIGHT?this.rotation.set__(90):this._moveDirection==p.DOWN?this.rotation.set__(180):this._moveDirection==p.LEFT&&this.rotation.set__(270)},setupPointerListener:function(){this.get_pointerUp().connect(Q(this,this.onTilePressed))},onTilePressed:function(){k.gameManager.get_inputManager().onDirectionalPlatePressed(this)},isPartOfCurrentDimension:function(){return null==this._characterOwner||k.gameManager.get_turnManager().getCurrentCharacter()==this._characterOwner?!0:!1},determineScoreGained:function(){this.isPartOfCurrentDimension()?
k.gameManager.get_player().get_multiplierManager().increaseMultiplierCount():(k.gameManager.onSteppedOnIncorrectTile(),k.gameManager.get_player().get_multiplierManager().resetMultiplierCount())},continueThrowingStepper:function(){},updateColor:function(){var a="tile_objects/directional_plates/"+this._characterOwner.getCharacterColorString()+"_plate";this.texture=k.assetPack.getTexture(a)},get_moveDirection:function(){return this._moveDirection},__class__:ta});var Wb=function(){this._scoreValue=0};
d["game.player.CurrentScore"]=Wb;Wb.__name__=!0;Wb.__super__=s;Wb.prototype=o(s.prototype,{get_name:function(){return"CurrentScore_10"},setScore:function(a){null==a&&(a=1);this.set__scoreValue(a)},increaseScore:function(a){null==a&&(a=1);this.setScore(this._scoreValue+a)},getScore:function(){return this._scoreValue},onAdded:function(){s.prototype.onAdded.call(this);this.resetScore()},resetScore:function(){this.setScore(0)},set__scoreValue:function(a){this._scoreValue=a;k.gameManager.get_gameScene().get_scoreLabel().setScoreText(A.string(this._scoreValue));
return this._scoreValue},__class__:Wb});var Mb=function(){};d["game.player.Player"]=Mb;Mb.__name__=!0;Mb.__super__=s;Mb.prototype=o(s.prototype,{get_name:function(){return"Player_4"},pickRandomTileCard:function(){var a=new ta;k.gameManager.get_gameScene().get_currentCardHolder().setCurrentTileObjectCard(a);a.setCharacterOwner(k.gameManager.get_turnManager().getCurrentCharacter())},retrieveCurrentTileCard:function(){var a=k.gameManager.get_gameScene().get_currentCardHolder(),b=a.getCurrentTileObjectCard();
a.removeCurrentTileObjectCard();a.hide();return b},onAdded:function(){s.prototype.onAdded.call(this);this.setupComboManager();this.setupCurrentScore()},setupComboManager:function(){this._multiplierManager=new Sb;this.owner.addChild((new n).add(this._multiplierManager))},setupCurrentScore:function(){this._currentScore=new Wb;this.owner.addChild((new n).add(this._currentScore))},get_currentScore:function(){return this._currentScore},get_multiplierManager:function(){return this._multiplierManager},__class__:Mb});
var Xb=function(){E.call(this)};d["game.scenes.GameScene"]=Xb;Xb.__name__=!0;Xb.__super__=E;Xb.prototype=o(E.prototype,{onAdded:function(){E.prototype.onAdded.call(this);this.setupGameManager();this.setupLayers();this.setupBackground();this.setupTileMap();this.setupGUI();k.gameManager.setupGame();this.playEnteringAnimation()},setupLayers:function(){this._bgLayer=new m;this.owner.addChild((new n).add(this._bgLayer));this._mainLayer=new m;this.owner.addChild((new n).add(this._mainLayer));this._fgLayer=
new m;this.owner.addChild((new n).add(this._fgLayer))},setupBackground:function(){var a=k.assetPack.getTexture("backgrounds/bg_gradient"),a=new Ga(a,j.get_width(),j.get_height());this._bgLayer.owner.addChild((new n).add(a));a=new R(k.assetPack.getTexture("backgrounds/cloud_bg"));a.set_pointerEnabled(!1);this._fgLayer.owner.addChild((new n).add(a))},setupTileMap:function(){this._tileMap=new Ub(5,5);this._mainLayer.owner.addChild((new n).add(this._tileMap))},setupGameManager:function(){k.gameManager=
new tc(this)},setupGUI:function(){var a=new R(k.assetPack.getTexture("gui/gui_bg"));this._fgLayer.owner.addChild((new n).add(a));a.anchorX.set__(a.getNaturalWidth()/2);a.x.set__(j.get_width()/2);a.set_pointerEnabled(!1);this._instructionsLabel=new Gb;this._fgLayer.owner.addChild((new n).add(this._instructionsLabel));this._currentCardHolder=new Fb;this._fgLayer.owner.addChild((new n).add(this._currentCardHolder));this._scoreLabel=new Ib;this._fgLayer.owner.addChild((new n).add(this._scoreLabel));this._multiplierLabel=
new Hb;this._fgLayer.owner.addChild((new n).add(this._multiplierLabel));this._turnsLeftLabel=new Jb;this._fgLayer.owner.addChild((new n).add(this._turnsLeftLabel))},playEnteringAnimation:function(){this._fgLayer.alpha.set__(0);this._fgLayer.alpha.animateTo(1,1)},get_tileMap:function(){return this._tileMap},get_instructionsLabel:function(){return this._instructionsLabel},get_currentCardHolder:function(){return this._currentCardHolder},get_scoreLabel:function(){return this._scoreLabel},get_multiplierLabel:function(){return this._multiplierLabel},
get_turnsLeftLabel:function(){return this._turnsLeftLabel},__class__:Xb});var Eb=function(a){E.call(this);this._preloaderPack=a};d["game.scenes.LoadingScene"]=Eb;Eb.__name__=!0;Eb.__super__=E;Eb.prototype=o(E.prototype,{onAdded:function(){E.prototype.onAdded.call(this);this.setupLoadingScript();this.setupBackground();this.setupLoadingLabel();this.startLoadingAssets()},setupLoadingScript:function(){this._loadingScript=new Ja;this.owner.addChild((new n).add(this._loadingScript))},setupBackground:function(){var a=
this._preloaderPack.getTexture("bg_gradient"),a=new Ga(a,j.get_width(),j.get_height());this.owner.addChild((new n).add(a))},setupLoadingLabel:function(){this._loadingLabel=new S(new va(this._preloaderPack,"loading_font"),"LOADING...");this._loadingLabel.x.set__(j.get_width()/2);this._loadingLabel.y.set__(j.get_height()/2);this._loadingLabel.centerAnchor();this.owner.addChild((new n).add(this._loadingLabel));var a=new Za;a.add(new Ya(this._loadingLabel.alpha,0,1));a.add(new Ya(this._loadingLabel.alpha,
1,1));this._loadingScript.run(new Ab(a))},startLoadingAssets:function(){var a=V.fromAssets("game");r._platform.loadAssetPack(a).get(Q(this,this.onSuccess))},onSuccess:function(a){k.assetPack=a;G.setup(a);y.setup();X.switchScene(new ab)},__class__:Eb});var ab=function(){E.call(this)};d["game.scenes.MainMenu"]=ab;ab.__name__=!0;ab.__super__=E;ab.prototype=o(E.prototype,{onAdded:function(){E.prototype.onAdded.call(this);this.setupBackground();this.setupTitleLabel();this.setupStartLabel();this.setupPeekingLand();
this.setupCreditsLabel();this.setupInputListeners();this.playBGMMusic();this.playEnteringAnimation()},setupBackground:function(){var a=k.assetPack.getTexture("backgrounds/bg_gradient"),a=new Ga(a,j.get_width(),j.get_height());this.owner.addChild((new n).add(a));a=new R(k.assetPack.getTexture("backgrounds/cloud_bg"));a.set_pointerEnabled(!1);this.owner.addChild((new n).add(a))},setupTitleLabel:function(){this._titleLabelBG=new ba(0,j.get_width(),100);this.owner.addChild((new n).add(this._titleLabelBG));
this._titleLabelBG.centerAnchor();this._titleLabelBG.x.set__(j.get_width()/2);this._titleLabelBG.y.set__(j.get_height()/2-50);var a=new S(G.getFont("fonts/chubby_cheeks_64"),"THIS WAY!");this._titleLabelBG.owner.addChild((new n).add(a));a.centerAnchor();a.x.set__(this._titleLabelBG.getNaturalWidth()/2);a.y.set__(this._titleLabelBG.getNaturalHeight()/2)},setupStartLabel:function(){this._startLabel=new S(G.getFont("fonts/chubby_cheeks_32"),"Press anywhere to start");this.owner.addChild((new n).add(this._startLabel));
this._startLabel.centerAnchor();this._startLabel.x.set__(j.get_width()/2);this._startLabel.y.set__(j.get_height()/2+100)},setupPeekingLand:function(){this._peekingLand=new R(k.assetPack.getTexture("scenes/main_menu/peeking_land"));this.owner.addChild((new n).add(this._peekingLand));this._peekingLand.centerAnchor();this._peekingLand.anchorY.set__(this._peekingLand.getNaturalHeight());this._peekingLand.x.set__(j.get_width()/2);this._peekingLand.y.set__(j.get_height())},setupInputListeners:function(){r._platform.getPointer().down.connect(Q(this,
this.onInputDetected)).once()},setupCreditsLabel:function(){this._creditsLabel=new S(G.getFont("fonts/chubby_cheeks_32"),"A Ludum Dare Jam game by AccidentalRebel");this._peekingLand.owner.addChild((new n).add(this._creditsLabel));this._creditsLabel.setScale(0.8);this._creditsLabel.centerAnchor();this._creditsLabel.x.set__(this._peekingLand.getNaturalWidth()/2);this._creditsLabel.y.set__(100)},playBGMMusic:function(){y.loopAudio("audio/bgm/i_am_the_rock",!0)},playEnteringAnimation:function(){this._titleLabelBG.alpha.set__(0);
this._titleLabelBG.alpha.animateTo(1,0.5);this._startLabel.alpha.set__(0);this._startLabel.alpha.animateTo(1,0.5);this._peekingLand.y.set__(j.get_height()+this._peekingLand.getNaturalHeight());this._peekingLand.y.animateTo(j.get_height()+0.6*this._peekingLand.getNaturalHeight(),0.5,oa.backOut)},playExitAnimation:function(){this._titleLabelBG.alpha.animateTo(0,0.5);this._startLabel.alpha.animateTo(0,0.5);this._peekingLand.y.animateTo(j.get_height()+this._peekingLand.getNaturalHeight(),0.5,oa.backIn)},
onInputDetected:function(){this.playExitAnimation();sa.callWithDelay(this.owner,new ma(function(){X.pushScene(new Xb)}),0.5)},__class__:ab});var Lb=function(a,b){E.call(this,!1);this._currentScore=a;this._highestMultiplier=b};d["game.scenes.PostGameScene"]=Lb;Lb.__name__=!0;Lb.__super__=E;Lb.prototype=o(E.prototype,{onAdded:function(){E.prototype.onAdded.call(this);this.setupSceneSprite();this.setupFadedBackground();this.setupWindowBackground();this.setupScoreLabel();this.setupMultiplierLabel();this.setupPressAnywhereLabel();
this.setupInputListeners();this.playEnterAnimation()},setupWindowBackground:function(){this._windowBackground=new ba(16777215,350,200);this._sceneSprite.owner.addChild((new n).add(this._windowBackground));this._windowBackground.x.set__(j.get_width()/2);this._windowBackground.y.set__(j.get_height()/2);this._windowBackground.centerAnchor()},setupScoreLabel:function(){var a=new S(G.getFont("fonts/chubby_cheeks_64"),"Score: "+this._currentScore);this._windowBackground.owner.addChild((new n).add(a));a.centerAnchor();
a.x.set__(this._windowBackground.getNaturalWidth()/2);a.y.set__(this._windowBackground.getNaturalHeight()/2-50)},setupMultiplierLabel:function(){var a=new S(G.getFont("fonts/chubby_cheeks_32"),"Highest Multiplier: "+this._highestMultiplier);this._windowBackground.owner.addChild((new n).add(a));a.centerAnchor();a.x.set__(this._windowBackground.getNaturalWidth()/2);a.y.set__(this._windowBackground.getNaturalHeight()/2-5)},setupPressAnywhereLabel:function(){var a=new S(G.getFont("fonts/chubby_cheeks_32"),
"Press anywhere to continue");this._windowBackground.owner.addChild((new n).add(a));a.setScale(0.75);a.centerAnchor();a.x.set__(this._windowBackground.getNaturalWidth()/2);a.y.set__(this._windowBackground.getNaturalHeight()/2+60)},setupSceneSprite:function(){this._sceneSprite=new m;this.owner.addChild((new n).add(this._sceneSprite))},setupFadedBackground:function(){var a=new ba(0,j.get_width(),j.get_height());this._sceneSprite.owner.addChild((new n).add(a));a.alpha.set__(0.6)},setupInputListeners:function(){r._platform.getPointer().down.connect(Q(this,
this.onInputDetected)).once()},playEnterAnimation:function(){this._sceneSprite.alpha.set__(0);this._sceneSprite.alpha.animateTo(1,0.5)},onInputDetected:function(){X.switchScene(new ab)},__class__:Lb});var Pb=function(){};d["game.spawners.CoinSpawner"]=Pb;Pb.__name__=!0;Pb.__super__=s;Pb.prototype=o(s.prototype,{get_name:function(){return"CoinSpawner_7"},createCoin:function(){this._currentCoin=new Vb;k.gameManager.get_gameScene().get_tileMap().addTileObjectAt(this._currentCoin,0,0)},moveCoinToRandomPosition:function(){if(null!=
this._currentCoin){var a=D.getRandomEmptyTile();if(null!=a){var b=a.get_currentColumn(),a=a.get_currentRow();null!=this._currentCoin.get_tileAttachedTo()&&this._currentCoin.get_tileAttachedTo().removeResident(this._currentCoin);this._currentCoin.show();this._currentCoin.isPickedUp=!1;k.gameManager.get_gameScene().get_tileMap().getTileAt(b,a).addResident(this._currentCoin,!0)}}},get_currentCoin:function(){return this._currentCoin},__class__:Pb});var Qb=function(){};d["game.spawners.DirectionalPlateSpawner"]=
Qb;Qb.__name__=!0;Qb.__super__=s;Qb.prototype=o(s.prototype,{get_name:function(){return"DirectionalPlateSpawner_1"},spawnADirectionalPlateAtRandom:function(a){null==a&&(a=1);for(var b=0;b<a;){b++;var d=D.getRandomEmptyTile();if(null==d)break;var e=d.get_currentColumn(),d=d.get_currentRow(),f=new ta;k.gameManager.get_gameScene().get_tileMap().addTileObjectAt(f,e,d);f.playSpawningAnimation()}},onTurnChanged:function(){this.spawnADirectionalPlateAtRandom(2);y.playAudio("audio/sfx/spawn",0.25)},__class__:Qb});
var Z=function(){};d["game.utils.MoveDirectionUtils"]=Z;Z.__name__=!0;Z.adjustPositionWithDirection=function(a,b,d){null==d&&(d=1);a=new aa(a.x,a.y);b==p.UP?a.y-=d:b==p.RIGHT?a.x+=d:b==p.DOWN?a.y+=d:b==p.LEFT&&(a.x-=d);return a};Z.getMovementDirectionBetween=function(a,b){if(a.x==b.x){if(a.y<b.y)return p.DOWN;if(a.y>b.y)return p.UP}else if(a.y==b.y){if(a.x<b.x)return p.RIGHT;if(a.x>b.x)return p.LEFT}return null};Z.getOppositeDirection=function(a){return a==p.UP?p.DOWN:a==p.RIGHT?p.LEFT:a==p.DOWN?
p.UP:p.RIGHT};Z.getRandomDirection=function(){var a=db.allEnums(p),b=a.length,b=A["int"](Math.random()*b);return a[b]};var za=function(){};d["game.utils.ThrowUtils"]=za;za.__name__=!0;za.throwToDirection=function(a,b){var d=za.getThrowTargetTile(a,b);null==d||d==a.get_tileAttachedTo()||(d=new aa(d.get_currentColumn(),d.get_currentRow()),a.get_movementManager().moveTo(d.x|0,d.y|0),a.throwDirection=b)};za.getThrowTargetTile=function(a,b){var d=a.get_tileAttachedTo();k.gameManager.get_gameScene().get_tileMap();
d=D.getFarthestTileAtDirection(d.get_currentColumn(),d.get_currentRow(),b);if(null==d.getCurrentPlate()){var e=d.getNonPlateObject();if(null!=e){var f=new aa(d.get_currentColumn(),d.get_currentRow()),h=Z.adjustPositionWithDirection(f,b);e.get_movementManager().checkIfCanMoveTo(h,b)||(d=za.getTargetFromBackwards(d,f,b))}}return d};za.getTargetFromBackwards=function(a,b,d){a=k.gameManager.get_gameScene().get_tileMap();d=Z.getOppositeDirection(d);b=Z.adjustPositionWithDirection(b,d);return a=a.getTileAt(b.x|
0,b.y|0)};var D=function(){};d["game.utils.TileMapUtils"]=D;D.__name__=!0;D.getDistanceBetween=function(a,b){var d=Math.abs(a.get_currentColumn()-b.get_currentColumn()),e=Math.abs(a.get_currentRow()-b.get_currentRow());return A["int"](Math.max(d,e))};D.getRandomEmptyTile=function(){for(var a=0;;){var b=k.gameManager.get_gameScene().get_tileMap(),d=A["int"](Math.random()*b.get_colCount()),e=A["int"](Math.random()*b.get_rowCount()),b=b.getTileAt(d,e);if(b.isEmpty())return b;if(100<a)break;a++}return null};
D.getFarthestTileAtDirection=function(a,b,d){a=new aa(a,b);a=D.recursiveCheckForObstacles(a,d);return k.gameManager.get_gameScene().get_tileMap().getTileAt(a.x|0,a.y|0)};D.recursiveCheckForObstacles=function(a,b){var d=k.gameManager.get_gameScene().get_tileMap(),e=Z.adjustPositionWithDirection(a,b);return 0>=a.y&&b==p.UP||a.y>=d.get_rowCount()-1&&b==p.DOWN||0>=a.x&&b==p.LEFT||a.x>=d.get_colCount()-1&&b==p.RIGHT?a:D.isThereAPlate(e.x|0,e.y|0)||D.isThereAnObstacle(e,b)?e:D.recursiveCheckForObstacles(e,
b)};D.isThereAPlate=function(a,b){var d=k.gameManager.get_gameScene().get_tileMap().getFirstPlateAt(a,b);return null!=d&&!d.get_isScheduledForDisposal()?!0:!1};D.isThereAnObstacle=function(a){a=k.gameManager.get_gameScene().get_tileMap().getTileAt(a.x|0,a.y|0);return null==a||a.isEmpty()?!1:!0};D.isOutsideRowBoundary=function(a,b){null==b&&(b=!0);return b?0>a||a>=k.gameManager.get_gameScene().get_tileMap().get_rowCount():0>=a||a>=k.gameManager.get_gameScene().get_tileMap().get_rowCount()-1};D.isOutsideColumnBoundary=
function(a,b){null==b&&(b=!0);return b?0>a||a>=k.gameManager.get_gameScene().get_tileMap().get_colCount():0>=a||a>=k.gameManager.get_gameScene().get_tileMap().get_colCount()-1};var ia=function(){this.h={}};d["haxe.ds.IntMap"]=ia;ia.__name__=!0;ia.__interfaces__=[uc];ia.prototype={set:function(a,b){this.h[a]=b},get:function(a){return this.h[a]},exists:function(a){return this.h.hasOwnProperty(a)},remove:function(a){if(!this.h.hasOwnProperty(a))return!1;delete this.h[a];return!0},__class__:ia};var ja=
function(){this.h={}};d["haxe.ds.StringMap"]=ja;ja.__name__=!0;ja.__interfaces__=[uc];ja.prototype={set:function(a,b){this.h["$"+a]=b},get:function(a){return this.h["$"+a]},remove:function(a){a="$"+a;if(!this.h.hasOwnProperty(a))return!1;delete this.h[a];return!0},keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b.substr(1));return z.iter(a)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){return this.ref["$"+
this.it.next()]}}},__class__:ja};var Hc=function(){};d["haxe.io.Bytes"]=Hc;Hc.__name__=!0;var Dc=function(){};d["haxe.io.Eof"]=Dc;Dc.__name__=!0;Dc.prototype={toString:function(){return"Eof"},__class__:Dc};var xc=function(){};d["haxe.rtti.Meta"]=xc;xc.__name__=!0;xc.getType=function(a){a=a.__meta__;return null==a||null==a.obj?{}:a.obj};var v=function(){};d["js.Boot"]=v;v.__name__=!0;v.getClass=function(a){return a instanceof Array&&null==a.__enum__?Array:a.__class__};v.__string_rec=function(a,b){if(null==
a)return"null";if(5<=b.length)return"<...>";var d=typeof a;if("function"==d&&(a.__name__||a.__ename__))d="object";switch(d){case "object":if(a instanceof Array){if(a.__enum__){if(2==a.length)return a[0];for(var d=a[0]+"(",b=b+"\t",e=2,f=a.length;e<f;)var h=e++,d=2!=h?d+(","+v.__string_rec(a[h],b)):d+v.__string_rec(a[h],b);return d+")"}d=a.length;e="[";b+="\t";for(f=0;f<d;)h=f++,e+=(0<h?",":"")+v.__string_rec(a[h],b);return e+"]"}try{e=a.toString}catch(j){return"???"}if(null!=e&&e!=Object.toString&&
(d=a.toString(),"[object Object]"!=d))return d;d=null;e="{\n";b+="\t";f=null!=a.hasOwnProperty;for(d in a)if(!f||a.hasOwnProperty(d))"prototype"==d||"__class__"==d||"__super__"==d||"__interfaces__"==d||"__properties__"==d||(2!=e.length&&(e+=", \n"),e+=b+d+" : "+v.__string_rec(a[d],b));b=b.substring(1);return e+("\n"+b+"}");case "function":return"<function>";case "string":return a;default:return""+a}};v.__interfLoop=function(a,b){if(null==a)return!1;if(a==b)return!0;var d=a.__interfaces__;if(null!=
d)for(var e=0,f=d.length;e<f;){var h=e++,h=d[h];if(h==b||v.__interfLoop(h,b))return!0}return v.__interfLoop(a.__super__,b)};v.__instanceof=function(a,b){if(null==b)return!1;switch(b){case Lc:return(a|0)===a;case Ic:return"number"==typeof a;case Jc:return"boolean"==typeof a;case String:return"string"==typeof a;case Array:return a instanceof Array&&null==a.__enum__;case Mc:return!0;default:if(null!=a){if("function"==typeof b&&(a instanceof b||v.__interfLoop(v.getClass(a),b)))return!0}else return!1;
return b==Nc&&null!=a.__name__||b==Oc&&null!=a.__ename__?!0:a.__enum__==b}};v.__cast=function(a,b){if(v.__instanceof(a,b))return a;throw"Cannot cast "+A.string(a)+" to "+A.string(b);};var wc=function(){};d["js.html._CanvasElement.CanvasUtil"]=wc;wc.__name__=!0;wc.getContextWebGL=function(a,b){for(var d=0,e=["webgl","experimental-webgl"];d<e.length;){var f=e[d];++d;f=a.getContext(f,b);if(null!=f)return f}return null};var Gc,Kc=0;Math.NaN=Number.NaN;Math.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY;Math.POSITIVE_INFINITY=
Number.POSITIVE_INFINITY;d.Math=Math;Math.isFinite=function(a){return isFinite(a)};Math.isNaN=function(a){return isNaN(a)};String.prototype.__class__=d.String=String;String.__name__=!0;d.Array=Array;Array.__name__=!0;Date.prototype.__class__=d.Date=Date;Date.__name__=["Date"];var Lc=d.Int={__name__:["Int"]},Mc=d.Dynamic={__name__:["Dynamic"]},Ic=d.Float=Number;Ic.__name__=["Float"];var Jc=d.Bool=Boolean;Jc.__ename__=["Bool"];var Nc=d.Class={__name__:["Class"]},Oc={};qa.instance=new qa;F.DISPATCHING_SENTINEL=
new Da(null,null);r.root=new n;r.uncaughtError=new w;r.hidden=new N(!1);r.volume=new x(1);r._platform=qa.instance;r._calledInit=!1;V.__meta__={obj:{assets:[{preloader:[{bytes:978,md5:"4f9fca2d3d1b3fa235e80f434fffd6e2",name:"bg_gradient.png"},{bytes:1206,md5:"e6b516efa7c663c100d4250c09e1fe8e",name:"loading_font.fnt"},{bytes:2309,md5:"66acf584bedc431df40f52fcabdb83f0",name:"loading_font_0.png"}],game:[{bytes:2588342,md5:"3d1af417c557e1edec87746a483d45e4",name:"audio/bgm/i_am_the_rock.mp3"},{bytes:1699778,
md5:"c7274ebffd5f489bde68f02a62293939",name:"audio/bgm/i_am_the_rock.ogg"},{bytes:4178,md5:"a00d1479786546d2856302a60e6c48bb",name:"audio/sfx/bounce.mp3"},{bytes:5732,md5:"879ae12d6368c7af746c66ba958355c1",name:"audio/sfx/bounce.ogg"},{bytes:5040,md5:"7f5f4aada60729f0fe2aa77395a2392b",name:"audio/sfx/coin.mp3"},{bytes:7765,md5:"56e9c7b4a331d5deb7f2a7d7280942c8",name:"audio/sfx/coin.ogg"},{bytes:5014,md5:"41aebfa8d53fd87ab69f0352d435cfa5",name:"audio/sfx/move.mp3"},{bytes:6202,md5:"25846a125c6d5fe2ec3961fd7e026089",
name:"audio/sfx/move.ogg"},{bytes:5850,md5:"21733eb077711860bfa77bb1786b6c7c",name:"audio/sfx/place.mp3"},{bytes:9789,md5:"ee24116cd9e834e6698ee6f08b4296d3",name:"audio/sfx/place.ogg"},{bytes:5112,md5:"3ea65292769fa291b0bf9a75ae8f324e",name:"audio/sfx/shake.mp3"},{bytes:8176,md5:"8cc5731b5b8b0b4eb96db021a12b56b4",name:"audio/sfx/shake.ogg"},{bytes:10800,md5:"5e7a8ff51723deae2b3fd86055c8019e",name:"audio/sfx/shift_dimension.mp3"},{bytes:14604,md5:"a5d40d5b97000a765ecc184b577e0dea",name:"audio/sfx/shift_dimension.ogg"},
{bytes:9504,md5:"a03e21461310bc7a8bead92f0b085a28",name:"audio/sfx/spawn.mp3"},{bytes:14500,md5:"972271fc3a67300ac78bef867d058684",name:"audio/sfx/spawn.ogg"},{bytes:978,md5:"4f9fca2d3d1b3fa235e80f434fffd6e2",name:"backgrounds/bg_gradient.png"},{bytes:5764,md5:"7d94fc39b57426e870c0ead8dcc1ef05",name:"backgrounds/cloud_bg.png"},{bytes:42888,md5:"ae45e207f089f9758ececa1eccfbe8da",name:"backgrounds/map_bg.png"},{bytes:43011,md5:"4d52ab8a41dbb037476c709d3292589f",name:"backgrounds/map_bg_green.png"},
{bytes:39810,md5:"936ab4a7672df561a56dd9b8939faf4a",name:"backgrounds/map_bg_pink.png"},{bytes:11871,md5:"a61e32d5ba08a78fb9ca495caac11605",name:"fonts/chubby_cheeks_32.fnt"},{bytes:8645,md5:"7d50e909869a9e493ea734064f8b108f",name:"fonts/chubby_cheeks_32_0.png"},{bytes:11871,md5:"edb8f07a364b5f33d1e18c722859c500",name:"fonts/chubby_cheeks_64.fnt"},{bytes:19192,md5:"01c601b5fd09af1ba449db6ff61accb5",name:"fonts/chubby_cheeks_64_0.png"},{bytes:1138,md5:"deac5205c67b7c89aa84ef9814d9e6b7",name:"gui/gui_bg.png"},
{bytes:1741,md5:"674083da37fa6e240ecc726493660144",name:"plane.png"},{bytes:17332,md5:"0d8f065600f0bd2eed9b3acb5c3cec49",name:"scenes/main_menu/peeking_land.png"},{bytes:347,md5:"4b95e23922e9dcd1a6d72a53008479c7",name:"scenes/main_menu/play_bg.png"},{bytes:250,md5:"14135b93f5133a364a965502dd0b569c",name:"scenes/main_menu/title_bg.png"},{bytes:429,md5:"6bf592aef6cdb5a18ec19f3df500152f",name:"tile_objects/character.png"},{bytes:1645,md5:"b0571bd8f96af2f1f1a43fdd58f0c458",name:"tile_objects/characters/green_character.png"},
{bytes:1705,md5:"f7deaed38272c2857b32c024aac9d360",name:"tile_objects/characters/pink_character.png"},{bytes:1006,md5:"d2fa95b06f5ac36a4759739f3d127556",name:"tile_objects/coin_plate.png"},{bytes:450,md5:"13991ba70e289ffccaf51cfecd24dd86",name:"tile_objects/default.png"},{bytes:304,md5:"12778e5235907981b5291e4f370bbcd9",name:"tile_objects/default_plate.png"},{bytes:341,md5:"6275199d16cfedca414d37bca45041fb",name:"tile_objects/directional_plates/blue_plate.png"},{bytes:354,md5:"2437e9325aa5049b50269afda89ddc5d",
name:"tile_objects/directional_plates/green_plate.png"},{bytes:357,md5:"1e45daeecf022247f0f04f87541eb190",name:"tile_objects/directional_plates/pink_plate.png"},{bytes:307,md5:"2d9333635ffd5cecefa6291f72f6f31a",name:"tile_objects/directional_plates/red_plate.png"},{bytes:788,md5:"bccea9714e29e819414e7bfa16d0b0aa",name:"tile_objects/multiplier_plate.png"}]}]}};V._supportsCrossOrigin=function(){var a;a=0<=window.navigator.userAgent.indexOf("Linux; U; Android")?!1:null!=(new XMLHttpRequest).withCredentials;
a||null;return a}();m._scratchPoint=new aa;va.NEWLINE=new lb(10);$._sharedEvent=new fc;W._sharedEvent=new gc;L._sharedEvent=new hc;Ca.CANVAS_TEXTURES=(new pa("(iPhone|iPod|iPad)","")).match(window.navigator.userAgent);t._mediaRefCount=0;t._detectBlobSupport=!0;q.VENDOR_PREFIXES=["webkit","moz","ms","o","khtml"];q.SHOULD_HIDE_MOBILE_BROWSER=window.top==window&&(new pa("Mobile(/.*)? Safari","")).match(window.navigator.userAgent);u._detectSupport=!0;ea._scratchMatrix=new ha;Db.main()})();
