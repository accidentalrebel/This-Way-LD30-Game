/** Cooked with Flambe, https://getflambe.com */
'use strict';(function(){function m(a,c){function e(){}e.prototype=a;var b=new e,f;for(f in c)b[f]=c[f];c.toString!==Object.prototype.toString&&(b.toString=c.toString);return b}function Ec(a){return a instanceof Array?function(){return y.iter(a)}:"function"==typeof a.iterator?H(a,a.iterator):a.iterator}function H(a,c){if(null==c)return null;null==c.__id__&&(c.__id__=Kc++);var e;null==a.hx__closures__?a.hx__closures__={}:e=a.hx__closures__[c.__id__];null==e&&(e=function(){return e.method.apply(e.scope,
arguments)},e.scope=a,e.method=c,a.hx__closures__[c.__id__]=e);return e}var d={},oa=function(a,c){c=c.split("u").join("");this.r=RegExp(a,c)};d.EReg=oa;oa.__name__=!0;oa.prototype={match:function(a){this.r.global&&(this.r.lastIndex=0);this.r.m=this.r.exec(a);this.r.s=a;return null!=this.r.m},matched:function(a){if(null!=this.r.m&&0<=a&&a<this.r.m.length)return this.r.m[a];throw"EReg::matched";},matchedPos:function(){if(null==this.r.m)throw"No string matched";return{pos:this.r.m.index,len:this.r.m[0].length}},
__class__:oa};var y=function(){};d.HxOverrides=y;y.__name__=!0;y.cca=function(a,c){var e=a.charCodeAt(c);return e!=e?void 0:e};y.substr=function(a,c,e){if(null!=c&&0!=c&&null!=e&&0>e)return"";null==e&&(e=a.length);0>c?(c=a.length+c,0>c&&(c=0)):0>e&&(e=a.length+e-c);return a.substr(c,e)};y.remove=function(a,c){var e=a.indexOf(c);if(-1==e)return!1;a.splice(e,1);return!0};y.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};
var ab=function(){};d.Lambda=ab;ab.__name__=!0;ab.array=function(a){for(var c=[],a=Ec(a)();a.hasNext();){var e=a.next();c.push(e)}return c};ab.count=function(a,c){var e=0;if(null==c)for(var b=Ec(a)();b.hasNext();)b.next(),e++;else for(b=Ec(a)();b.hasNext();){var f=b.next();c(f)&&e++}return e};var bb=function(){this.length=0};d.List=bb;bb.__name__=!0;bb.prototype={push:function(a){this.h=a=[a,this.h];null==this.q&&(this.q=a);this.length++},remove:function(a){for(var c=null,e=this.h;null!=e;){if(e[0]==
a)return null==c?this.h=e[1]:c[1]=e[1],this.q==e&&(this.q=c),this.length--,!0;c=e;e=e[1]}return!1},iterator:function(){return{h:this.h,hasNext:function(){return null!=this.h},next:function(){if(null==this.h)return null;var a=this.h[0];this.h=this.h[1];return a}}},__class__:bb};var uc=function(){};d.IMap=uc;uc.__name__=!0;Math.__name__=!0;var Ja=function(){};d.Reflect=Ja;Ja.__name__=!0;Ja.field=function(a,c){try{return a[c]}catch(e){return null}};var z=function(){};d.Std=z;z.__name__=!0;z.is=function(a,
c){return u.__instanceof(a,c)};z.string=function(a){return u.__string_rec(a,"")};z["int"]=function(a){return a|0};z.parseInt=function(a){var c=parseInt(a,10);if(0==c&&(120==y.cca(a,1)||88==y.cca(a,1)))c=parseInt(a);return isNaN(c)?null:c};var Yb=function(){};d.StringTools=Yb;Yb.__name__=!0;Yb.startsWith=function(a,c){return a.length>=c.length&&y.substr(a,0,c.length)==c};var cb=function(){};d.Type=cb;cb.__name__=!0;cb.resolveClass=function(a){a=d[a];return null==a||!a.__name__?null:a};cb.resolveEnum=
function(a){a=d[a];return null==a||!a.__ename__?null:a};cb.allEnums=function(a){return a.__empty_constructs__};var da=function(){};d["flambe.util.Disposable"]=da;da.__name__=!0;da.prototype={__class__:da};var q=function(){};d["flambe.Component"]=q;q.__name__=!0;q.__interfaces__=[da];q.prototype={onAdded:function(){},onRemoved:function(){},onUpdate:function(){},dispose:function(){null!=this.owner&&this.owner.remove(this)},get_name:function(){return null},init:function(a,c){this.owner=a;this.next=c},
__class__:q};var db=function(){this._disposables=[]};d["flambe.Disposer"]=db;db.__name__=!0;db.__super__=q;db.prototype=m(q.prototype,{get_name:function(){return"Disposer_15"},add:function(a){this._disposables.push(a);return this},connect0:function(a,c){this.add(a.connect(c));return this},onRemoved:function(){this.freeDisposables()},dispose:function(){q.prototype.dispose.call(this);this.freeDisposables()},freeDisposables:function(){var a=this._disposables;this._disposables=[];for(var c=0;c<a.length;){var e=
a[c];++c;e.dispose()}},__class__:db});var l=function(){this.parent=this.firstChild=this.next=this.firstComponent=null;this._compMap={}};d["flambe.Entity"]=l;l.__name__=!0;l.__interfaces__=[da];l.prototype={add:function(a){null!=a.owner&&a.owner.remove(a);var c=a.get_name(),e=this._compMap[c];null!=e&&this.remove(e);this._compMap[c]=a;c=null;for(e=this.firstComponent;null!=e;)c=e,e=e.next;null!=c?c.next=a:this.firstComponent=a;a.init(this,null);a.onAdded();return this},remove:function(a){for(var c=
null,e=this.firstComponent;null!=e;){var b=e.next;if(e==a)return null==c?this.firstComponent=b:c.init(this,b),delete this._compMap[e.get_name()],e.onRemoved(),e.init(null,null),!0;c=e;e=b}return!1},addChild:function(a,c){null==c&&(c=!0);null!=a.parent&&a.parent.removeChild(a);a.parent=this;if(c){for(var e=null,b=this.firstChild;null!=b;)e=b,b=b.next;null!=e?e.next=a:this.firstChild=a}else a.next=this.firstChild,this.firstChild=a;return this},removeChild:function(a){for(var c=null,e=this.firstChild;null!=
e;){var b=e.next;if(e==a){null==c?this.firstChild=b:c.next=b;e.parent=null;e.next=null;break}c=e;e=b}},disposeChildren:function(){for(;null!=this.firstChild;)this.firstChild.dispose()},dispose:function(){for(null!=this.parent&&this.parent.removeChild(this);null!=this.firstComponent;)this.firstComponent.dispose();this.disposeChildren()},__class__:l};var vc=function(){};d["flambe.util.PackageLog"]=vc;vc.__name__=!0;var Zb=function(){};d["flambe.platform.Platform"]=Zb;Zb.__name__=!0;Zb.prototype={__class__:Zb};
var pa=function(){};d["flambe.platform.html.HtmlPlatform"]=pa;pa.__name__=!0;pa.__interfaces__=[Zb];pa.prototype={init:function(){var a=this;n.fixAndroidMath();var c=null;try{c=window.flambe.canvas}catch(e){}c.setAttribute("tabindex","0");c.style.outlineStyle="none";c.style.webkitTapHighlightColor="transparent";c.setAttribute("moz-opaque","true");this._stage=new za(c);this._pointer=new I;this._mouse=new eb(this._pointer,c);this._renderer=this.createRenderer(c);this.mainLoop=new Aa;this.musicPlaying=
!1;this._canvas=c;this._container=c.parentElement;this._container.style.overflow="hidden";this._container.style.position="relative";this._container.style.msTouchAction="none";var b=0,f=function(e){if(!(1E3>e.timeStamp-b)){var f=c.getBoundingClientRect(),h=a.getX(e,f),f=a.getY(e,f);switch(e.type){case "mousedown":e.target==c&&(e.preventDefault(),a._mouse.submitDown(h,f,e.button),c.focus());break;case "mousemove":a._mouse.submitMove(h,f);break;case "mouseup":a._mouse.submitUp(h,f,e.button);break;case "mousewheel":case "DOMMouseScroll":a._mouse.submitScroll(h,
f,"mousewheel"==e.type?e.wheelDelta/40:-e.detail)&&e.preventDefault()}}};window.addEventListener("mousedown",f,!1);window.addEventListener("mousemove",f,!1);window.addEventListener("mouseup",f,!1);c.addEventListener("mousewheel",f,!1);c.addEventListener("DOMMouseScroll",f,!1);c.addEventListener("contextmenu",function(a){a.preventDefault()},!1);var h="undefined"!=typeof window.ontouchstart,f="msMaxTouchPoints"in window.navigator&&1<window.navigator.msMaxTouchPoints;if(h||f){var d=new fb(this._pointer,
h?4:window.navigator.msMaxTouchPoints);this._touch=d;f=function(c){var e;e=h?c.changedTouches:[c];var f=c.target.getBoundingClientRect();b=c.timeStamp;switch(c.type){case "touchstart":case "MSPointerDown":case "pointerdown":c.preventDefault();n.SHOULD_HIDE_MOBILE_BROWSER&&n.hideMobileBrowser();for(c=0;c<e.length;){var g=e[c];++c;var i=a.getX(g,f),j=a.getY(g,f);d.submitDown((h?g.identifier:g.pointerId)|0,i,j)}break;case "touchmove":case "MSPointerMove":case "pointermove":c.preventDefault();for(c=0;c<
e.length;)g=e[c],++c,i=a.getX(g,f),j=a.getY(g,f),d.submitMove((h?g.identifier:g.pointerId)|0,i,j);break;case "touchend":case "touchcancel":case "MSPointerUp":case "pointerup":for(c=0;c<e.length;)g=e[c],++c,i=a.getX(g,f),j=a.getY(g,f),d.submitUp((h?g.identifier:g.pointerId)|0,i,j)}};h?(c.addEventListener("touchstart",f,!1),c.addEventListener("touchmove",f,!1),c.addEventListener("touchend",f,!1),c.addEventListener("touchcancel",f,!1)):(c.addEventListener("MSPointerDown",f,!1),c.addEventListener("MSPointerMove",
f,!1),c.addEventListener("MSPointerUp",f,!1))}else this._touch=new gb;var g=window.onerror;window.onerror=function(a,c,e){o.uncaughtError.emit(a);return null!=g?g(a,c,e):!1};var i=n.loadExtension("hidden",window.document);null!=i.value?(f=function(){o.hidden.set__(Ja.field(window.document,i.field))},f(null),window.document.addEventListener(i.prefix+"visibilitychange",f,!1)):(f=function(a){o.hidden.set__("pagehide"==a.type)},window.addEventListener("pageshow",f,!1),window.addEventListener("pagehide",
f,!1));o.hidden.get_changed().connect(function(c){c||(a._skipFrame=!0)});this._skipFrame=!1;this._lastUpdate=Date.now();var j=n.loadExtension("requestAnimationFrame").value;if(null!=j){var k=window.performance,l=null!=k&&n.polyfill("now",k);l?this._lastUpdate=k.now():null;var m=null,m=function(e){a.update(l?k.now():e);j(m,c)};j(m,c)}else window.setInterval(function(){a.update(Date.now())},16);Ka.info("Initialized HTML platform",["renderer",this._renderer.get_type()])},loadAssetPack:function(a){return(new s(this,
a)).promise},getStage:function(){return this._stage},update:function(a){var c=(a-this._lastUpdate)/1E3;this._lastUpdate=a;o.hidden._value||(this._skipFrame?this._skipFrame=!1:(this.mainLoop.update(c),this.mainLoop.render(this._renderer)))},getPointer:function(){return this._pointer},getKeyboard:function(){var a=this;if(null==this._keyboard){this._keyboard=new Z;var c=function(c){switch(c.type){case "keydown":a._keyboard.submitDown(c.keyCode)&&c.preventDefault();break;case "keyup":a._keyboard.submitUp(c.keyCode)}};
this._canvas.addEventListener("keydown",c,!1);this._canvas.addEventListener("keyup",c,!1)}return this._keyboard},getRenderer:function(){return this._renderer},getX:function(a,c){return(a.clientX-c.left)*this._stage.get_width()/c.width},getY:function(a,c){return(a.clientY-c.top)*this._stage.get_height()/c.height},createRenderer:function(a){try{var c=wc.getContextWebGL(a,{alpha:!1,depth:!1,failIfMajorPerformanceCaveat:!0});if(null!=c)if(n.detectSlowDriver(c))null;else return new hb(this._stage,c)}catch(e){}return new Ba(a)},
__class__:pa};var K=function(a,c){this._value=a;this._changed=null!=c?new La(c):null};d["flambe.util.Value"]=K;K.__name__=!0;K.prototype={watch:function(a){a(this._value,this._value);return this.get_changed().connect(a)},set__:function(a){var c=this._value;a!=c&&(this._value=a,null!=this._changed&&this._changed.emit(a,c));return a},get_changed:function(){null==this._changed&&(this._changed=new La);return this._changed},__class__:K};var Ca=function(a,c){this._next=null;this._signal=a;this._listener=
c;this.stayInList=!0};d["flambe.util.SignalConnection"]=Ca;Ca.__name__=!0;Ca.__interfaces__=[da];Ca.prototype={once:function(){this.stayInList=!1;return this},dispose:function(){null!=this._signal&&(this._signal.disconnect(this),this._signal=null)},__class__:Ca};var C=function(a){this._head=null!=a?new Ca(this,a):null;this._deferredTasks=null};d["flambe.util.SignalBase"]=C;C.__name__=!0;C.prototype={connectImpl:function(a,c){var e=this,b=new Ca(this,a);this._head==C.DISPATCHING_SENTINEL?this.defer(function(){e.listAdd(b,
c)}):this.listAdd(b,c);return b},disconnect:function(a){var c=this;this._head==C.DISPATCHING_SENTINEL?this.defer(function(){c.listRemove(a)}):this.listRemove(a)},defer:function(a){for(var c=null,e=this._deferredTasks;null!=e;)c=e,e=e.next;a=new $b(a);null!=c?c.next=a:this._deferredTasks=a},willEmit:function(){var a=this._head;this._head=C.DISPATCHING_SENTINEL;return a},didEmit:function(a){this._head=a;a=this._deferredTasks;for(this._deferredTasks=null;null!=a;)a.fn(),a=a.next},listAdd:function(a,
c){if(c)a._next=this._head,this._head=a;else{for(var e=null,b=this._head;null!=b;)e=b,b=b._next;null!=e?e._next=a:this._head=a}},listRemove:function(a){for(var c=null,e=this._head;null!=e;){if(e==a){a=e._next;null==c?this._head=a:c._next=a;break}c=e;e=e._next}},__class__:C};var La=function(a){C.call(this,a)};d["flambe.util.Signal2"]=La;La.__name__=!0;La.__super__=C;La.prototype=m(C.prototype,{connect:function(a,c){null==c&&(c=!1);return this.connectImpl(a,c)},emit:function(a,c){var e=this;this._head==
C.DISPATCHING_SENTINEL?this.defer(function(){e.emitImpl(a,c)}):this.emitImpl(a,c)},emitImpl:function(a,c){for(var e=this.willEmit(),b=e;null!=b;)b._listener(a,c),b.stayInList||b.dispose(),b=b._next;this.didEmit(e)},__class__:La});var v=function(a){C.call(this,a)};d["flambe.util.Signal1"]=v;v.__name__=!0;v.__super__=C;v.prototype=m(C.prototype,{connect:function(a,c){null==c&&(c=!1);return this.connectImpl(a,c)},emit:function(a){var c=this;this._head==C.DISPATCHING_SENTINEL?this.defer(function(){c.emitImpl(a)}):
this.emitImpl(a)},emitImpl:function(a){for(var c=this.willEmit(),e=c;null!=e;)e._listener(a),e.stayInList||e.dispose(),e=e._next;this.didEmit(c)},__class__:v});var w=function(a,c){this._behavior=null;K.call(this,a,c)};d["flambe.animation.AnimatedFloat"]=w;w.__name__=!0;w.__super__=K;w.prototype=m(K.prototype,{set__:function(a){this._behavior=null;return K.prototype.set__.call(this,a)},update:function(a){null!=this._behavior&&(K.prototype.set__.call(this,this._behavior.update(a)),this._behavior.isComplete()&&
(this._behavior=null))},animateTo:function(a,c,e){this.set_behavior(new Ma(this._value,a,c,e))},set_behavior:function(a){this._behavior=a;this.update(0);return a},__class__:w});var o=function(){};d["flambe.System"]=o;o.__name__=!0;o.init=function(){o._calledInit||(o._platform.init(),o._calledInit=!0)};var Ka=function(){};d["flambe.Log"]=Ka;Ka.__name__=!0;Ka.info=function(){null};Ka.__super__=vc;Ka.prototype=m(vc.prototype,{__class__:Ka});var ac=function(){this._realDt=0};d["flambe.SpeedAdjuster"]=
ac;ac.__name__=!0;ac.__super__=q;ac.prototype=m(q.prototype,{get_name:function(){return"SpeedAdjuster_14"},onUpdate:function(a){0<this._realDt&&(a=this._realDt,this._realDt=0);this.scale.update(a)},__class__:ac});var ib=function(){};d["flambe.animation.Behavior"]=ib;ib.__name__=!0;ib.prototype={__class__:ib};var la=function(){};d["flambe.animation.Ease"]=la;la.__name__=!0;la.linear=function(a){return a};la.backIn=function(a){return a*a*(2.70158*a-1.70158)};la.backOut=function(a){return 1- --a*a*(-2.70158*
a-1.70158)};var Na=function(a,c){this.base=a;this.strength=c};d["flambe.animation.Jitter"]=Na;Na.__name__=!0;Na.__interfaces__=[ib];Na.prototype={update:function(){return this.base+2*Math.random()*this.strength-this.strength},isComplete:function(){return!1},__class__:Na};var Ma=function(a,c,e,b){this._from=a;this._to=c;this._duration=e;this.elapsed=0;this._easing=null!=b?b:la.linear};d["flambe.animation.Tween"]=Ma;Ma.__name__=!0;Ma.__interfaces__=[ib];Ma.prototype={update:function(a){this.elapsed+=
a;return this.elapsed>=this._duration?this._to:this._from+(this._to-this._from)*this._easing(this.elapsed/this._duration)},isComplete:function(){return this.elapsed>=this._duration},__class__:Ma};var ta=function(){};d["flambe.asset.Asset"]=ta;ta.__name__=!0;ta.__interfaces__=[da];ta.prototype={__class__:ta};var g=d["flambe.asset.AssetFormat"]={__ename__:!0,__constructs__:"WEBP,JXR,PNG,JPG,GIF,DDS,PVR,PKM,MP3,M4A,OPUS,OGG,WAV,Data".split(",")};g.WEBP=["WEBP",0];g.WEBP.__enum__=g;g.JXR=["JXR",1];g.JXR.__enum__=
g;g.PNG=["PNG",2];g.PNG.__enum__=g;g.JPG=["JPG",3];g.JPG.__enum__=g;g.GIF=["GIF",4];g.GIF.__enum__=g;g.DDS=["DDS",5];g.DDS.__enum__=g;g.PVR=["PVR",6];g.PVR.__enum__=g;g.PKM=["PKM",7];g.PKM.__enum__=g;g.MP3=["MP3",8];g.MP3.__enum__=g;g.M4A=["M4A",9];g.M4A.__enum__=g;g.OPUS=["OPUS",10];g.OPUS.__enum__=g;g.OGG=["OGG",11];g.OGG.__enum__=g;g.WAV=["WAV",12];g.WAV.__enum__=g;g.Data=["Data",13];g.Data.__enum__=g;g.__empty_constructs__=[g.WEBP,g.JXR,g.PNG,g.JPG,g.GIF,g.DDS,g.PVR,g.PKM,g.MP3,g.M4A,g.OPUS,g.OGG,
g.WAV,g.Data];var bc=function(a,c,e,b){this.name=a;this.url=c;this.format=e;this.bytes=b};d["flambe.asset.AssetEntry"]=bc;bc.__name__=!0;bc.prototype={__class__:bc};var jb=function(){};d["flambe.asset.AssetPack"]=jb;jb.__name__=!0;jb.__interfaces__=[da];jb.prototype={__class__:jb};var kb=function(){};d["flambe.asset.File"]=kb;kb.__name__=!0;kb.__interfaces__=[ta];kb.prototype={__class__:kb};var R=function(){this._localBase=this._remoteBase=null;this._entries=[]};d["flambe.asset.Manifest"]=R;R.__name__=
!0;R.fromAssets=function(a,c){null==c&&(c=!0);var e=Ja.field(xc.getType(R).assets[0],a);if(null==e){if(c)throw L.withFields("Missing asset pack",["name",a]);return null}var b=new R;b.set_localBase("assets");for(var f=0;f<e.length;){var h=e[f];++f;var d=h.name,i=a+"/"+d+"?v="+z.string(h.md5),j=R.inferFormat(d);j!=g.Data&&(d=L.removeFileExtension(d));b.add(d,i,h.bytes,j)}return b};R.inferFormat=function(a){a=L.getUrlExtension(a);if(null!=a)switch(a.toLowerCase()){case "gif":return g.GIF;case "jpg":case "jpeg":return g.JPG;
case "jxr":case "wdp":return g.JXR;case "png":return g.PNG;case "webp":return g.WEBP;case "dds":return g.DDS;case "pvr":return g.PVR;case "pkm":return g.PKM;case "m4a":return g.M4A;case "mp3":return g.MP3;case "ogg":return g.OGG;case "opus":return g.OPUS;case "wav":return g.WAV}else null;return g.Data};R.prototype={add:function(a,c,e,b){null==e&&(e=0);null==b&&(b=R.inferFormat(c));a=new bc(a,c,b,e);this._entries.push(a);return a},iterator:function(){return y.iter(this._entries)},getFullURL:function(a){var c;
c=null!=this.get_remoteBase()&&R._supportsCrossOrigin?this.get_remoteBase():this.get_localBase();return null!=c?L.joinPath(c,a.url):a.url},get_localBase:function(){return this._localBase},set_localBase:function(a){null!=a&&yc.that(!Yb.startsWith(a,"http://")&&!Yb.startsWith(a,"https://"),"localBase must be a path on the same domain, NOT starting with http(s)://",null);return this._localBase=a},get_remoteBase:function(){return this._remoteBase},__class__:R};var J=d["flambe.display.BlendMode"]={__ename__:!0,
__constructs__:["Normal","Add","Mask","Copy"]};J.Normal=["Normal",0];J.Normal.__enum__=J;J.Add=["Add",1];J.Add.__enum__=J;J.Mask=["Mask",2];J.Mask.__enum__=J;J.Copy=["Copy",3];J.Copy.__enum__=J;J.__empty_constructs__=[J.Normal,J.Add,J.Mask,J.Copy];var $=function(a,c){null==c&&(c=0);null==a&&(a=0);this.x=a;this.y=c};d["flambe.math.Point"]=$;$.__name__=!0;$.prototype={__class__:$};var k=function(){this.blendMode=this.scissor=null;var a=this;this._flags=139;this._localMatrix=new ea;var c=function(){a._flags|=
12};this.x=new w(0,c);this.y=new w(0,c);this.rotation=new w(0,c);this.scaleX=new w(1,c);this.scaleY=new w(1,c);this.anchorX=new w(0,c);this.anchorY=new w(0,c);this.alpha=new w(1)};d["flambe.display.Sprite"]=k;k.__name__=!0;k.hitTest=function(a,c,e){var b=a._compMap.Sprite_2;if(null!=b){if(3!=(b._flags&3))return null;b.getLocalMatrix().inverseTransform(c,e,k._scratchPoint)&&(c=k._scratchPoint.x,e=k._scratchPoint.y);var f=b.scissor;if(null!=f&&!f.contains(c,e))return null}a=k.hitTestBackwards(a.firstChild,
c,e);return null!=a?a:null!=b&&b.containsLocal(c,e)?b:null};k.render=function(a,c){var e=a._compMap.Sprite_2;if(null!=e){var b=e.alpha._value;if(0==(e._flags&1)||0>=b)return;c.save();1>b&&c.multiplyAlpha(b);null!=e.blendMode&&c.setBlendMode(e.blendMode);var b=e.getLocalMatrix(),f=b.m02,h=b.m12;0!=(e._flags&128)&&(f=Math.round(f),h=Math.round(h));c.transform(b.m00,b.m10,b.m01,b.m11,f,h);b=e.scissor;null!=b&&c.applyScissor(b.x,b.y,b.width,b.height);e.draw(c)}b=a._compMap.Director_13;if(null!=b){b=b.occludedScenes;
for(f=0;f<b.length;)h=b[f],++f,k.render(h,c)}for(b=a.firstChild;null!=b;)f=b.next,k.render(b,c),b=f;null!=e&&c.restore()};k.hitTestBackwards=function(a,c,e){if(null!=a){var b=k.hitTestBackwards(a.next,c,e);return null!=b?b:k.hitTest(a,c,e)}return null};k.__super__=q;k.prototype=m(q.prototype,{get_name:function(){return"Sprite_2"},getNaturalWidth:function(){return 0},getNaturalHeight:function(){return 0},containsLocal:function(a,c){return 0<=a&&a<this.getNaturalWidth()&&0<=c&&c<this.getNaturalHeight()},
getLocalMatrix:function(){0!=(this._flags&4)&&(this._flags&=-5,this._localMatrix.compose(this.x._value,this.y._value,this.scaleX._value,this.scaleY._value,3.141592653589793*this.rotation._value/180),this._localMatrix.translate(-this.anchorX._value,-this.anchorY._value));return this._localMatrix},centerAnchor:function(){this.anchorX.set__(this.getNaturalWidth()/2);this.anchorY.set__(this.getNaturalHeight()/2);return this},setScale:function(a){this.scaleX.set__(a);this.scaleY.set__(a);return this},
onAdded:function(){0!=(this._flags&256)&&this.connectHover()},onRemoved:function(){null!=this._hoverConnection&&(this._hoverConnection.dispose(),this._hoverConnection=null)},onUpdate:function(a){this.x.update(a);this.y.update(a);this.rotation.update(a);this.scaleX.update(a);this.scaleY.update(a);this.alpha.update(a);this.anchorX.update(a);this.anchorY.update(a)},draw:function(){},getParentSprite:function(){if(null==this.owner)return null;for(var a=this.owner.parent;null!=a;){var c=a._compMap.Sprite_2;
if(null!=c)return c;a=a.parent}return null},get_pointerUp:function(){null==this._pointerUp&&(this._pointerUp=new v);return this._pointerUp},connectHover:function(){var a=this;null==this._hoverConnection&&(this._hoverConnection=o._platform.getPointer().move.connect(function(c){for(var e=c.hit;null!=e;){if(e==a)return;e=e.getParentSprite()}null!=a._pointerOut&&0!=(a._flags&256)&&a._pointerOut.emit(c);a._flags&=-257;a._hoverConnection.dispose();a._hoverConnection=null}))},set_visible:function(a){this._flags=
cc.set(this._flags,1,a);return a},set_pointerEnabled:function(a){this._flags=cc.set(this._flags,2,a);return a},onPointerDown:function(a){this.onHover(a);null!=this._pointerDown&&this._pointerDown.emit(a)},onPointerMove:function(a){this.onHover(a);null!=this._pointerMove&&this._pointerMove.emit(a)},onHover:function(a){if(0==(this._flags&256)&&(this._flags|=256,null!=this._pointerIn||null!=this._pointerOut))null!=this._pointerIn&&this._pointerIn.emit(a),this.connectHover()},onPointerUp:function(a){switch(a.source[1]){case 1:null!=
this._pointerOut&&0!=(this._flags&256)&&this._pointerOut.emit(a),this._flags&=-257,null!=this._hoverConnection&&(this._hoverConnection.dispose(),this._hoverConnection=null)}null!=this._pointerUp&&this._pointerUp.emit(a)},__class__:k});var aa=function(a,c,e){k.call(this);this.color=a;this.width=new w(c);this.height=new w(e)};d["flambe.display.FillSprite"]=aa;aa.__name__=!0;aa.__super__=k;aa.prototype=m(k.prototype,{draw:function(a){a.fillRect(this.color,0,0,this.width._value,this.height._value)},getNaturalWidth:function(){return this.width._value},
getNaturalHeight:function(){return this.height._value},onUpdate:function(a){k.prototype.onUpdate.call(this,a);this.width.update(a);this.height.update(a)},__class__:aa});var lb=function(a){this._kernings=null;this.xOffset=this.yOffset=this.xAdvance=0;this.page=null;this.x=this.y=this.width=this.height=0;this.charCode=a};d["flambe.display.Glyph"]=lb;lb.__name__=!0;lb.prototype={draw:function(a,c,e){0<this.width&&a.drawSubTexture(this.page,c+this.xOffset,e+this.yOffset,this.x,this.y,this.width,this.height)},
getKerning:function(a){return null!=this._kernings?z["int"](this._kernings.get(a)):0},setKerning:function(a,c){null==this._kernings&&(this._kernings=new fa);this._kernings.set(a,c)},__class__:lb};var ua=function(a,c){this.name=c;this._pack=a;this.reload()};d["flambe.display.Font"]=ua;ua.__name__=!0;ua.prototype={layoutText:function(a,c,e,b,f){null==f&&(f=0);null==b&&(b=0);null==e&&(e=0);null==c&&(c=N.Left);return new va(this,a,c,e,b,f)},reload:function(){this._glyphs=new fa;this._glyphs.set(ua.NEWLINE.charCode,
ua.NEWLINE);for(var a=new Da(this._pack.getFile(this.name+".fnt").toString()),c=new fa,e=this.name.lastIndexOf("/"),e=0<=e?y.substr(this.name,0,e+1):"",b=a.keywords();b.hasNext();)switch(b.next()){case "info":for(var f=a.pairs();f.hasNext();){var h=f.next();switch(h.key){case "size":this.size=h.getInt()}}break;case "common":for(f=a.pairs();f.hasNext();)switch(h=f.next(),h.key){case "lineHeight":this.lineHeight=h.getInt()}break;case "page":for(var f=0,h=null,d=a.pairs();d.hasNext();){var g=d.next();
switch(g.key){case "id":f=g.getInt();break;case "file":h=g.getString()}}h=this._pack.getTexture(e+L.removeFileExtension(h));c.set(f,h);break;case "char":f=null;for(h=a.pairs();h.hasNext();)switch(d=h.next(),d.key){case "id":f=new lb(d.getInt());break;case "x":f.x=d.getInt();break;case "y":f.y=d.getInt();break;case "width":f.width=d.getInt();break;case "height":f.height=d.getInt();break;case "page":d=d.getInt();f.page=c.get(d);break;case "xoffset":f.xOffset=d.getInt();break;case "yoffset":f.yOffset=
d.getInt();break;case "xadvance":f.xAdvance=d.getInt()}this._glyphs.set(f.charCode,f);break;case "kerning":f=null;d=h=0;for(g=a.pairs();g.hasNext();){var i=g.next();switch(i.key){case "first":f=this._glyphs.get(i.getInt());break;case "second":h=i.getInt();break;case "amount":d=i.getInt()}}null!=f&&0!=d&&f.setKerning(h,d)}},__class__:ua};var N=d["flambe.display.TextAlign"]={__ename__:!0,__constructs__:["Left","Center","Right"]};N.Left=["Left",0];N.Left.__enum__=N;N.Center=["Center",1];N.Center.__enum__=
N;N.Right=["Right",2];N.Right.__enum__=N;N.__empty_constructs__=[N.Left,N.Center,N.Right];var va=function(a,c,e,b,f,h){this.lines=0;var d=this;this._font=a;this._glyphs=[];this._offsets=[];this._lineOffset=Math.round(a.lineHeight+h);this.bounds=new Ea;for(var g=[],h=c.length,i=0;i<h;){var j=i++,j=c.charCodeAt(j),j=a._glyphs.get(j);null!=j?this._glyphs.push(j):null}for(var c=-1,k=0,l=0,a=a._glyphs.get(10),h=function(){d.bounds.width=ba.max(d.bounds.width,k);d.bounds.height+=l;g[d.lines]=k;l=k=0;++d.lines},
i=0;i<this._glyphs.length;){j=this._glyphs[i];this._offsets[i]=Math.round(k);var m=0<b&&k+j.width>b;m||j==a?(m&&(0<=c?(this._glyphs[c]=a,k=this._offsets[c],i=c):this._glyphs.splice(i,0,a)),c=-1,l=this._lineOffset,h()):(32==j.charCode&&(c=i),k+=j.xAdvance+f,l=ba.max(l,j.height+j.yOffset),i+1<this._glyphs.length&&(k+=j.getKerning(this._glyphs[i+1].charCode)));++i}h();f=0;a=va.getAlignOffset(e,g[0],b);c=1.79769313486231E308;h=-1.79769313486231E308;j=i=0;for(m=this._glyphs.length;j<m;){var n=this._glyphs[j];
10==n.charCode&&(f+=this._lineOffset,++i,a=va.getAlignOffset(e,g[i],b));this._offsets[j]+=a;var o=f+n.yOffset;c<o||(c=o);h=ba.max(h,o+n.height);++j}this.bounds.x=va.getAlignOffset(e,this.bounds.width,b);this.bounds.y=c;this.bounds.height=h-c};d["flambe.display.TextLayout"]=va;va.__name__=!0;va.getAlignOffset=function(a,c,e){switch(a[1]){case 0:return 0;case 2:return e-c;case 1:return Math.round((e-c)/2)}};va.prototype={draw:function(a){for(var c=0,e=0,b=this._glyphs.length;e<b;){var f=this._glyphs[e];
10==f.charCode?c+=this._lineOffset:f.draw(a,this._offsets[e],c);++e}},__class__:va};var Da=function(a){this._configText=a;this._keywordPattern=new oa("([A-Za-z]+)(.*)","");this._pairPattern=new oa('([A-Za-z]+)=("[^"]*"|[^\\s]+)',"")};d["flambe.display._Font.ConfigParser"]=Da;Da.__name__=!0;Da.advance=function(a,c){var e=c.matchedPos();return y.substr(a,e.pos+e.len,a.length)};Da.prototype={keywords:function(){var a=this,c=this._configText;return{next:function(){c=Da.advance(c,a._keywordPattern);a._pairText=
a._keywordPattern.matched(2);return a._keywordPattern.matched(1)},hasNext:function(){return a._keywordPattern.match(c)}}},pairs:function(){var a=this,c=this._pairText;return{next:function(){c=Da.advance(c,a._pairPattern);return new dc(a._pairPattern.matched(1),a._pairPattern.matched(2))},hasNext:function(){return a._pairPattern.match(c)}}},__class__:Da};var dc=function(a,c){this.key=a;this._value=c};d["flambe.display._Font.ConfigPair"]=dc;dc.__name__=!0;dc.prototype={getInt:function(){return z.parseInt(this._value)},
getString:function(){return 34!=this._value.charCodeAt(0)?null:y.substr(this._value,1,this._value.length-2)},__class__:dc};var ec=function(){};d["flambe.display.Graphics"]=ec;ec.__name__=!0;ec.prototype={__class__:ec};var O=function(a){k.call(this);this.texture=a};d["flambe.display.ImageSprite"]=O;O.__name__=!0;O.__super__=k;O.prototype=m(k.prototype,{draw:function(a){null!=this.texture&&a.drawTexture(this.texture,0,0)},getNaturalWidth:function(){return null!=this.texture?this.texture.get_width():
0},getNaturalHeight:function(){return null!=this.texture?this.texture.get_height():0},__class__:O});var ma=d["flambe.display.Orientation"]={__ename__:!0,__constructs__:["Portrait","Landscape"]};ma.Portrait=["Portrait",0];ma.Portrait.__enum__=ma;ma.Landscape=["Landscape",1];ma.Landscape.__enum__=ma;ma.__empty_constructs__=[ma.Portrait,ma.Landscape];var Fa=function(a,c,e){null==e&&(e=-1);null==c&&(c=-1);k.call(this);this.texture=a;0>c&&(c=null!=a?a.get_width():0);this.width=new w(c);0>e&&(e=null!=a?
a.get_height():0);this.height=new w(e)};d["flambe.display.PatternSprite"]=Fa;Fa.__name__=!0;Fa.__super__=k;Fa.prototype=m(k.prototype,{draw:function(a){null!=this.texture&&a.drawPattern(this.texture,0,0,this.width._value,this.height._value)},getNaturalWidth:function(){return this.width._value},getNaturalHeight:function(){return this.height._value},onUpdate:function(a){k.prototype.onUpdate.call(this,a);this.width.update(a);this.height.update(a)},__class__:Fa});var mb=function(){};d["flambe.display.Texture"]=
mb;mb.__name__=!0;mb.__interfaces__=[ta];mb.prototype={__class__:mb};var zc=function(){};d["flambe.display.SubTexture"]=zc;zc.__name__=!0;zc.__interfaces__=[mb];var P=function(a,c){null==c&&(c="");this._layout=null;var e=this;k.call(this);this._font=a;this._text=c;this._align=N.Left;this._flags|=64;var b=function(){e._flags|=64};this.wrapWidth=new w(0,b);this.letterSpacing=new w(0,b);this.lineSpacing=new w(0,b)};d["flambe.display.TextSprite"]=P;P.__name__=!0;P.__super__=k;P.prototype=m(k.prototype,
{draw:function(a){this.updateLayout();this._layout.draw(a)},getNaturalWidth:function(){this.updateLayout();return 0<this.wrapWidth._value?this.wrapWidth._value:this._layout.bounds.width},getNaturalHeight:function(){this.updateLayout();var a=this._layout.lines*(this._font.lineHeight+this.lineSpacing._value),c=this._layout.bounds.height;return a>c?a:c},containsLocal:function(a,c){this.updateLayout();return this._layout.bounds.contains(a,c)},set_text:function(a){a!=this._text&&(this._text=a,this._flags|=
64);return a},set_align:function(a){a!=this._align&&(this._align=a,this._flags|=64);return a},updateLayout:function(){0!=(this._flags&64)&&(this._flags&=-65,this._layout=this._font.layoutText(this._text,this._align,this.wrapWidth._value,this.letterSpacing._value,this.lineSpacing._value))},onUpdate:function(a){k.prototype.onUpdate.call(this,a);this.wrapWidth.update(a);this.letterSpacing.update(a);this.lineSpacing.update(a)},__class__:P});var b=d["flambe.input.Key"]={__ename__:!0,__constructs__:"A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,Number0,Number1,Number2,Number3,Number4,Number5,Number6,Number7,Number8,Number9,Numpad0,Numpad1,Numpad2,Numpad3,Numpad4,Numpad5,Numpad6,Numpad7,Numpad8,Numpad9,NumpadAdd,NumpadDecimal,NumpadDivide,NumpadEnter,NumpadMultiply,NumpadSubtract,F1,F2,F3,F4,F5,F6,F7,F8,F9,F10,F11,F12,F13,F14,F15,Left,Up,Right,Down,Alt,Backquote,Backslash,Backspace,CapsLock,Comma,Command,Control,Delete,End,Enter,Equals,Escape,Home,Insert,LeftBracket,Minus,PageDown,PageUp,Period,Quote,RightBracket,Semicolon,Shift,Slash,Space,Tab,Menu,Search,Unknown".split(",")};
b.A=["A",0];b.A.__enum__=b;b.B=["B",1];b.B.__enum__=b;b.C=["C",2];b.C.__enum__=b;b.D=["D",3];b.D.__enum__=b;b.E=["E",4];b.E.__enum__=b;b.F=["F",5];b.F.__enum__=b;b.G=["G",6];b.G.__enum__=b;b.H=["H",7];b.H.__enum__=b;b.I=["I",8];b.I.__enum__=b;b.J=["J",9];b.J.__enum__=b;b.K=["K",10];b.K.__enum__=b;b.L=["L",11];b.L.__enum__=b;b.M=["M",12];b.M.__enum__=b;b.N=["N",13];b.N.__enum__=b;b.O=["O",14];b.O.__enum__=b;b.P=["P",15];b.P.__enum__=b;b.Q=["Q",16];b.Q.__enum__=b;b.R=["R",17];b.R.__enum__=b;b.S=["S",
18];b.S.__enum__=b;b.T=["T",19];b.T.__enum__=b;b.U=["U",20];b.U.__enum__=b;b.V=["V",21];b.V.__enum__=b;b.W=["W",22];b.W.__enum__=b;b.X=["X",23];b.X.__enum__=b;b.Y=["Y",24];b.Y.__enum__=b;b.Z=["Z",25];b.Z.__enum__=b;b.Number0=["Number0",26];b.Number0.__enum__=b;b.Number1=["Number1",27];b.Number1.__enum__=b;b.Number2=["Number2",28];b.Number2.__enum__=b;b.Number3=["Number3",29];b.Number3.__enum__=b;b.Number4=["Number4",30];b.Number4.__enum__=b;b.Number5=["Number5",31];b.Number5.__enum__=b;b.Number6=
["Number6",32];b.Number6.__enum__=b;b.Number7=["Number7",33];b.Number7.__enum__=b;b.Number8=["Number8",34];b.Number8.__enum__=b;b.Number9=["Number9",35];b.Number9.__enum__=b;b.Numpad0=["Numpad0",36];b.Numpad0.__enum__=b;b.Numpad1=["Numpad1",37];b.Numpad1.__enum__=b;b.Numpad2=["Numpad2",38];b.Numpad2.__enum__=b;b.Numpad3=["Numpad3",39];b.Numpad3.__enum__=b;b.Numpad4=["Numpad4",40];b.Numpad4.__enum__=b;b.Numpad5=["Numpad5",41];b.Numpad5.__enum__=b;b.Numpad6=["Numpad6",42];b.Numpad6.__enum__=b;b.Numpad7=
["Numpad7",43];b.Numpad7.__enum__=b;b.Numpad8=["Numpad8",44];b.Numpad8.__enum__=b;b.Numpad9=["Numpad9",45];b.Numpad9.__enum__=b;b.NumpadAdd=["NumpadAdd",46];b.NumpadAdd.__enum__=b;b.NumpadDecimal=["NumpadDecimal",47];b.NumpadDecimal.__enum__=b;b.NumpadDivide=["NumpadDivide",48];b.NumpadDivide.__enum__=b;b.NumpadEnter=["NumpadEnter",49];b.NumpadEnter.__enum__=b;b.NumpadMultiply=["NumpadMultiply",50];b.NumpadMultiply.__enum__=b;b.NumpadSubtract=["NumpadSubtract",51];b.NumpadSubtract.__enum__=b;b.F1=
["F1",52];b.F1.__enum__=b;b.F2=["F2",53];b.F2.__enum__=b;b.F3=["F3",54];b.F3.__enum__=b;b.F4=["F4",55];b.F4.__enum__=b;b.F5=["F5",56];b.F5.__enum__=b;b.F6=["F6",57];b.F6.__enum__=b;b.F7=["F7",58];b.F7.__enum__=b;b.F8=["F8",59];b.F8.__enum__=b;b.F9=["F9",60];b.F9.__enum__=b;b.F10=["F10",61];b.F10.__enum__=b;b.F11=["F11",62];b.F11.__enum__=b;b.F12=["F12",63];b.F12.__enum__=b;b.F13=["F13",64];b.F13.__enum__=b;b.F14=["F14",65];b.F14.__enum__=b;b.F15=["F15",66];b.F15.__enum__=b;b.Left=["Left",67];b.Left.__enum__=
b;b.Up=["Up",68];b.Up.__enum__=b;b.Right=["Right",69];b.Right.__enum__=b;b.Down=["Down",70];b.Down.__enum__=b;b.Alt=["Alt",71];b.Alt.__enum__=b;b.Backquote=["Backquote",72];b.Backquote.__enum__=b;b.Backslash=["Backslash",73];b.Backslash.__enum__=b;b.Backspace=["Backspace",74];b.Backspace.__enum__=b;b.CapsLock=["CapsLock",75];b.CapsLock.__enum__=b;b.Comma=["Comma",76];b.Comma.__enum__=b;b.Command=["Command",77];b.Command.__enum__=b;b.Control=["Control",78];b.Control.__enum__=b;b.Delete=["Delete",79];
b.Delete.__enum__=b;b.End=["End",80];b.End.__enum__=b;b.Enter=["Enter",81];b.Enter.__enum__=b;b.Equals=["Equals",82];b.Equals.__enum__=b;b.Escape=["Escape",83];b.Escape.__enum__=b;b.Home=["Home",84];b.Home.__enum__=b;b.Insert=["Insert",85];b.Insert.__enum__=b;b.LeftBracket=["LeftBracket",86];b.LeftBracket.__enum__=b;b.Minus=["Minus",87];b.Minus.__enum__=b;b.PageDown=["PageDown",88];b.PageDown.__enum__=b;b.PageUp=["PageUp",89];b.PageUp.__enum__=b;b.Period=["Period",90];b.Period.__enum__=b;b.Quote=
["Quote",91];b.Quote.__enum__=b;b.RightBracket=["RightBracket",92];b.RightBracket.__enum__=b;b.Semicolon=["Semicolon",93];b.Semicolon.__enum__=b;b.Shift=["Shift",94];b.Shift.__enum__=b;b.Slash=["Slash",95];b.Slash.__enum__=b;b.Space=["Space",96];b.Space.__enum__=b;b.Tab=["Tab",97];b.Tab.__enum__=b;b.Menu=["Menu",98];b.Menu.__enum__=b;b.Search=["Search",99];b.Search.__enum__=b;b.Unknown=function(a){a=["Unknown",100,a];a.__enum__=b;return a};b.__empty_constructs__=[b.A,b.B,b.C,b.D,b.E,b.F,b.G,b.H,b.I,
b.J,b.K,b.L,b.M,b.N,b.O,b.P,b.Q,b.R,b.S,b.T,b.U,b.V,b.W,b.X,b.Y,b.Z,b.Number0,b.Number1,b.Number2,b.Number3,b.Number4,b.Number5,b.Number6,b.Number7,b.Number8,b.Number9,b.Numpad0,b.Numpad1,b.Numpad2,b.Numpad3,b.Numpad4,b.Numpad5,b.Numpad6,b.Numpad7,b.Numpad8,b.Numpad9,b.NumpadAdd,b.NumpadDecimal,b.NumpadDivide,b.NumpadEnter,b.NumpadMultiply,b.NumpadSubtract,b.F1,b.F2,b.F3,b.F4,b.F5,b.F6,b.F7,b.F8,b.F9,b.F10,b.F11,b.F12,b.F13,b.F14,b.F15,b.Left,b.Up,b.Right,b.Down,b.Alt,b.Backquote,b.Backslash,b.Backspace,
b.CapsLock,b.Comma,b.Command,b.Control,b.Delete,b.End,b.Enter,b.Equals,b.Escape,b.Home,b.Insert,b.LeftBracket,b.Minus,b.PageDown,b.PageUp,b.Period,b.Quote,b.RightBracket,b.Semicolon,b.Shift,b.Slash,b.Space,b.Tab,b.Menu,b.Search];var fc=function(){this.init(0,null)};d["flambe.input.KeyboardEvent"]=fc;fc.__name__=!0;fc.prototype={init:function(a,c){this.id=a;this.key=c},__class__:fc};var E=d["flambe.input.MouseButton"]={__ename__:!0,__constructs__:["Left","Middle","Right","Unknown"]};E.Left=["Left",
0];E.Left.__enum__=E;E.Middle=["Middle",1];E.Middle.__enum__=E;E.Right=["Right",2];E.Right.__enum__=E;E.Unknown=function(a){a=["Unknown",3,a];a.__enum__=E;return a};E.__empty_constructs__=[E.Left,E.Middle,E.Right];var V=d["flambe.input.MouseCursor"]={__ename__:!0,__constructs__:["Default","Button","None"]};V.Default=["Default",0];V.Default.__enum__=V;V.Button=["Button",1];V.Button.__enum__=V;V.None=["None",2];V.None.__enum__=V;V.__empty_constructs__=[V.Default,V.Button,V.None];var gc=function(){this.init(0,
0,0,null)};d["flambe.input.MouseEvent"]=gc;gc.__name__=!0;gc.prototype={init:function(a,c,e,b){this.id=a;this.viewX=c;this.viewY=e;this.button=b},__class__:gc};var Oa=d["flambe.input.EventSource"]={__ename__:!0,__constructs__:["Mouse","Touch"]};Oa.Mouse=function(a){a=["Mouse",0,a];a.__enum__=Oa;return a};Oa.Touch=function(a){a=["Touch",1,a];a.__enum__=Oa;return a};Oa.__empty_constructs__=[];var hc=function(){this.init(0,0,0,null,null)};d["flambe.input.PointerEvent"]=hc;hc.__name__=!0;hc.prototype=
{init:function(a,c,e,b,f){this.id=a;this.viewX=c;this.viewY=e;this.hit=b;this.source=f;this._stopped=!1},__class__:hc};var ic=function(a){this.id=a;this._source=Oa.Touch(this)};d["flambe.input.TouchPoint"]=ic;ic.__name__=!0;ic.prototype={init:function(a,c){this.viewX=a;this.viewY=c},__class__:ic};var ba=function(){};d["flambe.math.FMath"]=ba;ba.__name__=!0;ba.max=function(a,c){return a>c?a:c};ba.min=function(a,c){return a<c?a:c};var ea=function(){this.identity()};d["flambe.math.Matrix"]=ea;ea.__name__=
!0;ea.multiply=function(a,c,e){null==e&&(e=new ea);var b=a.m00*c.m00+a.m01*c.m10,f=a.m00*c.m01+a.m01*c.m11,h=a.m00*c.m02+a.m01*c.m12+a.m02;e.m00=b;e.m01=f;e.m02=h;b=a.m10*c.m00+a.m11*c.m10;f=a.m10*c.m01+a.m11*c.m11;h=a.m10*c.m02+a.m11*c.m12+a.m12;e.m10=b;e.m11=f;e.m12=h;return e};ea.prototype={set:function(a,c,e,b,f,h){this.m00=a;this.m01=e;this.m02=f;this.m10=c;this.m11=b;this.m12=h},identity:function(){this.set(1,0,0,1,0,0)},compose:function(a,c,e,b,f){var h=Math.sin(f),f=Math.cos(f);this.set(f*
e,h*e,-h*b,f*b,a,c)},translate:function(a,c){this.m02+=this.m00*a+this.m01*c;this.m12+=this.m11*c+this.m10*a},invert:function(){var a=this.determinant();if(0==a)return!1;this.set(this.m11/a,-this.m01/a,-this.m10/a,this.m00/a,(this.m01*this.m12-this.m11*this.m02)/a,(this.m10*this.m02-this.m00*this.m12)/a);return!0},transformArray:function(a,c,e){for(var b=0;b<c;){var f=a[b],h=a[b+1];e[b++]=f*this.m00+h*this.m01+this.m02;e[b++]=f*this.m10+h*this.m11+this.m12}},determinant:function(){return this.m00*
this.m11-this.m01*this.m10},inverseTransform:function(a,c,e){var b=this.determinant();if(0==b)return!1;a-=this.m02;c-=this.m12;e.x=(a*this.m11-c*this.m01)/b;e.y=(c*this.m00-a*this.m10)/b;return!0},clone:function(a){null==a&&(a=new ea);a.set(this.m00,this.m10,this.m01,this.m11,this.m02,this.m12);return a},__class__:ea};var Ea=function(a,c,e,b){null==b&&(b=0);null==e&&(e=0);null==c&&(c=0);null==a&&(a=0);this.set(a,c,e,b)};d["flambe.math.Rectangle"]=Ea;Ea.__name__=!0;Ea.prototype={set:function(a,c,e,
b){this.x=a;this.y=c;this.width=e;this.height=b},contains:function(a,c){a-=this.x;if(0<=this.width){if(0>a||a>this.width)return!1}else if(0<a||a<this.width)return!1;c-=this.y;if(0<=this.height){if(0>c||c>this.height)return!1}else if(0<c||c<this.height)return!1;return!0},clone:function(a){null==a&&(a=new Ea);a.set(this.x,this.y,this.width,this.height);return a},equals:function(a){return this.x==a.x&&this.y==a.y&&this.width==a.width&&this.height==a.height},__class__:Ea};var F=function(){this._disposed=
!1};d["flambe.platform.BasicAsset"]=F;F.__name__=!0;F.__interfaces__=[ta];F.prototype={dispose:function(){this._disposed||(this._disposed=!0,this.onDisposed())},onDisposed:function(){null},__class__:F};var wa=function(a,c){var e=this;this.manifest=c;this._platform=a;this.promise=new nb;this._bytesLoaded=new ga;this._pack=new ob(c,this);var b=ab.array(c);if(0==b.length)this.handleSuccess();else{for(var f=new ga,h=0;h<b.length;){var d=b[h];++h;var g=f.get(d.name);null==g&&(g=[],f.set(d.name,g));g.push(d)}this._assetsRemaining=
ab.count(f);for(b=f.iterator();b.hasNext();)f=[b.next()],this.pickBestEntry(f[0],function(a){return function(b){if(null!=b){var r=c.getFullURL(b);try{e.loadEntry(r,b)}catch(f){e.handleError(b,"Unexpected error: "+z.string(f))}r=e.promise;r.set_total(r._total+b.bytes)}else b=a[0][0],wa.isAudio(b.format)?e.handleLoad(b,W.getInstance()):e.handleError(b,"Could not find a supported format to load")}}(f))}};d["flambe.platform.BasicAssetPackLoader"]=wa;wa.__name__=!0;wa.isAudio=function(a){switch(a[1]){case 8:case 9:case 10:case 11:case 12:return!0;
default:return!1}};wa.prototype={onDisposed:function(){},pickBestEntry:function(a,c){this.getAssetFormats(function(e){for(var b=0;b<e.length;){var f=e[b];++b;for(var h=0;h<a.length;){var d=a[h];++h;if(d.format==f){c(d);return}}}c(null)})},loadEntry:function(){null},getAssetFormats:function(){null},handleLoad:function(a,c){if(!this._pack.disposed){this.handleProgress(a,a.bytes);var e;switch(a.format[1]){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:e=this._pack.textures;break;case 8:case 9:case 10:case 11:case 12:e=
this._pack.sounds;break;case 13:e=this._pack.files}e.set(a.name,c);this._assetsRemaining-=1;0==this._assetsRemaining&&this.handleSuccess()}},handleProgress:function(a,c){this._bytesLoaded.set(a.name,c);for(var e=0,b=this._bytesLoaded.iterator();b.hasNext();)var f=b.next(),e=e+f;this.promise.set_progress(e)},handleSuccess:function(){this.promise.set_result(this._pack)},handleError:function(a,c){this.promise.error.emit(L.withFields(c,["url",a.url]))},handleTextureError:function(a){this.handleError(a,
"Failed to create texture. Is the GPU context unavailable?")},__class__:wa};var ob=function(a,c){this.disposed=!1;this._manifest=a;this.loader=c;this.textures=new ga;this.sounds=new ga;this.files=new ga};d["flambe.platform._BasicAssetPackLoader.BasicAssetPack"]=ob;ob.__name__=!0;ob.__interfaces__=[jb];ob.prototype={getTexture:function(a,c){null==c&&(c=!0);var e=this.textures.get(a);if(null==e&&c)throw L.withFields("Missing texture",["name",a]);return e},getSound:function(a,c){null==c&&(c=!0);var e=
this.sounds.get(a);if(null==e&&c)throw L.withFields("Missing sound",["name",a]);return e},getFile:function(a,c){null==c&&(c=!0);var e=this.files.get(a);if(null==e&&c)throw L.withFields("Missing file",["name",a]);return e},dispose:function(){if(!this.disposed){this.disposed=!0;for(var a=this.textures.iterator();a.hasNext();)a.next().dispose();this.textures=null;for(a=this.sounds.iterator();a.hasNext();)a.next().dispose();this.sounds=null;for(a=this.files.iterator();a.hasNext();)a.next().dispose();
this.files=null;this.loader.onDisposed()}},__class__:ob};var Pa=function(a){this._disposed=!1;this._content=a};d["flambe.platform.BasicFile"]=Pa;Pa.__name__=!0;Pa.__interfaces__=[kb];Pa.__super__=F;Pa.prototype=m(F.prototype,{toString:function(){return this._content},onDisposed:function(){this._content=null},__class__:Pa});var jc=function(){};d["flambe.subsystem.KeyboardSystem"]=jc;jc.__name__=!0;jc.prototype={__class__:jc};var Z=function(){this.down=new v;this.up=new v;this.backButton=new ha;this._keyStates=
new fa};d["flambe.platform.BasicKeyboard"]=Z;Z.__name__=!0;Z.__interfaces__=[jc];Z.prototype={submitDown:function(a){if(16777238==a)return null!=this.backButton._head?(this.backButton.emit(),!0):!1;this._keyStates.exists(a)||(this._keyStates.set(a,!0),Z._sharedEvent.init(Z._sharedEvent.id+1,kc.toKey(a)),this.down.emit(Z._sharedEvent));return!0},submitUp:function(a){this._keyStates.exists(a)&&(this._keyStates.remove(a),Z._sharedEvent.init(Z._sharedEvent.id+1,kc.toKey(a)),this.up.emit(Z._sharedEvent))},
__class__:Z};var Fc=function(){};d["flambe.subsystem.MouseSystem"]=Fc;Fc.__name__=!0;var S=function(a){this._pointer=a;this._source=Oa.Mouse(S._sharedEvent);this.down=new v;this.move=new v;this.up=new v;this.scroll=new v;this._y=this._x=0;this._cursor=V.Default;this._buttonStates=new fa};d["flambe.platform.BasicMouse"]=S;S.__name__=!0;S.__interfaces__=[Fc];S.prototype={submitDown:function(a,c,e){this._buttonStates.exists(e)||(this._buttonStates.set(e,!0),this.prepare(a,c,lc.toButton(e)),this._pointer.submitDown(a,
c,this._source),this.down.emit(S._sharedEvent))},submitMove:function(a,c){this.prepare(a,c,null);this._pointer.submitMove(a,c,this._source);this.move.emit(S._sharedEvent)},submitUp:function(a,c,e){this._buttonStates.exists(e)&&(this._buttonStates.remove(e),this.prepare(a,c,lc.toButton(e)),this._pointer.submitUp(a,c,this._source),this.up.emit(S._sharedEvent))},submitScroll:function(a,c,e){this._x=a;this._y=c;if(null==this.scroll._head)return!1;this.scroll.emit(e);return!0},prepare:function(a,c,e){this._x=
a;this._y=c;S._sharedEvent.init(S._sharedEvent.id+1,a,c,e)},__class__:S};var mc=function(){};d["flambe.subsystem.PointerSystem"]=mc;mc.__name__=!0;mc.prototype={__class__:mc};var I=function(a,c,e){null==e&&(e=!1);null==c&&(c=0);null==a&&(a=0);this.down=new v;this.move=new v;this.up=new v;this._x=a;this._y=c;this._isDown=e};d["flambe.platform.BasicPointer"]=I;I.__name__=!0;I.__interfaces__=[mc];I.prototype={submitDown:function(a,c,e){if(!this._isDown){this.submitMove(a,c,e);this._isDown=!0;var b=[],
f=k.hitTest(o.root,a,c);if(null!=f){var d=f.owner;do{var g=d._compMap.Sprite_2;null!=g&&b.push(g);d=d.parent}while(null!=d)}this.prepare(a,c,f,e);for(a=0;a<b.length;)if(c=b[a],++a,c.onPointerDown(I._sharedEvent),I._sharedEvent._stopped)return;this.down.emit(I._sharedEvent)}},submitMove:function(a,c,e){if(!(a==this._x&&c==this._y)){var b=[],f=k.hitTest(o.root,a,c);if(null!=f){var d=f.owner;do{var g=d._compMap.Sprite_2;null!=g&&b.push(g);d=d.parent}while(null!=d)}this.prepare(a,c,f,e);for(a=0;a<b.length;)if(c=
b[a],++a,c.onPointerMove(I._sharedEvent),I._sharedEvent._stopped)return;this.move.emit(I._sharedEvent)}},submitUp:function(a,c,e){if(this._isDown){this.submitMove(a,c,e);this._isDown=!1;var b=[],f=k.hitTest(o.root,a,c);if(null!=f){var d=f.owner;do{var g=d._compMap.Sprite_2;null!=g&&b.push(g);d=d.parent}while(null!=d)}this.prepare(a,c,f,e);for(a=0;a<b.length;)if(c=b[a],++a,c.onPointerUp(I._sharedEvent),I._sharedEvent._stopped)return;this.up.emit(I._sharedEvent)}},prepare:function(a,c,b,r){this._x=
a;this._y=c;I._sharedEvent.init(I._sharedEvent.id+1,a,c,b,r)},__class__:I};var ia=function(a,c,b){this._parent=null;this.rootX=this.rootY=0;this._disposed=!1;this.root=a;this._width=c;this._height=b};d["flambe.platform.BasicTexture"]=ia;ia.__name__=!0;ia.__interfaces__=[zc];ia.__super__=F;ia.prototype=m(F.prototype,{onDisposed:function(){null==this._parent&&this.root.dispose()},get_width:function(){return this._width},get_height:function(){return this._height},__class__:ia});var Ac=function(){};d["flambe.subsystem.TouchSystem"]=
Ac;Ac.__name__=!0;var fb=function(a,c){null==c&&(c=4);this._pointer=a;this._maxPoints=c;this._pointMap=new fa;this._points=[];this.down=new v;this.move=new v;this.up=new v};d["flambe.platform.BasicTouch"]=fb;fb.__name__=!0;fb.__interfaces__=[Ac];fb.prototype={submitDown:function(a,c,b){if(!this._pointMap.exists(a)){var r=new ic(a);r.init(c,b);this._pointMap.set(a,r);this._points.push(r);null==this._pointerTouch&&(this._pointerTouch=r,this._pointer.submitDown(c,b,r._source));this.down.emit(r)}},submitMove:function(a,
c,b){a=this._pointMap.get(a);null!=a&&(a.init(c,b),this._pointerTouch==a&&this._pointer.submitMove(c,b,a._source),this.move.emit(a))},submitUp:function(a,c,b){var r=this._pointMap.get(a);null!=r&&(r.init(c,b),this._pointMap.remove(a),y.remove(this._points,r),this._pointerTouch==r&&(this._pointerTouch=null,this._pointer.submitUp(c,b,r._source)),this.up.emit(r))},__class__:fb};var Ga=function(){};d["flambe.sound.Sound"]=Ga;Ga.__name__=!0;Ga.__interfaces__=[ta];Ga.prototype={__class__:Ga};var W=function(){this._disposed=
!1;this._playback=new pb(this)};d["flambe.platform.DummySound"]=W;W.__name__=!0;W.__interfaces__=[Ga];W.getInstance=function(){null==W._instance&&(W._instance=new W);return W._instance};W.__super__=F;W.prototype=m(F.prototype,{play:function(){return this._playback},loop:function(){return this._playback},onDisposed:function(){},__class__:W});var Ha=function(){};d["flambe.sound.Playback"]=Ha;Ha.__name__=!0;Ha.__interfaces__=[da];Ha.prototype={__class__:Ha};var pb=function(a){this._sound=a;this.volume=
new w(0);this._complete=new K(!0)};d["flambe.platform.DummyPlayback"]=pb;pb.__name__=!0;pb.__interfaces__=[Ha];pb.prototype={get_sound:function(){return this._sound},dispose:function(){},__class__:pb};var gb=function(){this.down=new v;this.move=new v;this.up=new v};d["flambe.platform.DummyTouch"]=gb;gb.__name__=!0;gb.__interfaces__=[Ac];gb.prototype={__class__:gb};var Qa=function(){this._entries=[]};d["flambe.platform.EventGroup"]=Qa;Qa.__name__=!0;Qa.__interfaces__=[da];Qa.prototype={addListener:function(a,
c,b){a.addEventListener(c,b,!1);this._entries.push(new nc(a,c,b))},addDisposingListener:function(a,c,b){var r=this;this.addListener(a,c,function(a){r.dispose();b(a)})},dispose:function(){for(var a=0,c=this._entries;a<c.length;){var b=c[a];++a;b.dispatcher.removeEventListener(b.type,b.listener,!1)}this._entries=[]},__class__:Qa};var nc=function(a,c,b){this.dispatcher=a;this.type=c;this.listener=b};d["flambe.platform._EventGroup.Entry"]=nc;nc.__name__=!0;nc.prototype={__class__:nc};var Ra=function(){};
d["flambe.platform.InternalGraphics"]=Ra;Ra.__name__=!0;Ra.__interfaces__=[ec];Ra.prototype={__class__:Ra};var oc=function(){};d["flambe.subsystem.RendererSystem"]=oc;oc.__name__=!0;oc.prototype={__class__:oc};var Sa=function(){};d["flambe.platform.InternalRenderer"]=Sa;Sa.__name__=!0;Sa.__interfaces__=[oc];Sa.prototype={__class__:Sa};var kc=function(){};d["flambe.platform.KeyCodes"]=kc;kc.__name__=!0;kc.toKey=function(a){switch(a){case 65:return b.A;case 66:return b.B;case 67:return b.C;case 68:return b.D;
case 69:return b.E;case 70:return b.F;case 71:return b.G;case 72:return b.H;case 73:return b.I;case 74:return b.J;case 75:return b.K;case 76:return b.L;case 77:return b.M;case 78:return b.N;case 79:return b.O;case 80:return b.P;case 81:return b.Q;case 82:return b.R;case 83:return b.S;case 84:return b.T;case 85:return b.U;case 86:return b.V;case 87:return b.W;case 88:return b.X;case 89:return b.Y;case 90:return b.Z;case 48:return b.Number0;case 49:return b.Number1;case 50:return b.Number2;case 51:return b.Number3;
case 52:return b.Number4;case 53:return b.Number5;case 54:return b.Number6;case 55:return b.Number7;case 56:return b.Number8;case 57:return b.Number9;case 96:return b.Numpad0;case 97:return b.Numpad1;case 98:return b.Numpad2;case 99:return b.Numpad3;case 100:return b.Numpad4;case 101:return b.Numpad5;case 102:return b.Numpad6;case 103:return b.Numpad7;case 104:return b.Numpad8;case 105:return b.Numpad9;case 107:return b.NumpadAdd;case 110:return b.NumpadDecimal;case 111:return b.NumpadDivide;case 108:return b.NumpadEnter;
case 106:return b.NumpadMultiply;case 109:return b.NumpadSubtract;case 112:return b.F1;case 113:return b.F2;case 114:return b.F3;case 115:return b.F4;case 116:return b.F5;case 117:return b.F6;case 118:return b.F7;case 119:return b.F8;case 120:return b.F9;case 121:return b.F10;case 122:return b.F11;case 123:return b.F12;case 37:return b.Left;case 38:return b.Up;case 39:return b.Right;case 40:return b.Down;case 18:return b.Alt;case 192:return b.Backquote;case 220:return b.Backslash;case 8:return b.Backspace;
case 20:return b.CapsLock;case 188:return b.Comma;case 15:return b.Command;case 17:return b.Control;case 46:return b.Delete;case 35:return b.End;case 13:return b.Enter;case 187:return b.Equals;case 27:return b.Escape;case 36:return b.Home;case 45:return b.Insert;case 219:return b.LeftBracket;case 189:return b.Minus;case 34:return b.PageDown;case 33:return b.PageUp;case 190:return b.Period;case 222:return b.Quote;case 221:return b.RightBracket;case 186:return b.Semicolon;case 16:return b.Shift;case 191:return b.Slash;
case 32:return b.Space;case 9:return b.Tab;case 16777234:return b.Menu;case 16777247:return b.Search}return b.Unknown(a)};var Aa=function(){this._tickables=[]};d["flambe.platform.MainLoop"]=Aa;Aa.__name__=!0;Aa.updateEntity=function(a,c){var b=a._compMap.SpeedAdjuster_14;if(null!=b&&(b._realDt=c,c*=b.scale._value,0>=c)){b.onUpdate(c);return}for(b=a.firstComponent;null!=b;){var r=b.next;b.onUpdate(c);b=r}for(b=a.firstChild;null!=b;)r=b.next,Aa.updateEntity(b,c),b=r};Aa.prototype={update:function(a){if(!(0>=
a)){1<a&&(a=1);for(var c=0;c<this._tickables.length;){var b=this._tickables[c];null==b||b.update(a)?this._tickables.splice(c,1):++c}o.volume.update(a);Aa.updateEntity(o.root,a)}},render:function(a){var c=a.graphics;null!=c&&(a.willRender(),k.render(o.root,c),a.didRender())},addTickable:function(a){this._tickables.push(a)},__class__:Aa};var pc=function(){};d["flambe.platform.MathUtil"]=pc;pc.__name__=!0;pc.nextPowerOfTwo=function(a){for(var c=1;c<a;)c<<=1;return c};var lc=function(){};d["flambe.platform.MouseCodes"]=
lc;lc.__name__=!0;lc.toButton=function(a){switch(a){case 0:return E.Left;case 1:return E.Middle;case 2:return E.Right}return E.Unknown(a)};var Bc=function(){};d["flambe.platform.TextureRoot"]=Bc;Bc.__name__=!0;var qb=function(){};d["flambe.platform.Tickable"]=qb;qb.__name__=!0;qb.prototype={__class__:qb};var rb=function(a){this._firstDraw=!1;this._canvasCtx=a.getContext("2d")};d["flambe.platform.html.CanvasGraphics"]=rb;rb.__name__=!0;rb.__interfaces__=[Ra];rb.prototype={save:function(){this._canvasCtx.save()},
transform:function(a,c,b,r,f,d){this._canvasCtx.transform(a,c,b,r,f,d)},restore:function(){this._canvasCtx.restore()},drawTexture:function(a,c,b){this.drawSubTexture(a,c,b,0,0,a.get_width(),a.get_height())},drawSubTexture:function(a,c,b,r,f,d,g){this._firstDraw?(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.drawSubTexture(a,c,b,r,f,d,g),this._canvasCtx.globalCompositeOperation="source-over"):this._canvasCtx.drawImage(a.root.image,a.rootX+r|0,a.rootY+f|0,d|0,g|0,c|0,b|0,d|
0,g|0)},drawPattern:function(a,c,b,r,f){this._firstDraw?(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.drawPattern(a,c,b,r,f),this._canvasCtx.globalCompositeOperation="source-over"):(this._canvasCtx.fillStyle=a.getPattern(),this._canvasCtx.fillRect(c|0,b|0,r|0,f|0))},fillRect:function(a,c,b,r,f){if(this._firstDraw)this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.fillRect(a,c,b,r,f),this._canvasCtx.globalCompositeOperation="source-over";else{for(a=(16777215&
a).toString(16);6>a.length;)a="0"+z.string(a);this._canvasCtx.fillStyle="#"+z.string(a);this._canvasCtx.fillRect(c|0,b|0,r|0,f|0)}},multiplyAlpha:function(a){this._canvasCtx.globalAlpha*=a},setBlendMode:function(a){var c;switch(a[1]){case 0:c="source-over";break;case 1:c="lighter";break;case 2:c="destination-in";break;case 3:c="copy"}this._canvasCtx.globalCompositeOperation=c},applyScissor:function(a,c,b,r){this._canvasCtx.beginPath();this._canvasCtx.rect(a|0,c|0,b|0,r|0);this._canvasCtx.clip()},
willRender:function(){this._firstDraw=!0},didRender:function(){},onResize:function(){},__class__:rb};var Ba=function(a){this.graphics=new rb(a);this._hasGPU=new K(!0)};d["flambe.platform.html.CanvasRenderer"]=Ba;Ba.__name__=!0;Ba.__interfaces__=[Sa];Ba.prototype={get_type:function(){return T.Canvas},createTextureFromImage:function(a){a=new Ta(Ba.CANVAS_TEXTURES?n.createCanvas(a):a);return a.createTexture(a.width,a.height)},getCompressedTextureFormats:function(){return[]},createCompressedTexture:function(){return null},
willRender:function(){this.graphics.willRender()},didRender:function(){this.graphics.didRender()},__class__:Ba};var sb=function(a,c,b){this._rootUpdateCount=0;this._pattern=null;ia.call(this,a,c,b)};d["flambe.platform.html.CanvasTexture"]=sb;sb.__name__=!0;sb.__super__=ia;sb.prototype=m(ia.prototype,{getPattern:function(){if(this._rootUpdateCount!=this.root.updateCount||null==this._pattern)this._rootUpdateCount=this.root.updateCount,this._pattern=this.root.createPattern(this.rootX,this.rootY,this._width,
this._height);return this._pattern},__class__:sb});var Ta=function(a){this._graphics=null;this.updateCount=0;this._disposed=!1;this.image=a;this.width=a.width;this.height=a.height};d["flambe.platform.html.CanvasTextureRoot"]=Ta;Ta.__name__=!0;Ta.__interfaces__=[Bc];Ta.__super__=F;Ta.prototype=m(F.prototype,{createTexture:function(a,c){return new sb(this,a,c)},createPattern:function(a,c,b,r){var f=this.getContext2d(),d=this.image;if(0!=a||0!=c||b!=this.width||r!=this.height)d=n.createEmptyCanvas(b,
r),b=d.getContext("2d"),b.globalCompositeOperation="copy",b.drawImage(this.image,-a,-c);return f.createPattern(d,"repeat")},getContext2d:function(){u.__instanceof(this.image,HTMLCanvasElement)||(this.image=n.createCanvas(this.image));return this.image.getContext("2d")},onDisposed:function(){this._graphics=this.image=null},__class__:Ta});var s=function(a,c){wa.call(this,a,c)};d["flambe.platform.html.HtmlAssetPackLoader"]=s;s.__name__=!0;s.detectImageFormats=function(a){var c=[g.PNG,g.JPG,g.GIF],b=
2,d;d=window.document.createElement("img");d.onload=d.onerror=function(){1==d.width&&c.unshift(g.WEBP);--b;0==b&&a(c)};d.src="data:image/webp;base64,UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==";var f;f=window.document.createElement("img");f.onload=f.onerror=function(){1==f.width&&c.unshift(g.JXR);--b;0==b&&a(c)};f.src="data:image/vnd.ms-photo;base64,SUm8AQgAAAAFAAG8AQAQAAAASgAAAIC8BAABAAAAAQAAAIG8BAABAAAAAQAAAMC8BAABAAAAWgAAAMG8BAABAAAAHwAAAAAAAAAkw91vA07+S7GFPXd2jckNV01QSE9UTwAZAYBxAAAAABP/gAAEb/8AAQAAAQAAAA=="};
s.detectAudioFormats=function(){var a;a=window.document.createElement("audio");if(null==a||null==H(a,a.canPlayType))return[];var c=new oa("\\b(iPhone|iPod|iPad|Android|Windows Phone)\\b",""),b=window.navigator.userAgent;if(!t.get_supported()&&c.match(b))return[];for(var c=[{format:g.M4A,mimeType:"audio/mp4; codecs=mp4a"},{format:g.MP3,mimeType:"audio/mpeg"},{format:g.OPUS,mimeType:"audio/ogg; codecs=opus"},{format:g.OGG,mimeType:"audio/ogg; codecs=vorbis"},{format:g.WAV,mimeType:"audio/wav"}],b=[],
d=0;d<c.length;){var f=c[d];++d;var h="";try{h=a.canPlayType(f.mimeType)}catch(i){}""!=h&&b.push(f.format)}return b};s.supportsBlob=function(){if(s._detectBlobSupport){s._detectBlobSupport=!1;if((new oa("\\bSilk\\b","")).match(window.navigator.userAgent)||null==window.Blob)return!1;var a=new XMLHttpRequest;a.open("GET",".",!0);if(""!=a.responseType)return!1;a.responseType="blob";if("blob"!=a.responseType)return!1;s._URL=n.loadExtension("URL").value}return null!=s._URL&&null!=s._URL.createObjectURL};
s.__super__=wa;s.prototype=m(wa.prototype,{loadEntry:function(a,c){var b=this;switch(c.format[1]){case 0:case 1:case 2:case 3:case 4:var d;d=window.document.createElement("img");var f=new Qa;f.addDisposingListener(d,"load",function(){s.supportsBlob()&&s._URL.revokeObjectURL(d.src);var a=b._platform.getRenderer().createTextureFromImage(d);null!=a?b.handleLoad(c,a):b.handleTextureError(c)});f.addDisposingListener(d,"error",function(){b.handleError(c,"Failed to load image")});s.supportsBlob()?this.download(a,
c,"blob",function(a){d.src=s._URL.createObjectURL(a)}):d.src=a;break;case 5:case 6:case 7:this.download(a,c,"arraybuffer",function(){var a=b._platform.getRenderer().createCompressedTexture(c.format,null);null!=a?b.handleLoad(c,a):b.handleTextureError(c)});break;case 8:case 9:case 10:case 11:case 12:if(t.get_supported())this.download(a,c,"arraybuffer",function(a){t.ctx.decodeAudioData(a,function(a){b.handleLoad(c,new t(a))},function(){b.handleLoad(c,W.getInstance())})});else{var h;h=window.document.createElement("audio");
h.preload="auto";var g=++s._mediaRefCount;null==s._mediaElements&&(s._mediaElements=new fa);s._mediaElements.set(g,h);f=new Qa;f.addDisposingListener(h,"canplaythrough",function(){s._mediaElements.remove(g);b.handleLoad(c,new Ua(h))});f.addDisposingListener(h,"error",function(){s._mediaElements.remove(g);var a=h.error.code;3==a||4==a?b.handleLoad(c,W.getInstance()):b.handleError(c,"Failed to load audio: "+h.error.code)});f.addListener(h,"progress",function(){if(0<h.buffered.length&&0<h.duration){var a=
h.buffered.end(0)/h.duration;b.handleProgress(c,a*c.bytes|0)}});h.src=a;h.load()}break;case 13:this.download(a,c,"text",function(a){b.handleLoad(c,new Pa(a))})}},getAssetFormats:function(a){var c=this;null==s._supportedFormats&&(s._supportedFormats=new nb,s.detectImageFormats(function(a){s._supportedFormats.set_result(c._platform.getRenderer().getCompressedTextureFormats().concat(a).concat(s.detectAudioFormats()).concat([g.Data]))}));s._supportedFormats.get(a)},download:function(a,c,b,d){var f=this,
h=null,g=null,i=0,j=!1,k=function(){j&&(j=!1,window.clearInterval(i))},l=3,m=function(){--l;return 0<=l?(g(),!0):!1},g=function(){k();null!=h&&h.abort();h=new XMLHttpRequest;h.open("GET",a,!0);h.responseType=b;var g=0;h.onprogress=function(a){j||(j=!0,i=window.setInterval(function(){4!=h.readyState&&5E3<Date.now()-g&&!m()&&(k(),f.handleError(c,"Download stalled"))},1E3));g=Date.now();f.handleProgress(c,a.loaded)};h.onerror=function(){if(0!=h.status||!m())k(),f.handleError(c,"HTTP error "+h.status)};
h.onload=function(){var a=h.response;null==a&&(a=h.responseText);k();d(a)};h.send()};g()},__class__:s});var eb=function(a,c){S.call(this,a);this._canvas=c};d["flambe.platform.html.HtmlMouse"]=eb;eb.__name__=!0;eb.__super__=S;eb.prototype=m(S.prototype,{__class__:eb});var Ua=function(a){this._disposed=!1;this.audioElement=a};d["flambe.platform.html.HtmlSound"]=Ua;Ua.__name__=!0;Ua.__interfaces__=[Ga];Ua.__super__=F;Ua.prototype=m(F.prototype,{play:function(a){null==a&&(a=1);return new Va(this,a,!1)},
loop:function(a){null==a&&(a=1);return new Va(this,a,!0)},onDisposed:function(){this.audioElement=null},__class__:Ua});var Va=function(a,c,b){var d=this;this._sound=a;this._tickableAdded=!1;this._clonedElement=window.document.createElement("audio");this._clonedElement.loop=b;this._clonedElement.src=a.audioElement.src;this.volume=new w(c,function(){d.updateVolume()});this.updateVolume();this._complete=new K(!1);this.playAudio();o.hidden._value&&this.set_paused(!0)};d["flambe.platform.html._HtmlSound.HtmlPlayback"]=
Va;Va.__name__=!0;Va.__interfaces__=[qb,Ha];Va.prototype={get_sound:function(){return this._sound},set_paused:function(a){this._clonedElement.paused!=a&&(a?this._clonedElement.pause():this.playAudio());return a},update:function(a){this.volume.update(a);this._complete.set__(this._clonedElement.ended);return this._complete._value||this._clonedElement.paused?(this._tickableAdded=!1,this._volumeBinding.dispose(),this._hideBinding.dispose(),!0):!1},dispose:function(){this.set_paused(!0);this._complete.set__(!0)},
playAudio:function(){var a=this;this._clonedElement.play();this._tickableAdded||(pa.instance.mainLoop.addTickable(this),this._tickableAdded=!0,this._volumeBinding=o.volume.get_changed().connect(function(){a.updateVolume()}),this._hideBinding=o.hidden.get_changed().connect(function(c){c?(a._wasPaused=a._clonedElement.paused,a.set_paused(!0)):a.set_paused(a._wasPaused)}))},updateVolume:function(){this._clonedElement.volume=o.volume._value*this.volume._value},__class__:Va};var qc=function(){};d["flambe.subsystem.StageSystem"]=
qc;qc.__name__=!0;qc.prototype={__class__:qc};var za=function(a){var c=this;this._canvas=a;this.resize=new ha;this.scaleFactor=za.computeScaleFactor();1!=this.scaleFactor&&(n.setVendorStyle(this._canvas,"transform-origin","top left"),n.setVendorStyle(this._canvas,"transform","scale("+1/this.scaleFactor+")"));n.SHOULD_HIDE_MOBILE_BROWSER&&(window.addEventListener("orientationchange",function(){n.callLater(H(c,c.hideMobileBrowser),200)},!1),this.hideMobileBrowser());window.addEventListener("resize",
H(this,this.onWindowResize),!1);this.onWindowResize(null);this.orientation=new K(null);null!=window.orientation&&(window.addEventListener("orientationchange",H(this,this.onOrientationChange),!1),this.onOrientationChange(null));this.fullscreen=new K(!1);n.addVendorListener(window.document,"fullscreenchange",function(){c.updateFullscreen()},!1);this.updateFullscreen()};d["flambe.platform.html.HtmlStage"]=za;za.__name__=!0;za.__interfaces__=[qc];za.computeScaleFactor=function(){var a=window.devicePixelRatio;
null==a&&(a=1);var c=window.document.createElement("canvas").getContext("2d"),c=n.loadExtension("backingStorePixelRatio",c).value;null==c&&(c=1);a/=c;c=window.screen.height;return 1136<a*window.screen.width||1136<a*c?1:a};za.prototype={get_width:function(){return this._canvas.width},get_height:function(){return this._canvas.height},onWindowResize:function(){var a=this._canvas.parentElement.getBoundingClientRect();this.resizeCanvas(a.width,a.height)},resizeCanvas:function(a,c){var b=this.scaleFactor*
a,d=this.scaleFactor*c;if(this._canvas.width==b&&this._canvas.height==d)return!1;this._canvas.width=b|0;this._canvas.height=d|0;this.resize.emit();return!0},hideMobileBrowser:function(){var a=this,c=window.document.documentElement.style;c.height=window.innerHeight+100+"px";c.width=window.innerWidth+"px";c.overflow="visible";n.callLater(function(){n.hideMobileBrowser();n.callLater(function(){c.height=window.innerHeight+"px";a.onWindowResize(null)},100)})},onOrientationChange:function(){this.orientation.set__(n.orientation(window.orientation))},
updateFullscreen:function(){this.fullscreen.set__(!0==n.loadFirstExtension(["fullscreen","fullScreen","isFullScreen"],window.document).value)},__class__:za};var n=function(){};d["flambe.platform.html.HtmlUtil"]=n;n.__name__=!0;n.callLater=function(a,c){null==c&&(c=0);window.setTimeout(a,c)};n.hideMobileBrowser=function(){window.scrollTo(1,0)};n.loadExtension=function(a,c){null==c&&(c=window);var b=Ja.field(c,a);if(null!=b)return{prefix:"",field:a,value:b};for(var b=a.charAt(0).toUpperCase()+y.substr(a,
1,null),d=0,f=n.VENDOR_PREFIXES;d<f.length;){var h=f[d];++d;var g=h+b,i=Ja.field(c,g);if(null!=i)return{prefix:h,field:g,value:i}}return{prefix:null,field:null,value:null}};n.loadFirstExtension=function(a,c){for(var b=0;b<a.length;){var d=a[b];++b;d=n.loadExtension(d,c);if(null!=d.field)return d}return{prefix:null,field:null,value:null}};n.polyfill=function(a,c){null==c&&(c=window);var b=n.loadExtension(a,c).value;if(null==b)return!1;c[a]=b;return!0};n.setVendorStyle=function(a,c,b){for(var a=a.style,
d=0,f=n.VENDOR_PREFIXES;d<f.length;){var h=f[d];++d;a.setProperty("-"+h+"-"+c,b)}a.setProperty(c,b)};n.addVendorListener=function(a,c,b,d){for(var f=0,h=n.VENDOR_PREFIXES;f<h.length;){var g=h[f];++f;a.addEventListener(g+c,b,d)}a.addEventListener(c,b,d)};n.orientation=function(a){switch(a){case -90:case 90:return ma.Landscape;default:return ma.Portrait}};n.createEmptyCanvas=function(a,c){var b;b=window.document.createElement("canvas");b.width=a;b.height=c;return b};n.createCanvas=function(a){var c=
n.createEmptyCanvas(a.width,a.height),b=c.getContext("2d");b.save();b.globalCompositeOperation="copy";b.drawImage(a,0,0);b.restore();return c};n.detectSlowDriver=function(a){if(0<=window.navigator.platform.indexOf("Win")&&null!=window.chrome){for(var c=0,a=a.getSupportedExtensions();c<a.length;){var b=a[c];++c;if(0<=b.indexOf("WEBGL_compressed_texture"))return!1}return!0}return!1};n.fixAndroidMath=function(){if(0<=window.navigator.userAgent.indexOf("Linux; U; Android 4")){var a=Math.sin,c=Math.cos;
Math.sin=function(c){return 0==c?0:a(c)};Math.cos=function(a){return 0==a?1:c(a)}}};var t=function(a){this._disposed=!1;this.buffer=a};d["flambe.platform.html.WebAudioSound"]=t;t.__name__=!0;t.__interfaces__=[Ga];t.get_supported=function(){if(t._detectSupport){t._detectSupport=!1;var a=n.loadExtension("AudioContext").value;null!=a&&(t.ctx=new a,t.gain=t.createGain(),t.gain.connect(t.ctx.destination),o.volume.watch(function(a){t.gain.gain.value=a}))}return null!=t.ctx};t.createGain=function(){return null!=
t.ctx.createGain?t.ctx.createGain():t.ctx.createGainNode()};t.start=function(a,c){null!=a.start?a.start(c):a.noteOn(c)};t.__super__=F;t.prototype=m(F.prototype,{play:function(a){null==a&&(a=1);return new Wa(this,a,!1)},loop:function(a){null==a&&(a=1);return new Wa(this,a,!0)},get_duration:function(){return this.buffer.duration},onDisposed:function(){this.buffer=null},__class__:t});var Wa=function(a,c,b){var d=this;this._sound=a;this._head=t.gain;this._complete=new K(!1);this._sourceNode=t.ctx.createBufferSource();
this._sourceNode.buffer=a.buffer;this._sourceNode.loop=b;this._sourceNode.onended=function(){d._complete.set__(!0)};t.start(this._sourceNode,0);this.playAudio();this.volume=new w(c,function(a){d.setVolume(a)});1!=c&&this.setVolume(c);o.hidden._value&&this.set_paused(!0)};d["flambe.platform.html._WebAudioSound.WebAudioPlayback"]=Wa;Wa.__name__=!0;Wa.__interfaces__=[qb,Ha];Wa.prototype={get_sound:function(){return this._sound},set_paused:function(a){a!=0<=this._pausedAt&&(a?(this._sourceNode.disconnect(),
this._pausedAt=this.get_position()):this.playAudio());return a},get_position:function(){return this._complete._value?this._sound.get_duration():0<=this._pausedAt?this._pausedAt:(t.ctx.currentTime-this._startedAt)%this._sound.get_duration()},update:function(a){this.volume.update(a);3==this._sourceNode.playbackState&&this._complete.set__(!0);return this._complete._value||0<=this._pausedAt?(this._tickableAdded=!1,this._hideBinding.dispose(),!0):!1},dispose:function(){this.set_paused(!0);this._complete.set__(!0)},
setVolume:function(a){null==this._gainNode&&(this._gainNode=t.createGain(),this.insertNode(this._gainNode));this._gainNode.gain.value=a},insertNode:function(a){0<=this._pausedAt||(this._sourceNode.disconnect(),this._sourceNode.connect(a));a.connect(this._head);this._head=a},playAudio:function(){var a=this;this._sourceNode.connect(this._head);this._startedAt=t.ctx.currentTime;this._pausedAt=-1;this._tickableAdded||(pa.instance.mainLoop.addTickable(this),this._tickableAdded=!0,this._hideBinding=o.hidden.get_changed().connect(function(c){c?
(a._wasPaused=0<=a._pausedAt,a.set_paused(!0)):a.set_paused(a._wasPaused)}))},__class__:Wa};var rc=function(a){this._quads=this._maxQuads=this._dataOffset=this._backbufferWidth=this._backbufferHeight=0;this._pendingSetScissor=!1;this._lastBlendMode=this._lastRenderTarget=this._lastShader=this._lastTexture=this._lastScissor=this._currentBlendMode=this._currentShader=this._currentTexture=this._currentRenderTarget=null;this._gl=a;a.clearColor(0,0,0,0);a.enable(3042);a.pixelStorei(37441,1);this._vertexBuffer=
a.createBuffer();a.bindBuffer(34962,this._vertexBuffer);this._quadIndexBuffer=a.createBuffer();a.bindBuffer(34963,this._quadIndexBuffer);this._drawTextureShader=new tb(a);this._drawPatternShader=new ub(a);this._fillRectShader=new vb(a);this.resize(16)};d["flambe.platform.html.WebGLBatcher"]=rc;rc.__name__=!0;rc.prototype={resizeBackbuffer:function(a,c){this._gl.viewport(0,0,a,c);this._backbufferWidth=a;this._backbufferHeight=c},willRender:function(){},didRender:function(){this.flush()},bindTexture:function(a){this.flush();
this._currentTexture=this._lastTexture=null;this._gl.bindTexture(3553,a)},deleteTexture:function(a){null!=this._lastTexture&&this._lastTexture.root==a&&(this.flush(),this._currentTexture=this._lastTexture=null);this._gl.deleteTexture(a.nativeTexture)},deleteFramebuffer:function(a){a==this._lastRenderTarget&&(this.flush(),this._currentRenderTarget=this._lastRenderTarget=null);this._gl.deleteFramebuffer(a.framebuffer)},prepareDrawTexture:function(a,c,b,d){d!=this._lastTexture&&(this.flush(),this._lastTexture=
d);return this.prepareQuad(5,a,c,b,this._drawTextureShader)},prepareDrawPattern:function(a,c,b,d){d!=this._lastTexture&&(this.flush(),this._lastTexture=d);return this.prepareQuad(5,a,c,b,this._drawPatternShader)},prepareFillRect:function(a,c,b){return this.prepareQuad(6,a,c,b,this._fillRectShader)},prepareQuad:function(a,c,b,d,f){c!=this._lastRenderTarget&&(this.flush(),this._lastRenderTarget=c);b!=this._lastBlendMode&&(this.flush(),this._lastBlendMode=b);f!=this._lastShader&&(this.flush(),this._lastShader=
f);if(null!=d||null!=this._lastScissor)if(null==d||null==this._lastScissor||!this._lastScissor.equals(d))this.flush(),this._lastScissor=null!=d?d.clone(this._lastScissor):null,this._pendingSetScissor=!0;this._quads>=this._maxQuads&&this.resize(2*this._maxQuads);++this._quads;c=this._dataOffset;this._dataOffset+=4*a;return c},flush:function(){if(!(1>this._quads)){this._lastRenderTarget!=this._currentRenderTarget&&this.bindRenderTarget(this._lastRenderTarget);if(this._lastBlendMode!=this._currentBlendMode){switch(this._lastBlendMode[1]){case 0:this._gl.blendFunc(1,
771);break;case 1:this._gl.blendFunc(1,1);break;case 2:this._gl.blendFunc(0,770);break;case 3:this._gl.blendFunc(1,0)}this._currentBlendMode=this._lastBlendMode}this._pendingSetScissor&&(null!=this._lastScissor?(this._gl.enable(3089),this._gl.scissor(this._lastScissor.x|0,this._lastScissor.y|0,this._lastScissor.width|0,this._lastScissor.height|0)):this._gl.disable(3089),this._pendingSetScissor=!1);this._lastTexture!=this._currentTexture&&(this._gl.bindTexture(3553,this._lastTexture.root.nativeTexture),
this._currentTexture=this._lastTexture);this._lastShader!=this._currentShader&&(this._lastShader.useProgram(),this._lastShader.prepare(),this._currentShader=this._lastShader);if(this._lastShader==this._drawPatternShader){var a=this._lastTexture,c=a.root;this._drawPatternShader.setRegion(a.rootX/c.width,a.rootY/c.height,a._width/c.width,a._height/c.height)}this._gl.bufferData(34962,this.data.subarray(0,this._dataOffset),35040);this._gl.drawElements(4,6*this._quads,5123,0);this._dataOffset=this._quads=
0}},resize:function(a){this.flush();if(!(1024<a)){this._maxQuads=a;this.data=new Float32Array(24*a);this._gl.bufferData(34962,4*this.data.length,35040);for(var c=new Uint16Array(6*a),b=0;b<a;){var d=b++;c[6*d]=4*d;c[6*d+1]=4*d+1;c[6*d+2]=4*d+2;c[6*d+3]=4*d+2;c[6*d+4]=4*d+3;c[6*d+5]=4*d}this._gl.bufferData(34963,c,35044)}},bindRenderTarget:function(a){null!=a?(this._gl.bindFramebuffer(36160,a.framebuffer),this._gl.viewport(0,0,a.width,a.height)):(this._gl.bindFramebuffer(36160,null),this._gl.viewport(0,
0,this._backbufferWidth,this._backbufferHeight));this._lastRenderTarget=this._currentRenderTarget=a},__class__:rc};var ca=function(a,c){this._inverseProjection=this._stateList=null;null==ca._scratchQuadArray&&(ca._scratchQuadArray=new Float32Array(8));this._batcher=a;this._renderTarget=c};d["flambe.platform.html.WebGLGraphics"]=ca;ca.__name__=!0;ca.__interfaces__=[Ra];ca.prototype={save:function(){var a=this._stateList,c=this._stateList.next;null==c&&(c=new wb,c.prev=a,a.next=c);a.matrix.clone(c.matrix);
c.alpha=a.alpha;c.blendMode=a.blendMode;c.scissor=null!=a.scissor?a.scissor.clone(c.scissor):null;this._stateList=c},transform:function(a,c,b,d,f,h){var g=this._stateList;ca._scratchMatrix.set(a,c,b,d,f,h);ea.multiply(g.matrix,ca._scratchMatrix,g.matrix)},restore:function(){this._stateList=this._stateList.prev},drawTexture:function(a,c,b){this.drawSubTexture(a,c,b,0,0,a.get_width(),a.get_height())},drawSubTexture:function(a,c,b,d,f,h,g){var i=this._stateList,j=a.root,c=this.transformQuad(c,b,h,g),
b=j.width,j=j.height,d=(a.rootX+d)/b,f=(a.rootY+f)/j,h=d+h/b,g=f+g/j,b=i.alpha,a=this._batcher.prepareDrawTexture(this._renderTarget,i.blendMode,i.scissor,a),i=this._batcher.data;i[a]=c[0];i[++a]=c[1];i[++a]=d;i[++a]=f;i[++a]=b;i[++a]=c[2];i[++a]=c[3];i[++a]=h;i[++a]=f;i[++a]=b;i[++a]=c[4];i[++a]=c[5];i[++a]=h;i[++a]=g;i[++a]=b;i[++a]=c[6];i[++a]=c[7];i[++a]=d;i[++a]=g;i[++a]=b},drawPattern:function(a,c,b,d,f){var h=this._stateList,g=a.root,c=this.transformQuad(c,b,d,f),d=d/g.width,f=f/g.height,g=
h.alpha,a=this._batcher.prepareDrawPattern(this._renderTarget,h.blendMode,h.scissor,a),h=this._batcher.data;h[a]=c[0];h[++a]=c[1];h[++a]=0;h[++a]=0;h[++a]=g;h[++a]=c[2];h[++a]=c[3];h[++a]=d;h[++a]=0;h[++a]=g;h[++a]=c[4];h[++a]=c[5];h[++a]=d;h[++a]=f;h[++a]=g;h[++a]=c[6];h[++a]=c[7];h[++a]=0;h[++a]=f;h[++a]=g},fillRect:function(a,c,b,d,f){var h=this._stateList,c=this.transformQuad(c,b,d,f),b=(a&16711680)/16711680,d=(a&65280)/65280,a=(a&255)/255,f=h.alpha,h=this._batcher.prepareFillRect(this._renderTarget,
h.blendMode,h.scissor),g=this._batcher.data;g[h]=c[0];g[++h]=c[1];g[++h]=b;g[++h]=d;g[++h]=a;g[++h]=f;g[++h]=c[2];g[++h]=c[3];g[++h]=b;g[++h]=d;g[++h]=a;g[++h]=f;g[++h]=c[4];g[++h]=c[5];g[++h]=b;g[++h]=d;g[++h]=a;g[++h]=f;g[++h]=c[6];g[++h]=c[7];g[++h]=b;g[++h]=d;g[++h]=a;g[++h]=f},multiplyAlpha:function(a){this._stateList.alpha*=a},setBlendMode:function(a){this._stateList.blendMode=a},applyScissor:function(a,c,b,d){var f=this._stateList,h=ca._scratchQuadArray;h[0]=a;h[1]=c;h[2]=a+b;h[3]=c+d;f.matrix.transformArray(h,
4,h);this._inverseProjection.transformArray(h,4,h);a=h[0];c=h[1];b=h[2]-a;d=h[3]-c;0>b&&(a+=b,b=-b);0>d&&(c+=d,d=-d);f.applyScissor(a,c,b,d)},willRender:function(){this._batcher.willRender()},didRender:function(){this._batcher.didRender()},onResize:function(a,c){this._stateList=new wb;var b;b=null!=this._renderTarget?-1:1;this._stateList.matrix.set(2/a,0,0,-2*b/c,-1,b);this._inverseProjection=new ea;this._inverseProjection.set(2/a,0,0,2/c,-1,-1);this._inverseProjection.invert()},transformQuad:function(a,
c,b,d){var b=a+b,d=c+d,f=ca._scratchQuadArray;f[0]=a;f[1]=c;f[2]=b;f[3]=c;f[4]=b;f[5]=d;f[6]=a;f[7]=d;this._stateList.matrix.transformArray(f,8,f);return f},__class__:ca};var wb=function(){this.scissor=this.prev=this.next=null;this.matrix=new ea;this.alpha=1;this.blendMode=J.Normal};d["flambe.platform.html._WebGLGraphics.DrawingState"]=wb;wb.__name__=!0;wb.prototype={applyScissor:function(a,c,b,d){if(null!=this.scissor)var f=ba.max(this.scissor.x,a),h=ba.max(this.scissor.y,c),b=ba.min(this.scissor.x+
this.scissor.width,a+b),d=ba.min(this.scissor.y+this.scissor.height,c+d),a=f,c=h,b=b-f,d=d-h;else this.scissor=new Ea;this.scissor.set(Math.round(a),Math.round(c),Math.round(b),Math.round(d))},__class__:wb};var hb=function(a,c){var b=this;this._hasGPU=new K(!0);this.gl=c;c.canvas.addEventListener("webglcontextlost",function(a){a.preventDefault();b._hasGPU.set__(!1)},!1);c.canvas.addEventListener("webglcontextrestore",function(){b.init();b._hasGPU.set__(!0)},!1);a.resize.connect(H(this,this.onResize));
this.init()};d["flambe.platform.html.WebGLRenderer"]=hb;hb.__name__=!0;hb.__interfaces__=[Sa];hb.prototype={get_type:function(){return T.WebGL},createTextureFromImage:function(a){if(this.gl.isContextLost())return null;var c=new xa(this,a.width,a.height);c.uploadImageData(a);return c.createTexture(a.width,a.height)},getCompressedTextureFormats:function(){return[]},createCompressedTexture:function(){this.gl.isContextLost();return null},willRender:function(){this.graphics.willRender()},didRender:function(){this.graphics.didRender()},
onResize:function(){var a=this.gl.canvas.width,c=this.gl.canvas.height;this.batcher.resizeBackbuffer(a,c);this.graphics.onResize(a,c)},init:function(){this.batcher=new rc(this.gl);this.graphics=new ca(this.batcher,null);this.onResize()},__class__:hb};var xb=function(a,c,b){ia.call(this,a,c,b)};d["flambe.platform.html.WebGLTexture"]=xb;xb.__name__=!0;xb.__super__=ia;xb.prototype=m(ia.prototype,{__class__:xb});var xa=function(a,c,b){this.framebuffer=this._graphics=null;this._disposed=!1;this._renderer=
a;this.width=ba.max(2,pc.nextPowerOfTwo(c));this.height=ba.max(2,pc.nextPowerOfTwo(b));c=a.gl;this.nativeTexture=c.createTexture();a.batcher.bindTexture(this.nativeTexture);c.texParameteri(3553,10242,33071);c.texParameteri(3553,10243,33071);c.texParameteri(3553,10240,9729);c.texParameteri(3553,10241,9728)};d["flambe.platform.html.WebGLTextureRoot"]=xa;xa.__name__=!0;xa.__interfaces__=[Bc];xa.drawBorder=function(a,c,b){var d=a.getContext("2d");d.drawImage(a,c-1,0,1,b,c,0,1,b);d.drawImage(a,0,b-1,c,
1,0,b,c,1)};xa.__super__=F;xa.prototype=m(F.prototype,{createTexture:function(a,c){return new xb(this,a,c)},uploadImageData:function(a){if(this.width!=a.width||this.height!=a.height){var c=n.createEmptyCanvas(this.width,this.height);c.getContext("2d").drawImage(a,0,0);xa.drawBorder(c,a.width,a.height);a=c}this._renderer.batcher.bindTexture(this.nativeTexture);this._renderer.gl.texImage2D(3553,0,6408,6408,5121,a)},onDisposed:function(){var a=this._renderer.batcher;a.deleteTexture(this);null!=this.framebuffer&&
a.deleteFramebuffer(this);this._graphics=this.framebuffer=this.nativeTexture=null},__class__:xa});var Q=function(a,c,b){b="#ifdef GL_ES\nprecision mediump float;\n#endif\n"+b;this._gl=a;this._program=a.createProgram();a.attachShader(this._program,Q.createShader(a,35633,c));a.attachShader(this._program,Q.createShader(a,35632,b));a.linkProgram(this._program);a.useProgram(this._program)};d["flambe.platform.shader.ShaderGL"]=Q;Q.__name__=!0;Q.createShader=function(a,c,b){c=a.createShader(c);a.shaderSource(c,
b);a.compileShader(c);return c};Q.prototype={useProgram:function(){this._gl.useProgram(this._program)},prepare:function(){null},getAttribLocation:function(a){return this._gl.getAttribLocation(this._program,a)},getUniformLocation:function(a){return this._gl.getUniformLocation(this._program,a)},__class__:Q};var ub=function(a){Q.call(this,a,"attribute highp vec2 a_pos;\nattribute mediump vec2 a_uv;\nattribute lowp float a_alpha;\nvarying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nvoid main (void) {\nv_uv = a_uv;\nv_alpha = a_alpha;\ngl_Position = vec4(a_pos, 0, 1);\n}",
"varying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nuniform lowp sampler2D u_texture;\nuniform mediump vec4 u_region;\nvoid main (void) {\ngl_FragColor = texture2D(u_texture, u_region.xy + mod(v_uv, u_region.zw)) * v_alpha;\n}");this.a_pos=this.getAttribLocation("a_pos");this.a_uv=this.getAttribLocation("a_uv");this.a_alpha=this.getAttribLocation("a_alpha");this.u_texture=this.getUniformLocation("u_texture");this.u_region=this.getUniformLocation("u_region");this.setTexture(0)};d["flambe.platform.shader.DrawPatternGL"]=
ub;ub.__name__=!0;ub.__super__=Q;ub.prototype=m(Q.prototype,{setTexture:function(a){this._gl.uniform1i(this.u_texture,a)},setRegion:function(a,c,b,d){this._gl.uniform4f(this.u_region,a,c,b,d)},prepare:function(){this._gl.enableVertexAttribArray(this.a_pos);this._gl.enableVertexAttribArray(this.a_uv);this._gl.enableVertexAttribArray(this.a_alpha);this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,20,0);this._gl.vertexAttribPointer(this.a_uv,2,5126,!1,20,8);this._gl.vertexAttribPointer(this.a_alpha,
1,5126,!1,20,16)},__class__:ub});var tb=function(a){Q.call(this,a,"attribute highp vec2 a_pos;\nattribute mediump vec2 a_uv;\nattribute lowp float a_alpha;\nvarying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nvoid main (void) {\nv_uv = a_uv;\nv_alpha = a_alpha;\ngl_Position = vec4(a_pos, 0, 1);\n}","varying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nuniform lowp sampler2D u_texture;\nvoid main (void) {\ngl_FragColor = texture2D(u_texture, v_uv) * v_alpha;\n}");this.a_pos=this.getAttribLocation("a_pos");
this.a_uv=this.getAttribLocation("a_uv");this.a_alpha=this.getAttribLocation("a_alpha");this.u_texture=this.getUniformLocation("u_texture");this.setTexture(0)};d["flambe.platform.shader.DrawTextureGL"]=tb;tb.__name__=!0;tb.__super__=Q;tb.prototype=m(Q.prototype,{setTexture:function(a){this._gl.uniform1i(this.u_texture,a)},prepare:function(){this._gl.enableVertexAttribArray(this.a_pos);this._gl.enableVertexAttribArray(this.a_uv);this._gl.enableVertexAttribArray(this.a_alpha);this._gl.vertexAttribPointer(this.a_pos,
2,5126,!1,20,0);this._gl.vertexAttribPointer(this.a_uv,2,5126,!1,20,8);this._gl.vertexAttribPointer(this.a_alpha,1,5126,!1,20,16)},__class__:tb});var vb=function(a){Q.call(this,a,"attribute highp vec2 a_pos;\nattribute lowp vec3 a_rgb;\nattribute lowp float a_alpha;\nvarying lowp vec4 v_color;\nvoid main (void) {\nv_color = vec4(a_rgb*a_alpha, a_alpha);\ngl_Position = vec4(a_pos, 0, 1);\n}","varying lowp vec4 v_color;\nvoid main (void) {\ngl_FragColor = v_color;\n}");this.a_pos=this.getAttribLocation("a_pos");
this.a_rgb=this.getAttribLocation("a_rgb");this.a_alpha=this.getAttribLocation("a_alpha")};d["flambe.platform.shader.FillRectGL"]=vb;vb.__name__=!0;vb.__super__=Q;vb.prototype=m(Q.prototype,{prepare:function(){this._gl.enableVertexAttribArray(this.a_pos);this._gl.enableVertexAttribArray(this.a_rgb);this._gl.enableVertexAttribArray(this.a_alpha);this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,24,0);this._gl.vertexAttribPointer(this.a_rgb,3,5126,!1,24,8);this._gl.vertexAttribPointer(this.a_alpha,
1,5126,!1,24,20)},__class__:vb});var yb=function(){this._transitor=null;this.scenes=[];this.occludedScenes=[];this._root=new l};d["flambe.scene.Director"]=yb;yb.__name__=!0;yb.__super__=q;yb.prototype=m(q.prototype,{get_name:function(){return"Director_13"},pushScene:function(a,c){var b=this;this.completeTransition();var d=this.get_topScene();null!=d?this.playTransition(d,a,c,function(){b.hide(d)}):(this.add(a),this.invalidateVisibility())},unwindToScene:function(a,c){var b=this;this.completeTransition();
var d=this.get_topScene();if(null!=d){if(d!=a){for(this.scenes.pop();0<this.scenes.length&&this.scenes[this.scenes.length-1]!=a;)this.scenes.pop().dispose();this.playTransition(d,a,c,function(){b.hideAndDispose(d)})}}else this.pushScene(a,c)},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.completeTransition();for(var a=0,c=this.scenes;a<c.length;){var b=c[a];++a;b.dispose()}this.scenes=[];this.occludedScenes=[];this._root.dispose()},onUpdate:function(a){null!=this._transitor&&
this._transitor.update(a)&&this.completeTransition()},get_topScene:function(){var a=this.scenes.length;return 0<a?this.scenes[a-1]:null},add:function(a){var c=this.get_topScene();null!=c&&this._root.removeChild(c);y.remove(this.scenes,a);this.scenes.push(a);this._root.addChild(a)},hide:function(a){a=a._compMap.Scene_0;null!=a&&a.hidden.emit()},hideAndDispose:function(a){this.hide(a);a.dispose()},show:function(a){a=a._compMap.Scene_0;null!=a&&a.shown.emit()},invalidateVisibility:function(){for(var a=
this.scenes.length;0<a;){var c=this.scenes[--a]._compMap.Scene_0;if(null==c||c.opaque)break}this.occludedScenes=0<this.scenes.length?this.scenes.slice(a,this.scenes.length-1):[];a=this.get_topScene();null!=a&&this.show(a)},completeTransition:function(){null!=this._transitor&&(this._transitor.complete(),this._transitor=null,this.invalidateVisibility())},playTransition:function(a,c,b,d){this.completeTransition();this.add(c);null!=b?(this.occludedScenes.push(a),this._transitor=new sc(a,c,b,d),this._transitor.init(this)):
(d(),this.invalidateVisibility())},__class__:yb});var sc=function(a,c,b,d){this._from=a;this._to=c;this._transition=b;this._onComplete=d};d["flambe.scene._Director.Transitor"]=sc;sc.__name__=!0;sc.prototype={init:function(a){this._transition.init(a,this._from,this._to)},update:function(a){return this._transition.update(a)},complete:function(){this._transition.complete();this._onComplete()},__class__:sc};var B=function(a){null==a&&(a=!0);this.opaque=a;this.shown=new ha;this.hidden=new ha};d["flambe.scene.Scene"]=
B;B.__name__=!0;B.__super__=q;B.prototype=m(q.prototype,{get_name:function(){return"Scene_0"},__class__:B});var Cc=function(){};d["flambe.scene.Transition"]=Cc;Cc.__name__=!0;Cc.prototype={init:function(a,c,b){this._director=a;this._from=c;this._to=b},update:function(){return!0},complete:function(){},__class__:Cc};var qa=function(){};d["flambe.script.Action"]=qa;qa.__name__=!0;qa.prototype={__class__:qa};var Xa=function(a,c,b,d){this._value=a;this._to=c;this._seconds=b;this._easing=d};d["flambe.script.AnimateTo"]=
Xa;Xa.__name__=!0;Xa.__interfaces__=[qa];Xa.prototype={update:function(a){null==this._tween&&(this._tween=new Ma(this._value._value,this._to,this._seconds,this._easing),this._value.set_behavior(this._tween),this._value.update(a));if(this._value._behavior!=this._tween){var c=this._tween.elapsed-this._seconds;this._tween=null;return 0<c?a-c:0}return-1},__class__:Xa};var ja=function(a){this._fn=a};d["flambe.script.CallFunction"]=ja;ja.__name__=!0;ja.__interfaces__=[qa];ja.prototype={update:function(){this._fn();
return 0},__class__:ja};var zb=function(a){this._duration=a;this._elapsed=0};d["flambe.script.Delay"]=zb;zb.__name__=!0;zb.__interfaces__=[qa];zb.prototype={update:function(a){this._elapsed+=a;if(this._elapsed>=this._duration){var c=this._elapsed-this._duration;this._elapsed=0;return a-c}return-1},__class__:zb};var Ab=function(a,c){null==c&&(c=-1);this._action=a;this._remaining=this._count=c};d["flambe.script.Repeat"]=Ab;Ab.__name__=!0;Ab.__interfaces__=[qa];Ab.prototype={update:function(a,c){if(0==
this._count)return 0;var b=this._action.update(a,c);return 0<this._count&&0<=b&&0==--this._remaining?(this._remaining=this._count,b):-1},__class__:Ab};var Ia=function(){this.stopAll()};d["flambe.script.Script"]=Ia;Ia.__name__=!0;Ia.__super__=q;Ia.prototype=m(q.prototype,{get_name:function(){return"Script_12"},run:function(a){a=new Bb(a);this._handles.push(a);return a},stopAll:function(){this._handles=[]},onUpdate:function(a){for(var c=0;c<this._handles.length;){var b=this._handles[c];b.removed||0<=
b.action.update(a,this.owner)?this._handles.splice(c,1):++c}},__class__:Ia});var Bb=function(a){this.removed=!1;this.action=a};d["flambe.script._Script.Handle"]=Bb;Bb.__name__=!0;Bb.__interfaces__=[da];Bb.prototype={dispose:function(){this.removed=!0;this.action=null},__class__:Bb};var Ya=function(a){this._idx=0;this._runningActions=null!=a?a.slice():[]};d["flambe.script.Sequence"]=Ya;Ya.__name__=!0;Ya.__interfaces__=[qa];Ya.prototype={add:function(a){this._runningActions.push(a)},update:function(a,
c){for(var b=0;;){var d=this._runningActions[this._idx];if(null!=d)if(d=d.update(a-b,c),0<=d)b+=d;else return-1;++this._idx;if(this._idx>=this._runningActions.length){this._idx=0;break}else if(b>a)return-1}return b},__class__:Ya};var Cb=function(a,c,b){this._strengthX=a;this._strengthY=c;this._duration=b;this._elapsed=0};d["flambe.script.Shake"]=Cb;Cb.__name__=!0;Cb.__interfaces__=[qa];Cb.prototype={update:function(a,c){var b=c._compMap.Sprite_2;null==this._jitterX&&(this._jitterX=new Na(b.x._value,
this._strengthX),this._jitterY=new Na(b.y._value,this._strengthY),b.x.set_behavior(this._jitterX),b.y.set_behavior(this._jitterY));this._elapsed+=a;if(this._elapsed>=this._duration){var d=this._elapsed-this._duration;b.x._behavior==this._jitterX&&b.x.set__(this._jitterX.base);b.y._behavior==this._jitterY&&b.y.set__(this._jitterY.base);this._jitterY=this._jitterX=null;this._elapsed=0;return a-d}return-1},__class__:Cb};var T=d["flambe.subsystem.RendererType"]={__ename__:!0,__constructs__:["Stage3D",
"WebGL","Canvas"]};T.Stage3D=["Stage3D",0];T.Stage3D.__enum__=T;T.WebGL=["WebGL",1];T.WebGL.__enum__=T;T.Canvas=["Canvas",2];T.Canvas.__enum__=T;T.__empty_constructs__=[T.Stage3D,T.WebGL,T.Canvas];var yc=function(){};d["flambe.util.Assert"]=yc;yc.__name__=!0;yc.that=function(){};var cc=function(){};d["flambe.util.BitSets"]=cc;cc.__name__=!0;cc.set=function(a,c,b){return b?a|c:a&~c};var nb=function(){this.success=new v;this.error=new v;this.progressChanged=new ha;this.hasResult=!1;this._total=this._progress=
0};d["flambe.util.Promise"]=nb;nb.__name__=!0;nb.prototype={set_result:function(a){if(this.hasResult)throw"Promise result already assigned";this._result=a;this.hasResult=!0;this.success.emit(a);return a},get:function(a){return this.hasResult?(a(this._result),null):this.success.connect(a).once()},set_progress:function(a){this._progress!=a&&(this._progress=a,this.progressChanged.emit());return a},set_total:function(a){this._total!=a&&(this._total=a,this.progressChanged.emit());return a},__class__:nb};
var ha=function(a){C.call(this,a)};d["flambe.util.Signal0"]=ha;ha.__name__=!0;ha.__super__=C;ha.prototype=m(C.prototype,{connect:function(a,c){null==c&&(c=!1);return this.connectImpl(a,c)},emit:function(){var a=this;this._head==C.DISPATCHING_SENTINEL?this.defer(function(){a.emitImpl()}):this.emitImpl()},emitImpl:function(){for(var a=this.willEmit(),c=a;null!=c;)c._listener(),c.stayInList||c.dispose(),c=c._next;this.didEmit(a)},__class__:ha});var $b=function(a){this.next=null;this.fn=a};d["flambe.util._SignalBase.Task"]=
$b;$b.__name__=!0;$b.prototype={__class__:$b};var L=function(){};d["flambe.util.Strings"]=L;L.__name__=!0;L.getFileExtension=function(a){var c=a.lastIndexOf(".");return 0<c?y.substr(a,c+1,null):null};L.removeFileExtension=function(a){var c=a.lastIndexOf(".");return 0<c?y.substr(a,0,c):a};L.getUrlExtension=function(a){var c=a.lastIndexOf("?");0<=c&&(a=y.substr(a,0,c));c=a.lastIndexOf("/");0<=c&&(a=y.substr(a,c+1,null));return L.getFileExtension(a)};L.joinPath=function(a,c){0<a.length&&47!=a.charCodeAt(a.length-
1)&&(a+="/");return a+c};L.withFields=function(a,c){var b=c.length;if(0<b){for(var a=0<a.length?a+" [":a+"[",d=0;d<b;){0<d&&(a+=", ");var f=c[d],h=c[d+1];if(z.is(h,Error)){var g=h.stack;null!=g&&(h=g)}a+=f+"="+z.string(h);d+=2}a+="]"}return a};var i=function(){};d["flambepowertools.MainStage"]=i;i.__name__=!0;i.init=function(a,c){i._designSizeWidth=a;i._designSizeHeight=c;i.setupMainStageSprite();i.setupStageResizeListener();i.resizeStage()};i.setupMainStageSprite=function(){i._mainStageSprite=new k;
i._mainStageSprite.scissor=new Ea(0,0,i._designSizeWidth,i._designSizeHeight);o.root.add(i._mainStageSprite)};i.setupStageResizeListener=function(){o._platform.getStage().resize.connect(i.onStageResize)};i.onStageResize=function(){i.resizeStage()};i.resizeStage=function(){i._computedStageScale=i.computeScaleAccordingToNewStageDimensions();i._mainStageSprite.setScale(i._computedStageScale);i.centerStage()};i.computeScaleAccordingToNewStageDimensions=function(){var a=o._platform.getStage().get_width(),
c=o._platform.getStage().get_height(),b=i._designSizeWidth,d=i._designSizeHeight;return a/b<c/d?a/b:c/d};i.centerStage=function(){var a=o._platform.getStage().get_width()-i._designSizeWidth*i._computedStageScale,c=o._platform.getStage().get_height()-i._designSizeHeight*i._computedStageScale;i._mainStageSprite.x.set__(a/2);i._mainStageSprite.y.set__(c/2)};i.get_width=function(){return i._designSizeWidth};i.get_height=function(){return i._designSizeHeight};var ra=function(){};d["flambepowertools.MiscUtils"]=
ra;ra.__name__=!0;ra.callWithDelay=function(a,c,b){null==b&&(b=1);var d=new l;a.addChild(d);a=new Ia;d.add(a);c=new Ya([new zb(b),c]);a.run(c);return a};var D=function(){};d["flambepowertools.managers.FontManager"]=D;D.__name__=!0;D.setup=function(a){D._assetPack=a;D._fontMap=new ga};D.getFont=function(a){var c=D._fontMap.get(a);null==c&&(c=new ua(D._assetPack,a),D._fontMap.set(a,c));return c};var U=function(){};d["flambepowertools.managers.SceneManager"]=U;U.__name__=!0;U.setup=function(){U._sceneDirector=
new yb;o.root.add(U._sceneDirector)};U.switchScene=function(a){var c=new l;c.add(a);U._sceneDirector.unwindToScene(c)};U.pushScene=function(a){var c=new l;c.add(a);U._sceneDirector.pushScene(c)};var x=function(){};d["flambepowertools.managers.SoundManager"]=x;x.__name__=!0;x.setup=function(){x._playbackMap=new ga};x.playAudio=function(a,c){null==c&&(c=1);var b=j.assetPack.getSound(a).play();b.volume.set__(c);return b};x.loopAudio=function(a,c,b){null==b&&(b=1);null==c&&(c=!1);c&&x.stopAudio(a);c=
x._playbackMap.get(a);null==c?(c=j.assetPack.getSound(a).loop(),x._playbackMap.set(a,c)):c.get_sound().loop();c.volume.set__(b);return c};x.stopAudio=function(a){var c=x._playbackMap.get(a);null!=c&&(c.dispose(),x._playbackMap.remove(a))};var Db=function(){};d["game.Main"]=Db;Db.__name__=!0;Db.main=function(){o.init();i.init(560,560);var a=R.fromAssets("preloader");o._platform.loadAssetPack(a).get(Db.onSuccess)};Db.onSuccess=function(a){U.setup();U.switchScene(new Eb(a))};var j=function(){};d["game.Registry"]=
j;j.__name__=!0;var p=d["game.enums.MoveDirection"]={__ename__:!0,__constructs__:["UP","RIGHT","DOWN","LEFT"]};p.UP=["UP",0];p.UP.__enum__=p;p.RIGHT=["RIGHT",1];p.RIGHT.__enum__=p;p.DOWN=["DOWN",2];p.DOWN.__enum__=p;p.LEFT=["LEFT",3];p.LEFT.__enum__=p;p.__empty_constructs__=[p.UP,p.RIGHT,p.DOWN,p.LEFT];var Fb=function(){k.call(this)};d["game.gui.CurrentCardHolder"]=Fb;Fb.__name__=!0;Fb.__super__=k;Fb.prototype=m(k.prototype,{onAdded:function(){k.prototype.onAdded.call(this);this.setupBackground()},
setCurrentTileObjectCard:function(a){this._currentTileObjectCard=a;this._backgroundSprite.owner.addChild((new l).add(this._currentTileObjectCard));this._currentTileObjectCard.x.set__(this._backgroundSprite.getNaturalWidth()/2);this._currentTileObjectCard.y.set__(this._backgroundSprite.getNaturalHeight()/2);this.show()},getCurrentTileObjectCard:function(){return this._currentTileObjectCard},removeCurrentTileObjectCard:function(){this._currentTileObjectCard.owner.removeChild(this._currentTileObjectCard.owner);
this._currentTileObjectCard=null},show:function(){this.destroyHideScript();this._backgroundSprite.scaleY.set__(0);this._backgroundSprite.scaleY.animateTo(1,0.25)},hide:function(){this._backgroundSprite.scaleY.set__(1);this._backgroundSprite.scaleY.animateTo(0,0.25);this.destroyHideScript()},hideAfterDelay:function(){this._hideScript=ra.callWithDelay(this.owner,new ja(H(this,this.hide)),1)},destroyHideScript:function(){null!=this._hideScript&&this._hideScript.dispose();this._hideScript=null},informCurrentCardOfNewOwner:function(){var a=
j.gameManager.get_turnManager().getCurrentCharacter();u.__cast(this._currentTileObjectCard,sa).setCharacterOwner(a)},setupBackground:function(){this._backgroundSprite=new aa(0,70,70);this.owner.addChild((new l).add(this._backgroundSprite));this._backgroundSprite.centerAnchor();this._backgroundSprite.anchorY.set__(this._backgroundSprite.getNaturalHeight());this._backgroundSprite.alpha.set__(0.75);this._backgroundSprite.x.set__(i.get_width()/2);var a=j.gameManager.get_gameScene().get_instructionsLabel().get_label();
this._backgroundSprite.y.set__(i.get_height()-a.getNaturalHeight()-25)},__class__:Fb});var Gb=function(){this.setupTextLabel()};d["game.gui.InstructionsLabel"]=Gb;Gb.__name__=!0;Gb.__super__=q;Gb.prototype=m(q.prototype,{get_name:function(){return"InstructionsLabel_3"},updateLabel:function(a){a==M.TILE_PLACEMENT?this.setText("Click on any tile to place this arrow"):this.setText("Use the arrow keys to move characters")},onAdded:function(){q.prototype.onAdded.call(this);this.owner.addChild((new l).add(this._label))},
setupTextLabel:function(){this._label=new P(D.getFont("fonts/chubby_cheeks_32"),"DEFAULT");this._label.set_align(N.Center);this._label.anchorY.set__(this._label.getNaturalHeight()/2);this._label.x.set__(i.get_width()/2);this._label.y.set__(i.get_height()-this._label.getNaturalHeight()/2-20)},setText:function(a){this._label.set_text(a);this._label.anchorY.set__(this._label.getNaturalHeight()/2);this._label.x.set__(i.get_width()/2)},get_label:function(){return this._label},__class__:Gb});var Hb=function(){k.call(this)};
d["game.gui.MultiplierLabel"]=Hb;Hb.__name__=!0;Hb.__super__=k;Hb.prototype=m(k.prototype,{setMultiplierValueTo:function(a){this._label.set_text("x"+(null==a?"null":""+a))},onAdded:function(){k.prototype.onAdded.call(this);this.setupLabel()},setupLabel:function(){this._label=new P(D.getFont("fonts/chubby_cheeks_32"),"DEFAULT");this.owner.addChild((new l).add(this._label));this._label.y.set__(this._label.getNaturalHeight()/2+25);this.updatePosition();this.setMultiplierValueTo(1)},updatePosition:function(){this._label.centerAnchor();
this._label.x.set__(i.get_width()/2+-5)},__class__:Hb});var Ib=function(){k.call(this);this.setupTextLabel()};d["game.gui.ScoreLabel"]=Ib;Ib.__name__=!0;Ib.__super__=k;Ib.prototype=m(k.prototype,{setScoreText:function(a){this._label.set_text("Score: "+a);this.updatePosition()},onAdded:function(){k.prototype.onAdded.call(this);this.owner.addChild((new l).add(this._label))},setupTextLabel:function(){this._label=new P(D.getFont("fonts/chubby_cheeks_32"),"DEFAULT");this._label.y.set__(this._label.getNaturalHeight()/
2+25);this.updatePosition()},updatePosition:function(){this._label.centerAnchor();this._label.x.set__(i.get_width()/2+-134)},__class__:Ib});var Jb=function(){k.call(this)};d["game.gui.TurnsLeftLabel"]=Jb;Jb.__name__=!0;Jb.__super__=k;Jb.prototype=m(k.prototype,{setValueTo:function(a){this._label.set_text("Turns left:"+(null==a?"null":""+a));this.updatePosition()},onAdded:function(){k.prototype.onAdded.call(this);this.setupLabel()},setupLabel:function(){this._label=new P(D.getFont("fonts/chubby_cheeks_32"),
"DEFAULT");this.owner.addChild((new l).add(this._label));this._label.y.set__(this._label.getNaturalHeight()/2+25);this.updatePosition();this.setValueTo(1)},updatePosition:function(){this._label.centerAnchor();this._label.x.set__(i.get_width()/2+55)},__class__:Jb});var X=d["game.managers.Dimension"]={__ename__:!0,__constructs__:["GREEN","PINK"]};X.GREEN=["GREEN",0];X.GREEN.__enum__=X;X.PINK=["PINK",1];X.PINK.__enum__=X;X.__empty_constructs__=[X.GREEN,X.PINK];var Kb=function(){this._currentDimension=
X.GREEN};d["game.managers.DimensionManager"]=Kb;Kb.__name__=!0;Kb.__super__=q;Kb.prototype=m(q.prototype,{get_name:function(){return"DimensionManager_11"},moveToNextDimension:function(){this._currentDimension=this._currentDimension==X.PINK?X.GREEN:X.PINK;this.updateCharacters();this.updateTileMap()},updateCharacters:function(){for(var a=0,c=j.gameManager.get_turnManager().get_characterList();a<c.length;){var b=c[a];++a;b.checkIfPartOfCurrentDimension()}},updateTileMap:function(){j.gameManager.get_gameScene().get_tileMap().switchDimension(this._currentDimension)},
__class__:Kb});var tc=function(a){this._gameScene=a};d["game.managers.GameManager"]=tc;tc.__name__=!0;tc.prototype={setupGame:function(){this.setupPlayer();this.setupDimensionManager();this.setupTurnManager();this.setupInputManager();this.setupDirectionalPlateSpawner();this.setupObjectList();this.setupCoinSpawner();this.setupPlatesAtRandom();this.setupCharacters();this._coinSpawner.createCoin();this._coinSpawner.moveCoinToRandomPosition();this._dimensionManager.updateCharacters();this._player.pickRandomTileCard()},
endGame:function(){var a=j.gameManager.get_player().get_currentScore().getScore(),c=j.gameManager.get_player().get_multiplierManager().get_highestMultiplierCount();x.playAudio("audio/sfx/shift_dimension",0.25);U.pushScene(new Lb(a,c))},onSteppedOnIncorrectTile:function(){this._gameScene.get_tileMap().shake()},setupPlayer:function(){this._player=new Mb;this._gameScene.owner.addChild((new l).add(this._player))},setupDimensionManager:function(){this._dimensionManager=new Kb;this._gameScene.owner.addChild((new l).add(this._dimensionManager))},
setupTurnManager:function(){this._turnManager=new Nb;this._gameScene.owner.addChild((new l).add(this._turnManager))},setupInputManager:function(){this._inputManager=new Ob;this._gameScene.owner.addChild((new l).add(this._inputManager))},setupCoinSpawner:function(){this._coinSpawner=new Pb;this._gameScene.owner.addChild((new l).add(this._coinSpawner))},setupDirectionalPlateSpawner:function(){this._directionalPlateSpawner=new Qb;this._gameScene.owner.addChild((new l).add(this._directionalPlateSpawner))},
setupObjectList:function(){this._objectList=new bb},setupCharacters:function(){for(var a=[],c=0;2>c;){var b=c++,d=A.getRandomEmptyTile();if(null==d)return;var f=d.get_currentColumn(),d=d.get_currentRow(),b=new Za(b);a.push(b);this._gameScene.get_tileMap().addTileObjectAt(b,f,d)}this._turnManager.setup(a)},setupPlatesAtRandom:function(){for(var a=0;15>a;)a++,this._directionalPlateSpawner.spawnADirectionalPlateAtRandom();x.playAudio("audio/sfx/spawn",0.25)},get_turnManager:function(){return this._turnManager},
get_gameScene:function(){return this._gameScene},get_objectList:function(){return this._objectList},get_inputManager:function(){return this._inputManager},get_dimensionManager:function(){return this._dimensionManager},get_coinSpawner:function(){return this._coinSpawner},get_player:function(){return this._player},get_directionalPlateSpawner:function(){return this._directionalPlateSpawner},__class__:tc};var Ob=function(){};d["game.managers.InputManager"]=Ob;Ob.__name__=!0;Ob.__super__=q;Ob.prototype=
m(q.prototype,{get_name:function(){return"InputManager_5"},onTilePressed:function(a){var c=j.gameManager.get_turnManager();if(c.get_currentTurnMode()==M.TILE_PLACEMENT){var b=j.gameManager.get_gameScene().get_tileMap(),d;d=u.__cast(j.gameManager.get_player().retrieveCurrentTileCard(),sa);b.addTileObjectAt(d,a.get_currentColumn(),a.get_currentRow());c.moveToNextMode();d.playSpawningAnimation();this.playPlacementSFX()}},onDirectionalPlatePressed:function(a){var c=j.gameManager.get_turnManager();if(c.get_currentTurnMode()==
M.TILE_PLACEMENT){var b=j.gameManager.get_gameScene().get_currentCardHolder(),d=a.get_tileAttachedTo(),f;f=u.__cast(b.getCurrentTileObjectCard(),sa);b.removeCurrentTileObjectCard();f.removeCharacterOwner();a.get_tileAttachedTo().removeResident(a);j.gameManager.get_gameScene().get_tileMap().addTileObjectAt(f,d.get_currentColumn(),d.get_currentRow());b.setCurrentTileObjectCard(a);a.setCharacterOwner(j.gameManager.get_turnManager().getCurrentCharacter());b.hideAfterDelay();c.moveToNextMode();f.playSpawningAnimation();
this.playPlacementSFX()}},onAdded:function(){q.prototype.onAdded.call(this);o._platform.getKeyboard().down.connect(H(this,this.onKeyPress),!0)},onKeyPress:function(a){j.gameManager.get_turnManager().get_currentTurnMode()==M.CHAR_MOVEMENT&&(a.key==b.Up||a.key==b.W?this.moveCurrentCharacter(p.UP):a.key==b.Right||a.key==b.D?this.moveCurrentCharacter(p.RIGHT):a.key==b.Down||a.key==b.S?this.moveCurrentCharacter(p.DOWN):(a.key==b.Left||a.key==b.A)&&this.moveCurrentCharacter(p.LEFT),x.playAudio("audio/sfx/move",
1))},moveCurrentCharacter:function(a){j.gameManager.get_turnManager().getCurrentCharacter().get_movementManager().move(a)},playPlacementSFX:function(){x.playAudio("audio/sfx/place",0.5)},__class__:Ob});var Rb=function(a){this._tileObject=a};d["game.managers.MovementManager"]=Rb;Rb.__name__=!0;Rb.__super__=q;Rb.prototype=m(q.prototype,{get_name:function(){return"MovementManager_9"},move:function(a){switch(a[1]){case 0:this.moveTo(this._tileObject.get_tileAttachedTo().get_currentColumn(),this._tileObject.get_tileAttachedTo().get_currentRow()-
1);break;case 1:this.moveTo(this._tileObject.get_tileAttachedTo().get_currentColumn()+1,this._tileObject.get_tileAttachedTo().get_currentRow());break;case 2:this.moveTo(this._tileObject.get_tileAttachedTo().get_currentColumn(),this._tileObject.get_tileAttachedTo().get_currentRow()+1);break;case 3:this.moveTo(this._tileObject.get_tileAttachedTo().get_currentColumn()-1,this._tileObject.get_tileAttachedTo().get_currentRow())}},moveTo:function(a,c){if(!this._isMoving){var b=j.gameManager.get_gameScene().get_tileMap().getTileAt(a,
c);if(null!=b){var d=new $(this._tileObject.get_tileAttachedTo().get_currentColumn(),this._tileObject.get_tileAttachedTo().get_currentRow()),f=new $(b.get_currentColumn(),b.get_currentRow());if(d.x==f.x&&d.y==f.y)throw"FROM AND TO ARE THE SAME!";d=Y.getMovementDirectionBetween(d,f);this.checkIfCanMoveTo(f,d)&&(f=0.25*A.getDistanceBetween(this._tileObject.get_tileAttachedTo(),b),this._tileObject.x.animateTo(b.x._value,f),this._tileObject.y.animateTo(b.y._value,f),this.handlePushingAfterMovement(b),
this._isMoving=!0,null!=this._tileObject.get_tileAttachedTo()&&this._tileObject.get_tileAttachedTo().removeResident(this._tileObject),b.addResident(this._tileObject,!1),ra.callWithDelay(this.owner,new ja(H(this,this.onFinishedMoving)),f))}}},checkIfCanMoveTo:function(a,c){if(null==c)throw"MOVE DIRECTION SHOULD NOT BE NULL!";var b=j.gameManager.get_gameScene().get_tileMap().getTileAt(a.x|0,a.y|0);if(null==b)return!1;for(b=b.get_residentList().iterator();b.hasNext();){var d=b.next();if(!u.__instanceof(d,
G))return this.checkIfCanMoveTo(Y.adjustPositionWithDirection(a,c),c)}return!0},pushContentsAtTile:function(a,c){var b=A.getDistanceBetween(this._tileObject.get_tileAttachedTo(),a)-1;ra.callWithDelay(this.owner,new ja(function(){for(var b=a.get_residentList().iterator();b.hasNext();){var d=b.next();u.__instanceof(d,G)||d.get_movementManager().move(c)}}),0.25*b)},onFinishedMoving:function(){this._isMoving=!1;this.handleOnPlateStep();j.gameManager.get_turnManager().checkIfFinishedMovement()&&(this._tileObject.throwDirection=
null)},handlePushingAfterMovement:function(a){var c=new $(this._tileObject.get_tileAttachedTo().get_currentColumn(),this._tileObject.get_tileAttachedTo().get_currentRow()),b=new $(a.get_currentColumn(),a.get_currentRow()),c=Y.getMovementDirectionBetween(c,b);this.pushContentsAtTile(a,c)},handleOnPlateStep:function(){var a=this._tileObject.get_tileAttachedTo().getCurrentPlate();if(null!=a)a.onSteppedOn(this._tileObject)},get_isMoving:function(){return this._isMoving},__class__:Rb});var Sb=function(){this._highestMultiplierCount=
0;this._currentMultiplierCount=1};d["game.managers.MultiplierManager"]=Sb;Sb.__name__=!0;Sb.__super__=q;Sb.prototype=m(q.prototype,{get_name:function(){return"MultiplierManager_8"},increaseMultiplierCount:function(a){null==a&&(a=1);this.set__currentMultiplierCount(this._currentMultiplierCount+a)},resetMultiplierCount:function(){this.set__currentMultiplierCount(1)},logCurrentMultiplier:function(){this.handleCheckingOfHighestMultiplierCount(this._currentMultiplierCount)},handleCheckingOfHighestMultiplierCount:function(a){a>
this._highestMultiplierCount&&(this._highestMultiplierCount=a)},get_currentMultiplierCount:function(){return this._currentMultiplierCount},get_highestMultiplierCount:function(){return this._highestMultiplierCount},set__currentMultiplierCount:function(a){this._currentMultiplierCount=a;j.gameManager.get_gameScene().get_multiplierLabel().setMultiplierValueTo(a);return this._currentMultiplierCount},__class__:Sb});var M=d["game.managers.TurnMode"]={__ename__:!0,__constructs__:["TILE_PLACEMENT","CHAR_MOVEMENT"]};
M.TILE_PLACEMENT=["TILE_PLACEMENT",0];M.TILE_PLACEMENT.__enum__=M;M.CHAR_MOVEMENT=["CHAR_MOVEMENT",1];M.CHAR_MOVEMENT.__enum__=M;M.__empty_constructs__=[M.TILE_PLACEMENT,M.CHAR_MOVEMENT];var Nb=function(){this._currentTurnMode=M.TILE_PLACEMENT;this._currentCharacterIndex=0;this.set__turnsLeft(10)};d["game.managers.TurnManager"]=Nb;Nb.__name__=!0;Nb.__super__=q;Nb.prototype=m(q.prototype,{get_name:function(){return"TurnManager_6"},getCurrentCharacter:function(){return this._characterList[this._currentCharacterIndex]},
setup:function(a){if(0>=a.length)throw"Character list should not be empty!";this._characterList=a;this._currentCharacterIndex=0},checkIfFinishedMovement:function(){for(var a=j.gameManager.get_objectList().iterator();a.hasNext();)if(a.next().get_movementManager().get_isMoving())return!1;this.goToNextPlayer();return!0},goToNextPlayer:function(){var a=j.gameManager;this._currentCharacterIndex++;this._currentCharacterIndex>=this._characterList.length&&(this._currentCharacterIndex=0);this.resetMode();
this.decreaseNumberOFTurnsLeft();if(this.isThereNoMoreTurnsLeft())a.endGame();else{var c=a.get_coinSpawner();c.get_currentCoin().isPickedUp&&c.moveCoinToRandomPosition();a.get_player().get_multiplierManager().resetMultiplierCount();a.get_dimensionManager().moveToNextDimension();null==a.get_gameScene().get_currentCardHolder().getCurrentTileObjectCard()?a.get_player().pickRandomTileCard():(j.gameManager.get_gameScene().get_currentCardHolder().informCurrentCardOfNewOwner(),a.get_gameScene().get_currentCardHolder().show());
ra.callWithDelay(this.owner,new ja((Gc=a.get_directionalPlateSpawner(),H(Gc,Gc.onTurnChanged))),0.5);x.playAudio("audio/sfx/shift_dimension",0.25)}},moveToNextMode:function(){switch(this._currentTurnMode[1]){case 0:this.set__currentTurnMode(M.CHAR_MOVEMENT);break;case 1:this.set__currentTurnMode(M.TILE_PLACEMENT)}},onAdded:function(){q.prototype.onAdded.call(this);this.updateTurnModeGUILabel()},updateTurnModeGUILabel:function(){j.gameManager.get_gameScene().get_instructionsLabel().updateLabel(this._currentTurnMode)},
resetMode:function(){this.set__currentTurnMode(M.TILE_PLACEMENT);this.updateTurnModeGUILabel()},decreaseNumberOFTurnsLeft:function(){this.set__turnsLeft(this._turnsLeft-1)},isThereNoMoreTurnsLeft:function(){return 0>=this._turnsLeft},get_currentTurnMode:function(){return this._currentTurnMode},set__currentTurnMode:function(a){this._currentTurnMode=a;this.updateTurnModeGUILabel();return this._currentTurnMode},get_characterList:function(){return this._characterList},set__turnsLeft:function(a){j.gameManager.get_gameScene().get_turnsLeftLabel().setValueTo(a);
return this._turnsLeft=a},__class__:Nb});var Tb=function(a,c){aa.call(this,16777215,55,55);this.centerAnchor();this._currentColumn=a;this._currentRow=c;this._residentList=new bb};d["game.map.Tile"]=Tb;Tb.__name__=!0;Tb.__super__=aa;Tb.prototype=m(aa.prototype,{addResident:function(a,c){null==c&&(c=!0);this._residentList.push(a);a.attachToTile(this);c&&a.setPositionTo(this.x._value,this.y._value)},removeResident:function(a){a.removeFromAttachedTile();this._residentList.remove(a)},isEmpty:function(){return 0>=
this._residentList.length},getNonPlateObject:function(){for(var a=this._residentList.iterator();a.hasNext();){var c=a.next();if(!u.__instanceof(c,G))return c}return null},getCurrentPlate:function(){return 0>=this._residentList.length?null:j.gameManager.get_gameScene().get_tileMap().getFirstPlateAt(this.get_currentColumn(),this.get_currentRow())},onAdded:function(){aa.prototype.onAdded.call(this);this.setupPositioning();this.setupPointerListener()},setupPositioning:function(){this.x.set__(55*this._currentColumn+
5*this._currentColumn+27.5);this.y.set__(55*this._currentRow+5*this._currentRow+2.5)},setupPointerListener:function(){this.get_pointerUp().connect(H(this,this.onTilePressed))},onTilePressed:function(){if(this.isEmpty())j.gameManager.get_inputManager().onTilePressed(this)},get_currentColumn:function(){return this._currentColumn},get_currentRow:function(){return this._currentRow},get_residentList:function(){return this._residentList},__class__:Tb});var Ub=function(a,c){k.call(this);this._colCount=a;
this._rowCount=c;this.setupTileMapArray()};d["game.map.TileMap"]=Ub;Ub.__name__=!0;Ub.__super__=k;Ub.prototype=m(k.prototype,{getTileAt:function(a,c){return A.isOutsideColumnBoundary(a)||A.isOutsideRowBoundary(c)?null:this._tileArray[a][c]},getFirstPlateAt:function(a,c){var b=this.getTileAt(a,c);if(null!=b)for(b=b.get_residentList().iterator();b.hasNext();){var d=b.next();if(u.__instanceof(d,G))return u.__cast(d,G)}return null},addTileObjectAt:function(a,c,b){this.getTileAt(c,b).addResident(a);u.__instanceof(a,
Za)?j.gameManager.get_gameScene().get_tileMap()._charactersLayer.owner.addChild((new l).add(a)):j.gameManager.get_gameScene().get_tileMap().get_objectsLayer().owner.addChild((new l).add(a))},switchDimension:function(a){this.playSwitchDimensionAnimation(a==X.GREEN?"backgrounds/map_bg_green":"backgrounds/map_bg_pink")},shake:function(){x.playAudio("audio/sfx/shake");this._shakeScript.run(new Cb(8,8,0.25))},onAdded:function(){k.prototype.onAdded.call(this);this.setupShakeScript();this.setupBackground();
this.setupLayers();this.setupTiles();this.setupPositioning();this.playEnteringAnimation()},setupShakeScript:function(){this._shakeScript=new Ia;this.owner.add(this._shakeScript)},setupLayers:function(){this._tilesLayer=new k;this.owner.addChild((new l).add(this._tilesLayer));this._objectsLayer=new k;this.owner.addChild((new l).add(this._objectsLayer));this._charactersLayer=new k;this.owner.addChild((new l).add(this._charactersLayer))},setupBackground:function(){this._bgSprite=new O(j.assetPack.getTexture("backgrounds/map_bg_green"));
this.owner.addChild((new l).add(this._bgSprite));this._bgSprite.centerAnchor()},setupTileMapArray:function(){this._tileArray=[];for(var a=0,c=this._colCount;a<c;)this._tileArray[a++]=[]},setupTiles:function(){for(var a=0,c=this._colCount;a<c;)for(var b=a++,d=0,f=this._rowCount;d<f;){var h=d++,g=new Tb(b,h);this._tilesLayer.owner.addChild((new l).add(g));this._tileArray[b][h]=g}},setupPositioning:function(){this.x.set__(i.get_width()/2-this.getTileMapWidth()/2);this.y.set__(i.get_height()/2-this.getTileMapHeight()/
2);this._bgSprite.x.set__(this.getTileMapWidth()/2);this._bgSprite.y.set__(this.getTileMapHeight()/2)},playSwitchDimensionAnimation:function(a){var c=this;this.alpha.animateTo(0,0.25);ra.callWithDelay(this.owner,new ja(function(){c._bgSprite.texture=j.assetPack.getTexture(a);c.alpha.animateTo(1,0.25)}),0.25)},playEnteringAnimation:function(){this.y.set__(i.get_height()+this.getTileMapHeight());this.y.animateTo(i.get_height()/2-this.getTileMapHeight()/2,1.5,la.backOut)},getTileMapWidth:function(){return 55*
this._colCount+5*this._colCount},getTileMapHeight:function(){return 55*this._rowCount+5*this._rowCount},get_objectsLayer:function(){return this._objectsLayer},get_rowCount:function(){return this._rowCount},get_colCount:function(){return this._colCount},__class__:Ub});var na=d["game.objects.CharacterColor"]={__ename__:!0,__constructs__:["GREEN","PINK"]};na.GREEN=["GREEN",0];na.GREEN.__enum__=na;na.PINK=["PINK",1];na.PINK.__enum__=na;na.__empty_constructs__=[na.GREEN,na.PINK];var ka=function(a){null==
a&&(a="tile_objects/default");O.call(this,j.assetPack.getTexture(a));this.centerAnchor()};d["game.objects.TileObject"]=ka;ka.__name__=!0;ka.__super__=O;ka.prototype=m(O.prototype,{attachToTile:function(a){this._tileAttachedTo=a},removeFromAttachedTile:function(){this._tileAttachedTo=null},setPositionTo:function(a,c){this.x.set__(a);this.y.set__(c)},onAdded:function(){O.prototype.onAdded.call(this);this._movementManager=new Rb(this);this.owner.addChild((new l).add(this._movementManager));j.gameManager.get_objectList().push(this)},
get_tileAttachedTo:function(){return this._tileAttachedTo},get_movementManager:function(){return this._movementManager},playSpawningAnimation:function(){this.scaleX.set__(0);this.scaleY.set__(0);this.scaleX.animateTo(1,1,la.backOut);this.scaleY.animateTo(1,1,la.backOut)},dispose:function(){null!=this._tileAttachedTo&&this._tileAttachedTo.removeResident(this);O.prototype.dispose.call(this)},onRemoved:function(){O.prototype.onRemoved.call(this);j.gameManager.get_objectList().remove(this)},__class__:ka});
var Za=function(a){this.setupCharacterColor(a);a="tile_objects/characters/"+this.getCharacterColorString()+"_character";ka.call(this,a)};d["game.objects.Character"]=Za;Za.__name__=!0;Za.__super__=ka;Za.prototype=m(ka.prototype,{checkIfPartOfCurrentDimension:function(){j.gameManager.get_turnManager().getCurrentCharacter()!=this?this.applyDimensionInvisibility():this.applyDimensionVisibility()},getCharacterColorString:function(){return z.string(this._characterColor).toLowerCase()},setupCharacterColor:function(a){switch(a){case 0:this._characterColor=
na.GREEN;break;case 1:this._characterColor=na.PINK}},applyDimensionVisibility:function(){this.alpha.set__(1)},applyDimensionInvisibility:function(){this.alpha.set__(0.25)},__class__:Za});var G=function(a){this._isScheduledForDisposal=!1;ka.call(this,a);this.onDestroyed=new ha};d["game.objects.plates.Plate"]=G;G.__name__=!0;G.__super__=ka;G.prototype=m(ka.prototype,{show:function(){this.set_visible(!0);this.alpha.set__(1)},onSteppedOn:function(a){null!=a.throwDirection&&this.continueThrowingStepper(a);
this.fadeOutAndDestroy();this.determineScoreGained()},determineScoreGained:function(){},continueThrowingStepper:function(a){ya.throwToDirection(a,a.throwDirection)},get_isScheduledForDisposal:function(){return this._isScheduledForDisposal},playHideAnimation:function(){this.set_visible(!1);this._tileAttachedTo.removeResident(this);this.alpha.animateTo(0,0.4)},fadeOutAndDestroy:function(){this._isScheduledForDisposal=!0;this.playHideAnimation();ra.callWithDelay(this.owner,new ja(H(this,this.dispose)),
0.4)},onRemoved:function(){ka.prototype.onRemoved.call(this);null!=this.onDestroyed&&this.onDestroyed.emit();this.onDestroyed=null},__class__:G});var Vb=function(){G.call(this,"tile_objects/coin_plate");this._steppedOnSignal=new ha};d["game.objects.plates.CoinPlate"]=Vb;Vb.__name__=!0;Vb.__super__=G;Vb.prototype=m(G.prototype,{onSteppedOn:function(a){this.increaseScore();null!=a.throwDirection&&this.continueThrowingStepper(a);this.playHideAnimation();this._steppedOnSignal.emit();this.isPickedUp=!0;
x.playAudio("audio/sfx/coin",1)},increaseScore:function(){var a=j.gameManager.get_player().get_multiplierManager(),c=a.get_currentMultiplierCount();j.gameManager.get_player().get_currentScore().increaseScore(10*c);a.logCurrentMultiplier()},onRemoved:function(){G.prototype.onRemoved.call(this);this._steppedOnSignal=null},__class__:Vb});var sa=function(a){null==a&&(a=Y.getRandomDirection());this._moveDirection=a;G.call(this,"tile_objects/directional_plates/blue_plate")};d["game.objects.plates.DirectionalPlate"]=
sa;sa.__name__=!0;sa.__super__=G;sa.prototype=m(G.prototype,{setCharacterOwner:function(a){this._characterOwner=a;this.updateColor()},removeCharacterOwner:function(){this._characterOwner=null},onAdded:function(){G.prototype.onAdded.call(this);this.rotateDependingOnDirection();this.setupPointerListener()},onSteppedOn:function(a){x.playAudio("audio/sfx/bounce");ya.throwToDirection(a,this.get_moveDirection());G.prototype.onSteppedOn.call(this,a)},rotateDependingOnDirection:function(){this._moveDirection==
p.RIGHT?this.rotation.set__(90):this._moveDirection==p.DOWN?this.rotation.set__(180):this._moveDirection==p.LEFT&&this.rotation.set__(270)},setupPointerListener:function(){this.get_pointerUp().connect(H(this,this.onTilePressed))},onTilePressed:function(){j.gameManager.get_inputManager().onDirectionalPlatePressed(this)},isPartOfCurrentDimension:function(){return null==this._characterOwner||j.gameManager.get_turnManager().getCurrentCharacter()==this._characterOwner?!0:!1},determineScoreGained:function(){this.isPartOfCurrentDimension()?
j.gameManager.get_player().get_multiplierManager().increaseMultiplierCount():(j.gameManager.onSteppedOnIncorrectTile(),j.gameManager.get_player().get_multiplierManager().resetMultiplierCount())},continueThrowingStepper:function(){},updateColor:function(){var a="tile_objects/directional_plates/"+this._characterOwner.getCharacterColorString()+"_plate";this.texture=j.assetPack.getTexture(a)},get_moveDirection:function(){return this._moveDirection},__class__:sa});var Wb=function(){this._scoreValue=0};
d["game.player.CurrentScore"]=Wb;Wb.__name__=!0;Wb.__super__=q;Wb.prototype=m(q.prototype,{get_name:function(){return"CurrentScore_10"},setScore:function(a){null==a&&(a=1);this.set__scoreValue(a)},increaseScore:function(a){null==a&&(a=1);this.setScore(this._scoreValue+a)},getScore:function(){return this._scoreValue},onAdded:function(){q.prototype.onAdded.call(this);this.resetScore()},resetScore:function(){this.setScore(0)},set__scoreValue:function(a){this._scoreValue=a;j.gameManager.get_gameScene().get_scoreLabel().setScoreText(z.string(this._scoreValue));
return this._scoreValue},__class__:Wb});var Mb=function(){};d["game.player.Player"]=Mb;Mb.__name__=!0;Mb.__super__=q;Mb.prototype=m(q.prototype,{get_name:function(){return"Player_4"},pickRandomTileCard:function(){var a=new sa;j.gameManager.get_gameScene().get_currentCardHolder().setCurrentTileObjectCard(a);a.setCharacterOwner(j.gameManager.get_turnManager().getCurrentCharacter())},retrieveCurrentTileCard:function(){var a=j.gameManager.get_gameScene().get_currentCardHolder(),c=a.getCurrentTileObjectCard();
a.removeCurrentTileObjectCard();a.hide();return c},onAdded:function(){q.prototype.onAdded.call(this);this.setupComboManager();this.setupCurrentScore()},setupComboManager:function(){this._multiplierManager=new Sb;this.owner.addChild((new l).add(this._multiplierManager))},setupCurrentScore:function(){this._currentScore=new Wb;this.owner.addChild((new l).add(this._currentScore))},get_currentScore:function(){return this._currentScore},get_multiplierManager:function(){return this._multiplierManager},__class__:Mb});
var Xb=function(){B.call(this)};d["game.scenes.GameScene"]=Xb;Xb.__name__=!0;Xb.__super__=B;Xb.prototype=m(B.prototype,{onAdded:function(){B.prototype.onAdded.call(this);this.setupGameManager();this.setupLayers();this.setupBackground();this.setupTileMap();this.setupGUI();j.gameManager.setupGame();this.playEnteringAnimation()},setupLayers:function(){this._bgLayer=new k;this.owner.addChild((new l).add(this._bgLayer));this._mainLayer=new k;this.owner.addChild((new l).add(this._mainLayer));this._fgLayer=
new k;this.owner.addChild((new l).add(this._fgLayer))},setupBackground:function(){var a=j.assetPack.getTexture("backgrounds/bg_gradient"),a=new Fa(a,i.get_width(),i.get_height());this._bgLayer.owner.addChild((new l).add(a));a=new O(j.assetPack.getTexture("backgrounds/cloud_bg"));a.set_pointerEnabled(!1);this._fgLayer.owner.addChild((new l).add(a))},setupTileMap:function(){this._tileMap=new Ub(5,5);this._mainLayer.owner.addChild((new l).add(this._tileMap))},setupGameManager:function(){j.gameManager=
new tc(this)},setupGUI:function(){var a=new O(j.assetPack.getTexture("gui/gui_bg"));this._fgLayer.owner.addChild((new l).add(a));a.anchorX.set__(a.getNaturalWidth()/2);a.x.set__(i.get_width()/2);a.set_pointerEnabled(!1);this._instructionsLabel=new Gb;this._fgLayer.owner.addChild((new l).add(this._instructionsLabel));this._currentCardHolder=new Fb;this._fgLayer.owner.addChild((new l).add(this._currentCardHolder));this._scoreLabel=new Ib;this._fgLayer.owner.addChild((new l).add(this._scoreLabel));this._multiplierLabel=
new Hb;this._fgLayer.owner.addChild((new l).add(this._multiplierLabel));this._turnsLeftLabel=new Jb;this._fgLayer.owner.addChild((new l).add(this._turnsLeftLabel))},playEnteringAnimation:function(){this._fgLayer.alpha.set__(0);this._fgLayer.alpha.animateTo(1,1)},get_tileMap:function(){return this._tileMap},get_instructionsLabel:function(){return this._instructionsLabel},get_currentCardHolder:function(){return this._currentCardHolder},get_scoreLabel:function(){return this._scoreLabel},get_multiplierLabel:function(){return this._multiplierLabel},
get_turnsLeftLabel:function(){return this._turnsLeftLabel},__class__:Xb});var Eb=function(a){B.call(this);this._preloaderPack=a};d["game.scenes.LoadingScene"]=Eb;Eb.__name__=!0;Eb.__super__=B;Eb.prototype=m(B.prototype,{onAdded:function(){B.prototype.onAdded.call(this);this.setupDisposer();this.setupLoadingScript();this.setupBackground();this.setupLoadingLabel();this.startLoadingAssets()},setupDisposer:function(){this._disposer=new db;this.owner.addChild((new l).add(this._disposer))},setupLoadingScript:function(){this._loadingScript=
new Ia;this.owner.addChild((new l).add(this._loadingScript))},setupBackground:function(){var a=this._preloaderPack.getTexture("bg_gradient"),a=new Fa(a,i.get_width(),i.get_height());this.owner.addChild((new l).add(a))},setupLoadingLabel:function(){this._loadingLabel=new P(new ua(this._preloaderPack,"loading_font"),"LOADING...");this._loadingLabel.y.set__(i.get_height()/2);this._loadingLabel.x.set__(i.get_width()/2);this._loadingLabel.centerAnchor();this.owner.addChild((new l).add(this._loadingLabel));
var a=new Ya;a.add(new Xa(this._loadingLabel.alpha,0,1));a.add(new Xa(this._loadingLabel.alpha,1,1));this._loadingScript.run(new Ab(a))},startLoadingAssets:function(){var a=R.fromAssets("game");this._gameAssetLoader=o._platform.loadAssetPack(a);this._gameAssetLoader.get(H(this,this.onSuccess));this._gameAssetLoader.error.connect(H(this,this.onLoadingError)).once();this._disposer.connect0(this._gameAssetLoader.progressChanged,H(this,this.onLoadingProgress))},onLoadingError:function(a){throw"LOADING ERROR! "+
a;},onLoadingProgress:function(){var a=100*(this._gameAssetLoader._progress/this._gameAssetLoader._total)|0;100<a?a=100:0>a&&(a=0);this._loadingLabel.set_text("LOADING - "+(null==a?"null":""+a)+"%");this._loadingLabel.x.set__(i.get_width()/2);this._loadingLabel.centerAnchor()},onSuccess:function(a){j.assetPack=a;D.setup(a);x.setup();U.switchScene(new $a)},__class__:Eb});var $a=function(){B.call(this)};d["game.scenes.MainMenu"]=$a;$a.__name__=!0;$a.__super__=B;$a.prototype=m(B.prototype,{onAdded:function(){B.prototype.onAdded.call(this);
this.setupBackground();this.setupTitleLabel();this.setupStartLabel();this.setupPeekingLand();this.setupCreditsLabel();this.setupInputListeners();this.playBGMMusic();this.playEnteringAnimation()},setupBackground:function(){var a=j.assetPack.getTexture("backgrounds/bg_gradient"),a=new Fa(a,i.get_width(),i.get_height());this.owner.addChild((new l).add(a));a=new O(j.assetPack.getTexture("backgrounds/cloud_bg"));a.set_pointerEnabled(!1);this.owner.addChild((new l).add(a))},setupTitleLabel:function(){this._titleLabelBG=
new aa(0,i.get_width(),100);this.owner.addChild((new l).add(this._titleLabelBG));this._titleLabelBG.centerAnchor();this._titleLabelBG.x.set__(i.get_width()/2);this._titleLabelBG.y.set__(i.get_height()/2-50);var a=new P(D.getFont("fonts/chubby_cheeks_64"),"THIS WAY!");this._titleLabelBG.owner.addChild((new l).add(a));a.centerAnchor();a.x.set__(this._titleLabelBG.getNaturalWidth()/2);a.y.set__(this._titleLabelBG.getNaturalHeight()/2)},setupStartLabel:function(){this._startLabel=new P(D.getFont("fonts/chubby_cheeks_32"),
"Press anywhere to start");this.owner.addChild((new l).add(this._startLabel));this._startLabel.centerAnchor();this._startLabel.x.set__(i.get_width()/2);this._startLabel.y.set__(i.get_height()/2+100)},setupPeekingLand:function(){this._peekingLand=new O(j.assetPack.getTexture("scenes/main_menu/peeking_land"));this.owner.addChild((new l).add(this._peekingLand));this._peekingLand.centerAnchor();this._peekingLand.anchorY.set__(this._peekingLand.getNaturalHeight());this._peekingLand.x.set__(i.get_width()/
2);this._peekingLand.y.set__(i.get_height())},setupInputListeners:function(){o._platform.getPointer().down.connect(H(this,this.onInputDetected)).once()},setupCreditsLabel:function(){this._creditsLabel=new P(D.getFont("fonts/chubby_cheeks_32"),"A Ludum Dare Jam game by AccidentalRebel");this._peekingLand.owner.addChild((new l).add(this._creditsLabel));this._creditsLabel.setScale(0.8);this._creditsLabel.centerAnchor();this._creditsLabel.x.set__(this._peekingLand.getNaturalWidth()/2);this._creditsLabel.y.set__(100)},
playBGMMusic:function(){x.loopAudio("audio/bgm/i_am_the_rock",!0)},playEnteringAnimation:function(){this._titleLabelBG.alpha.set__(0);this._titleLabelBG.alpha.animateTo(1,0.5);this._startLabel.alpha.set__(0);this._startLabel.alpha.animateTo(1,0.5);this._peekingLand.y.set__(i.get_height()+this._peekingLand.getNaturalHeight());this._peekingLand.y.animateTo(i.get_height()+0.6*this._peekingLand.getNaturalHeight(),0.5,la.backOut)},playExitAnimation:function(){this._titleLabelBG.alpha.animateTo(0,0.5);
this._startLabel.alpha.animateTo(0,0.5);this._peekingLand.y.animateTo(i.get_height()+this._peekingLand.getNaturalHeight(),0.5,la.backIn)},onInputDetected:function(){this.playExitAnimation();ra.callWithDelay(this.owner,new ja(function(){U.pushScene(new Xb)}),0.5)},__class__:$a});var Lb=function(a,c){B.call(this,!1);this._currentScore=a;this._highestMultiplier=c};d["game.scenes.PostGameScene"]=Lb;Lb.__name__=!0;Lb.__super__=B;Lb.prototype=m(B.prototype,{onAdded:function(){B.prototype.onAdded.call(this);
this.setupSceneSprite();this.setupFadedBackground();this.setupWindowBackground();this.setupScoreLabel();this.setupMultiplierLabel();this.setupPressAnywhereLabel();this.setupInputListeners();this.playEnterAnimation()},setupWindowBackground:function(){this._windowBackground=new aa(16777215,350,200);this._sceneSprite.owner.addChild((new l).add(this._windowBackground));this._windowBackground.x.set__(i.get_width()/2);this._windowBackground.y.set__(i.get_height()/2);this._windowBackground.centerAnchor()},
setupScoreLabel:function(){var a=new P(D.getFont("fonts/chubby_cheeks_64"),"Score: "+this._currentScore);this._windowBackground.owner.addChild((new l).add(a));a.centerAnchor();a.x.set__(this._windowBackground.getNaturalWidth()/2);a.y.set__(this._windowBackground.getNaturalHeight()/2-50)},setupMultiplierLabel:function(){var a=new P(D.getFont("fonts/chubby_cheeks_32"),"Highest Multiplier: "+this._highestMultiplier);this._windowBackground.owner.addChild((new l).add(a));a.centerAnchor();a.x.set__(this._windowBackground.getNaturalWidth()/
2);a.y.set__(this._windowBackground.getNaturalHeight()/2-5)},setupPressAnywhereLabel:function(){var a=new P(D.getFont("fonts/chubby_cheeks_32"),"Press anywhere to continue");this._windowBackground.owner.addChild((new l).add(a));a.setScale(0.75);a.centerAnchor();a.x.set__(this._windowBackground.getNaturalWidth()/2);a.y.set__(this._windowBackground.getNaturalHeight()/2+60)},setupSceneSprite:function(){this._sceneSprite=new k;this.owner.addChild((new l).add(this._sceneSprite))},setupFadedBackground:function(){var a=
new aa(0,i.get_width(),i.get_height());this._sceneSprite.owner.addChild((new l).add(a));a.alpha.set__(0.6)},setupInputListeners:function(){o._platform.getPointer().down.connect(H(this,this.onInputDetected)).once()},playEnterAnimation:function(){this._sceneSprite.alpha.set__(0);this._sceneSprite.alpha.animateTo(1,0.5)},onInputDetected:function(){U.switchScene(new $a)},__class__:Lb});var Pb=function(){};d["game.spawners.CoinSpawner"]=Pb;Pb.__name__=!0;Pb.__super__=q;Pb.prototype=m(q.prototype,{get_name:function(){return"CoinSpawner_7"},
createCoin:function(){this._currentCoin=new Vb;j.gameManager.get_gameScene().get_tileMap().addTileObjectAt(this._currentCoin,0,0)},moveCoinToRandomPosition:function(){if(null!=this._currentCoin){var a=A.getRandomEmptyTile();if(null!=a){var c=a.get_currentColumn(),a=a.get_currentRow();null!=this._currentCoin.get_tileAttachedTo()&&this._currentCoin.get_tileAttachedTo().removeResident(this._currentCoin);this._currentCoin.show();this._currentCoin.isPickedUp=!1;j.gameManager.get_gameScene().get_tileMap().getTileAt(c,
a).addResident(this._currentCoin,!0)}}},get_currentCoin:function(){return this._currentCoin},__class__:Pb});var Qb=function(){};d["game.spawners.DirectionalPlateSpawner"]=Qb;Qb.__name__=!0;Qb.__super__=q;Qb.prototype=m(q.prototype,{get_name:function(){return"DirectionalPlateSpawner_1"},spawnADirectionalPlateAtRandom:function(a){null==a&&(a=1);for(var c=0;c<a;){c++;var b=A.getRandomEmptyTile();if(null==b)break;var d=b.get_currentColumn(),b=b.get_currentRow(),f=new sa;j.gameManager.get_gameScene().get_tileMap().addTileObjectAt(f,
d,b);f.playSpawningAnimation()}},onTurnChanged:function(){this.spawnADirectionalPlateAtRandom(2);x.playAudio("audio/sfx/spawn",0.25)},__class__:Qb});var Y=function(){};d["game.utils.MoveDirectionUtils"]=Y;Y.__name__=!0;Y.adjustPositionWithDirection=function(a,c,b){null==b&&(b=1);a=new $(a.x,a.y);c==p.UP?a.y-=b:c==p.RIGHT?a.x+=b:c==p.DOWN?a.y+=b:c==p.LEFT&&(a.x-=b);return a};Y.getMovementDirectionBetween=function(a,c){if(a.x==c.x){if(a.y<c.y)return p.DOWN;if(a.y>c.y)return p.UP}else if(a.y==c.y){if(a.x<
c.x)return p.RIGHT;if(a.x>c.x)return p.LEFT}return null};Y.getOppositeDirection=function(a){return a==p.UP?p.DOWN:a==p.RIGHT?p.LEFT:a==p.DOWN?p.UP:p.RIGHT};Y.getRandomDirection=function(){var a=cb.allEnums(p),c=a.length,c=z["int"](Math.random()*c);return a[c]};var ya=function(){};d["game.utils.ThrowUtils"]=ya;ya.__name__=!0;ya.throwToDirection=function(a,c){var b=ya.getThrowTargetTile(a,c);null==b||b==a.get_tileAttachedTo()||(b=new $(b.get_currentColumn(),b.get_currentRow()),a.get_movementManager().moveTo(b.x|
0,b.y|0),a.throwDirection=c)};ya.getThrowTargetTile=function(a,c){var b=a.get_tileAttachedTo();j.gameManager.get_gameScene().get_tileMap();b=A.getFarthestTileAtDirection(b.get_currentColumn(),b.get_currentRow(),c);if(null==b.getCurrentPlate()){var d=b.getNonPlateObject();if(null!=d){var f=new $(b.get_currentColumn(),b.get_currentRow()),h=Y.adjustPositionWithDirection(f,c);d.get_movementManager().checkIfCanMoveTo(h,c)||(b=ya.getTargetFromBackwards(b,f,c))}}return b};ya.getTargetFromBackwards=function(a,
c,b){a=j.gameManager.get_gameScene().get_tileMap();b=Y.getOppositeDirection(b);c=Y.adjustPositionWithDirection(c,b);return a=a.getTileAt(c.x|0,c.y|0)};var A=function(){};d["game.utils.TileMapUtils"]=A;A.__name__=!0;A.getDistanceBetween=function(a,c){var b=Math.abs(a.get_currentColumn()-c.get_currentColumn()),d=Math.abs(a.get_currentRow()-c.get_currentRow());return z["int"](Math.max(b,d))};A.getRandomEmptyTile=function(){for(var a=0;;){var c=j.gameManager.get_gameScene().get_tileMap(),b=z["int"](Math.random()*
c.get_colCount()),d=z["int"](Math.random()*c.get_rowCount()),c=c.getTileAt(b,d);if(c.isEmpty())return c;if(100<a)break;a++}return null};A.getFarthestTileAtDirection=function(a,c,b){a=new $(a,c);a=A.recursiveCheckForObstacles(a,b);return j.gameManager.get_gameScene().get_tileMap().getTileAt(a.x|0,a.y|0)};A.recursiveCheckForObstacles=function(a,c){var b=j.gameManager.get_gameScene().get_tileMap(),d=Y.adjustPositionWithDirection(a,c);return 0>=a.y&&c==p.UP||a.y>=b.get_rowCount()-1&&c==p.DOWN||0>=a.x&&
c==p.LEFT||a.x>=b.get_colCount()-1&&c==p.RIGHT?a:A.isThereAPlate(d.x|0,d.y|0)||A.isThereAnObstacle(d,c)?d:A.recursiveCheckForObstacles(d,c)};A.isThereAPlate=function(a,b){var d=j.gameManager.get_gameScene().get_tileMap().getFirstPlateAt(a,b);return null!=d&&!d.get_isScheduledForDisposal()?!0:!1};A.isThereAnObstacle=function(a){a=j.gameManager.get_gameScene().get_tileMap().getTileAt(a.x|0,a.y|0);return null==a||a.isEmpty()?!1:!0};A.isOutsideRowBoundary=function(a,b){null==b&&(b=!0);return b?0>a||a>=
j.gameManager.get_gameScene().get_tileMap().get_rowCount():0>=a||a>=j.gameManager.get_gameScene().get_tileMap().get_rowCount()-1};A.isOutsideColumnBoundary=function(a,b){null==b&&(b=!0);return b?0>a||a>=j.gameManager.get_gameScene().get_tileMap().get_colCount():0>=a||a>=j.gameManager.get_gameScene().get_tileMap().get_colCount()-1};var fa=function(){this.h={}};d["haxe.ds.IntMap"]=fa;fa.__name__=!0;fa.__interfaces__=[uc];fa.prototype={set:function(a,b){this.h[a]=b},get:function(a){return this.h[a]},
exists:function(a){return this.h.hasOwnProperty(a)},remove:function(a){if(!this.h.hasOwnProperty(a))return!1;delete this.h[a];return!0},__class__:fa};var ga=function(){this.h={}};d["haxe.ds.StringMap"]=ga;ga.__name__=!0;ga.__interfaces__=[uc];ga.prototype={set:function(a,b){this.h["$"+a]=b},get:function(a){return this.h["$"+a]},remove:function(a){a="$"+a;if(!this.h.hasOwnProperty(a))return!1;delete this.h[a];return!0},keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b.substr(1));
return y.iter(a)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){return this.ref["$"+this.it.next()]}}},__class__:ga};var Hc=function(){};d["haxe.io.Bytes"]=Hc;Hc.__name__=!0;var Dc=function(){};d["haxe.io.Eof"]=Dc;Dc.__name__=!0;Dc.prototype={toString:function(){return"Eof"},__class__:Dc};var xc=function(){};d["haxe.rtti.Meta"]=xc;xc.__name__=!0;xc.getType=function(a){a=a.__meta__;return null==a||null==a.obj?{}:a.obj};var u=function(){};
d["js.Boot"]=u;u.__name__=!0;u.getClass=function(a){return a instanceof Array&&null==a.__enum__?Array:a.__class__};u.__string_rec=function(a,b){if(null==a)return"null";if(5<=b.length)return"<...>";var d=typeof a;if("function"==d&&(a.__name__||a.__ename__))d="object";switch(d){case "object":if(a instanceof Array){if(a.__enum__){if(2==a.length)return a[0];for(var d=a[0]+"(",b=b+"\t",g=2,f=a.length;g<f;)var h=g++,d=2!=h?d+(","+u.__string_rec(a[h],b)):d+u.__string_rec(a[h],b);return d+")"}d=a.length;
g="[";b+="\t";for(f=0;f<d;)h=f++,g+=(0<h?",":"")+u.__string_rec(a[h],b);return g+"]"}try{g=a.toString}catch(i){return"???"}if(null!=g&&g!=Object.toString&&(d=a.toString(),"[object Object]"!=d))return d;d=null;g="{\n";b+="\t";f=null!=a.hasOwnProperty;for(d in a)if(!f||a.hasOwnProperty(d))"prototype"==d||"__class__"==d||"__super__"==d||"__interfaces__"==d||"__properties__"==d||(2!=g.length&&(g+=", \n"),g+=b+d+" : "+u.__string_rec(a[d],b));b=b.substring(1);return g+("\n"+b+"}");case "function":return"<function>";
case "string":return a;default:return""+a}};u.__interfLoop=function(a,b){if(null==a)return!1;if(a==b)return!0;var d=a.__interfaces__;if(null!=d)for(var g=0,f=d.length;g<f;){var h=g++,h=d[h];if(h==b||u.__interfLoop(h,b))return!0}return u.__interfLoop(a.__super__,b)};u.__instanceof=function(a,b){if(null==b)return!1;switch(b){case Lc:return(a|0)===a;case Ic:return"number"==typeof a;case Jc:return"boolean"==typeof a;case String:return"string"==typeof a;case Array:return a instanceof Array&&null==a.__enum__;
case Mc:return!0;default:if(null!=a){if("function"==typeof b&&(a instanceof b||u.__interfLoop(u.getClass(a),b)))return!0}else return!1;return b==Nc&&null!=a.__name__||b==Oc&&null!=a.__ename__?!0:a.__enum__==b}};u.__cast=function(a,b){if(u.__instanceof(a,b))return a;throw"Cannot cast "+z.string(a)+" to "+z.string(b);};var wc=function(){};d["js.html._CanvasElement.CanvasUtil"]=wc;wc.__name__=!0;wc.getContextWebGL=function(a,b){for(var d=0,g=["webgl","experimental-webgl"];d<g.length;){var f=g[d];++d;
f=a.getContext(f,b);if(null!=f)return f}return null};var Gc,Kc=0;Math.NaN=Number.NaN;Math.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY;Math.POSITIVE_INFINITY=Number.POSITIVE_INFINITY;d.Math=Math;Math.isFinite=function(a){return isFinite(a)};Math.isNaN=function(a){return isNaN(a)};String.prototype.__class__=d.String=String;String.__name__=!0;d.Array=Array;Array.__name__=!0;Date.prototype.__class__=d.Date=Date;Date.__name__=["Date"];var Lc=d.Int={__name__:["Int"]},Mc=d.Dynamic={__name__:["Dynamic"]},
Ic=d.Float=Number;Ic.__name__=["Float"];var Jc=d.Bool=Boolean;Jc.__ename__=["Bool"];var Nc=d.Class={__name__:["Class"]},Oc={};pa.instance=new pa;C.DISPATCHING_SENTINEL=new Ca(null,null);o.root=new l;o.uncaughtError=new v;o.hidden=new K(!1);o.volume=new w(1);o._platform=pa.instance;o._calledInit=!1;R.__meta__={obj:{assets:[{preloader:[{bytes:978,md5:"4f9fca2d3d1b3fa235e80f434fffd6e2",name:"bg_gradient.png"},{bytes:3026,md5:"12b118a3f35f6bc497d0c863dc97eef6",name:"loading_font.fnt"},{bytes:3962,md5:"bed6a24552f0bbcf14b4b3aeba700722",
name:"loading_font_0.png"},{bytes:2093,md5:"d5f026240a6033742021b3fa2bd4422f",name:"loading_font_1.png"}],game:[{bytes:2588342,md5:"3d1af417c557e1edec87746a483d45e4",name:"audio/bgm/i_am_the_rock.mp3"},{bytes:1699778,md5:"c7274ebffd5f489bde68f02a62293939",name:"audio/bgm/i_am_the_rock.ogg"},{bytes:4178,md5:"a00d1479786546d2856302a60e6c48bb",name:"audio/sfx/bounce.mp3"},{bytes:5732,md5:"879ae12d6368c7af746c66ba958355c1",name:"audio/sfx/bounce.ogg"},{bytes:5040,md5:"7f5f4aada60729f0fe2aa77395a2392b",
name:"audio/sfx/coin.mp3"},{bytes:7765,md5:"56e9c7b4a331d5deb7f2a7d7280942c8",name:"audio/sfx/coin.ogg"},{bytes:5014,md5:"41aebfa8d53fd87ab69f0352d435cfa5",name:"audio/sfx/move.mp3"},{bytes:6202,md5:"25846a125c6d5fe2ec3961fd7e026089",name:"audio/sfx/move.ogg"},{bytes:5850,md5:"21733eb077711860bfa77bb1786b6c7c",name:"audio/sfx/place.mp3"},{bytes:9789,md5:"ee24116cd9e834e6698ee6f08b4296d3",name:"audio/sfx/place.ogg"},{bytes:5112,md5:"3ea65292769fa291b0bf9a75ae8f324e",name:"audio/sfx/shake.mp3"},{bytes:8176,
md5:"8cc5731b5b8b0b4eb96db021a12b56b4",name:"audio/sfx/shake.ogg"},{bytes:10800,md5:"5e7a8ff51723deae2b3fd86055c8019e",name:"audio/sfx/shift_dimension.mp3"},{bytes:14604,md5:"a5d40d5b97000a765ecc184b577e0dea",name:"audio/sfx/shift_dimension.ogg"},{bytes:9504,md5:"a03e21461310bc7a8bead92f0b085a28",name:"audio/sfx/spawn.mp3"},{bytes:14500,md5:"972271fc3a67300ac78bef867d058684",name:"audio/sfx/spawn.ogg"},{bytes:978,md5:"4f9fca2d3d1b3fa235e80f434fffd6e2",name:"backgrounds/bg_gradient.png"},{bytes:5764,
md5:"7d94fc39b57426e870c0ead8dcc1ef05",name:"backgrounds/cloud_bg.png"},{bytes:42888,md5:"ae45e207f089f9758ececa1eccfbe8da",name:"backgrounds/map_bg.png"},{bytes:43011,md5:"4d52ab8a41dbb037476c709d3292589f",name:"backgrounds/map_bg_green.png"},{bytes:39810,md5:"936ab4a7672df561a56dd9b8939faf4a",name:"backgrounds/map_bg_pink.png"},{bytes:11871,md5:"a61e32d5ba08a78fb9ca495caac11605",name:"fonts/chubby_cheeks_32.fnt"},{bytes:8645,md5:"7d50e909869a9e493ea734064f8b108f",name:"fonts/chubby_cheeks_32_0.png"},
{bytes:11871,md5:"edb8f07a364b5f33d1e18c722859c500",name:"fonts/chubby_cheeks_64.fnt"},{bytes:19192,md5:"01c601b5fd09af1ba449db6ff61accb5",name:"fonts/chubby_cheeks_64_0.png"},{bytes:1138,md5:"deac5205c67b7c89aa84ef9814d9e6b7",name:"gui/gui_bg.png"},{bytes:1741,md5:"674083da37fa6e240ecc726493660144",name:"plane.png"},{bytes:17332,md5:"0d8f065600f0bd2eed9b3acb5c3cec49",name:"scenes/main_menu/peeking_land.png"},{bytes:347,md5:"4b95e23922e9dcd1a6d72a53008479c7",name:"scenes/main_menu/play_bg.png"},{bytes:250,
md5:"14135b93f5133a364a965502dd0b569c",name:"scenes/main_menu/title_bg.png"},{bytes:429,md5:"6bf592aef6cdb5a18ec19f3df500152f",name:"tile_objects/character.png"},{bytes:1645,md5:"b0571bd8f96af2f1f1a43fdd58f0c458",name:"tile_objects/characters/green_character.png"},{bytes:1705,md5:"f7deaed38272c2857b32c024aac9d360",name:"tile_objects/characters/pink_character.png"},{bytes:1006,md5:"d2fa95b06f5ac36a4759739f3d127556",name:"tile_objects/coin_plate.png"},{bytes:450,md5:"13991ba70e289ffccaf51cfecd24dd86",
name:"tile_objects/default.png"},{bytes:304,md5:"12778e5235907981b5291e4f370bbcd9",name:"tile_objects/default_plate.png"},{bytes:341,md5:"6275199d16cfedca414d37bca45041fb",name:"tile_objects/directional_plates/blue_plate.png"},{bytes:354,md5:"2437e9325aa5049b50269afda89ddc5d",name:"tile_objects/directional_plates/green_plate.png"},{bytes:357,md5:"1e45daeecf022247f0f04f87541eb190",name:"tile_objects/directional_plates/pink_plate.png"},{bytes:307,md5:"2d9333635ffd5cecefa6291f72f6f31a",name:"tile_objects/directional_plates/red_plate.png"},
{bytes:788,md5:"bccea9714e29e819414e7bfa16d0b0aa",name:"tile_objects/multiplier_plate.png"}]}]}};R._supportsCrossOrigin=function(){var a;a=0<=window.navigator.userAgent.indexOf("Linux; U; Android")?!1:null!=(new XMLHttpRequest).withCredentials;a||null;return a}();k._scratchPoint=new $;ua.NEWLINE=new lb(10);Z._sharedEvent=new fc;S._sharedEvent=new gc;I._sharedEvent=new hc;Ba.CANVAS_TEXTURES=(new oa("(iPhone|iPod|iPad)","")).match(window.navigator.userAgent);s._mediaRefCount=0;s._detectBlobSupport=
!0;n.VENDOR_PREFIXES=["webkit","moz","ms","o","khtml"];n.SHOULD_HIDE_MOBILE_BROWSER=window.top==window&&(new oa("Mobile(/.*)? Safari","")).match(window.navigator.userAgent);t._detectSupport=!0;ca._scratchMatrix=new ea;Db.main()})();
